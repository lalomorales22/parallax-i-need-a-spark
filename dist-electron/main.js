"use strict";const k=require("electron"),rt=require("fs"),Bf=require("constants"),sn=require("stream"),Wr=require("util"),Sl=require("assert"),ee=require("path"),Vn=require("child_process"),_o=require("events"),Wn=require("crypto"),Al=require("tty"),Yn=require("os"),ln=require("url"),Hf=require("string_decoder"),Cl=require("zlib"),jf=require("http"),Q=require("node:path"),qf=require("better-sqlite3");var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wt={},kt={},Pe={};Pe.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,r)=>{t.push((i,o)=>i!=null?r(i):n(o)),e.apply(this,t)})},"name",{value:e.name})};Pe.fromPromise=function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>n(null,r),n)},"name",{value:e.name})};var ct=Bf,Gf=process.cwd,Ir=null,Vf=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ir||(Ir=Gf.call(process)),Ir};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var ga=process.chdir;process.chdir=function(e){Ir=null,ga.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ga)}var Wf=Yf;function Yf(e){ct.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,d,g){g&&process.nextTick(g)},e.lchownSync=function(){}),Vf==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(d,g,w){var y=Date.now(),T=0;c(d,g,function A(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-y<6e4){setTimeout(function(){e.stat(g,function(F,L){F&&F.code==="ENOENT"?c(d,g,A):w(S)})},T),T<100&&(T+=10);return}w&&w(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(d,g,w,y,T,A){var S;if(A&&typeof A=="function"){var F=0;S=function(L,re,ce){if(L&&L.code==="EAGAIN"&&F<10)return F++,c.call(e,d,g,w,y,T,S);A.apply(this,arguments)}}return c.call(e,d,g,w,y,T,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,d,g,w,y){for(var T=0;;)try{return c.call(e,f,d,g,w,y)}catch(A){if(A.code==="EAGAIN"&&T<10){T++;continue}throw A}}}(e.readSync);function t(c){c.lchmod=function(f,d,g){c.open(f,ct.O_WRONLY|ct.O_SYMLINK,d,function(w,y){if(w){g&&g(w);return}c.fchmod(y,d,function(T){c.close(y,function(A){g&&g(T||A)})})})},c.lchmodSync=function(f,d){var g=c.openSync(f,ct.O_WRONLY|ct.O_SYMLINK,d),w=!0,y;try{y=c.fchmodSync(g,d),w=!1}finally{if(w)try{c.closeSync(g)}catch{}else c.closeSync(g)}return y}}function n(c){ct.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,d,g,w){c.open(f,ct.O_SYMLINK,function(y,T){if(y){w&&w(y);return}c.futimes(T,d,g,function(A){c.close(T,function(S){w&&w(A||S)})})})},c.lutimesSync=function(f,d,g){var w=c.openSync(f,ct.O_SYMLINK),y,T=!0;try{y=c.futimesSync(w,d,g),T=!1}finally{if(T)try{c.closeSync(w)}catch{}else c.closeSync(w)}return y}):c.futimes&&(c.lutimes=function(f,d,g,w){w&&process.nextTick(w)},c.lutimesSync=function(){})}function r(c){return c&&function(f,d,g){return c.call(e,f,d,function(w){p(w)&&(w=null),g&&g.apply(this,arguments)})}}function i(c){return c&&function(f,d){try{return c.call(e,f,d)}catch(g){if(!p(g))throw g}}}function o(c){return c&&function(f,d,g,w){return c.call(e,f,d,g,function(y){p(y)&&(y=null),w&&w.apply(this,arguments)})}}function a(c){return c&&function(f,d,g){try{return c.call(e,f,d,g)}catch(w){if(!p(w))throw w}}}function s(c){return c&&function(f,d,g){typeof d=="function"&&(g=d,d=null);function w(y,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),g&&g.apply(this,arguments)}return d?c.call(e,f,d,w):c.call(e,f,w)}}function l(c){return c&&function(f,d){var g=d?c.call(e,f,d):c.call(e,f);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Ea=sn.Stream,Xf=zf;function zf(e){return{ReadStream:t,WriteStream:n};function t(r,i){if(!(this instanceof t))return new t(r,i);Ea.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),s=0,l=a.length;s<l;s++){var p=a[s];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){o.emit("error",c),o.readable=!1;return}o.fd=f,o.emit("open",f),o._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);Ea.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),a=0,s=o.length;a<s;a++){var l=o[a];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Kf=Qf,Jf=Object.getPrototypeOf||function(e){return e.__proto__};function Qf(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Jf(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var ae=rt,Zf=Wf,ed=Xf,td=Kf,pr=Wr,_e,Fr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(_e=Symbol.for("graceful-fs.queue"),Fr=Symbol.for("graceful-fs.previous")):(_e="___graceful-fs.queue",Fr="___graceful-fs.previous");function nd(){}function bl(e,t){Object.defineProperty(e,_e,{get:function(){return t}})}var xt=nd;pr.debuglog?xt=pr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(xt=function(){var e=pr.format.apply(pr,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!ae[_e]){var rd=ve[_e]||[];bl(ae,rd),ae.close=function(e){function t(n,r){return e.call(ae,n,function(i){i||ya(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Fr,{value:e}),t}(ae.close),ae.closeSync=function(e){function t(n){e.apply(ae,arguments),ya()}return Object.defineProperty(t,Fr,{value:e}),t}(ae.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){xt(ae[_e]),Sl.equal(ae[_e].length,0)})}ve[_e]||bl(ve,ae[_e]);var Ie=wo(td(ae));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ae.__patched&&(Ie=wo(ae),ae.__patched=!0);function wo(e){Zf(e),e.gracefulify=wo,e.createReadStream=re,e.createWriteStream=ce;var t=e.readFile;e.readFile=n;function n(E,V,j){return typeof V=="function"&&(j=V,V=null),H(E,V,j);function H(K,P,R,N){return t(K,P,function(b){b&&(b.code==="EMFILE"||b.code==="ENFILE")?jt([H,[K,P,R],b,N||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=i;function i(E,V,j,H){return typeof j=="function"&&(H=j,j=null),K(E,V,j,H);function K(P,R,N,b,$){return r(P,R,N,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?jt([K,[P,R,N,b],I,$||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=a);function a(E,V,j,H){return typeof j=="function"&&(H=j,j=null),K(E,V,j,H);function K(P,R,N,b,$){return o(P,R,N,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?jt([K,[P,R,N,b],I,$||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=l);function l(E,V,j,H){return typeof j=="function"&&(H=j,j=0),K(E,V,j,H);function K(P,R,N,b,$){return s(P,R,N,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?jt([K,[P,R,N,b],I,$||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var p=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(E,V,j){typeof V=="function"&&(j=V,V=null);var H=c.test(process.version)?function(R,N,b,$){return p(R,K(R,N,b,$))}:function(R,N,b,$){return p(R,N,K(R,N,b,$))};return H(E,V,j);function K(P,R,N,b){return function($,I){$&&($.code==="EMFILE"||$.code==="ENFILE")?jt([H,[P,R,N],$,b||Date.now(),Date.now()]):(I&&I.sort&&I.sort(),typeof N=="function"&&N.call(this,$,I))}}}if(process.version.substr(0,4)==="v0.8"){var d=ed(e);A=d.ReadStream,F=d.WriteStream}var g=e.ReadStream;g&&(A.prototype=Object.create(g.prototype),A.prototype.open=S);var w=e.WriteStream;w&&(F.prototype=Object.create(w.prototype),F.prototype.open=L),Object.defineProperty(e,"ReadStream",{get:function(){return A},set:function(E){A=E},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return F},set:function(E){F=E},enumerable:!0,configurable:!0});var y=A;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(E){y=E},enumerable:!0,configurable:!0});var T=F;Object.defineProperty(e,"FileWriteStream",{get:function(){return T},set:function(E){T=E},enumerable:!0,configurable:!0});function A(E,V){return this instanceof A?(g.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function S(){var E=this;xe(E.path,E.flags,E.mode,function(V,j){V?(E.autoClose&&E.destroy(),E.emit("error",V)):(E.fd=j,E.emit("open",j),E.read())})}function F(E,V){return this instanceof F?(w.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}function L(){var E=this;xe(E.path,E.flags,E.mode,function(V,j){V?(E.destroy(),E.emit("error",V)):(E.fd=j,E.emit("open",j))})}function re(E,V){return new e.ReadStream(E,V)}function ce(E,V){return new e.WriteStream(E,V)}var X=e.open;e.open=xe;function xe(E,V,j,H){return typeof j=="function"&&(H=j,j=null),K(E,V,j,H);function K(P,R,N,b,$){return X(P,R,N,function(I,B){I&&(I.code==="EMFILE"||I.code==="ENFILE")?jt([K,[P,R,N,b],I,$||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}return e}function jt(e){xt("ENQUEUE",e[0].name,e[1]),ae[_e].push(e),To()}var mr;function ya(){for(var e=Date.now(),t=0;t<ae[_e].length;++t)ae[_e][t].length>2&&(ae[_e][t][3]=e,ae[_e][t][4]=e);To()}function To(){if(clearTimeout(mr),mr=void 0,ae[_e].length!==0){var e=ae[_e].shift(),t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];if(i===void 0)xt("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-i>=6e4){xt("TIMEOUT",t.name,n);var a=n.pop();typeof a=="function"&&a.call(null,r)}else{var s=Date.now()-o,l=Math.max(o-i,1),p=Math.min(l*1.2,100);s>=p?(xt("RETRY",t.name,n),t.apply(null,n.concat([i]))):ae[_e].push(e)}mr===void 0&&(mr=setTimeout(To,0))}}(function(e){const t=Pe.fromCallback,n=Ie,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof n[i]=="function");Object.assign(e,n),r.forEach(i=>{e[i]=t(n[i])}),e.exists=function(i,o){return typeof o=="function"?n.exists(i,o):new Promise(a=>n.exists(i,a))},e.read=function(i,o,a,s,l,p){return typeof p=="function"?n.read(i,o,a,s,l,p):new Promise((c,f)=>{n.read(i,o,a,s,l,(d,g,w)=>{if(d)return f(d);c({bytesRead:g,buffer:w})})})},e.write=function(i,o,...a){return typeof a[a.length-1]=="function"?n.write(i,o,...a):new Promise((s,l)=>{n.write(i,o,...a,(p,c,f)=>{if(p)return l(p);s({bytesWritten:c,buffer:f})})})},typeof n.writev=="function"&&(e.writev=function(i,o,...a){return typeof a[a.length-1]=="function"?n.writev(i,o,...a):new Promise((s,l)=>{n.writev(i,o,...a,(p,c,f)=>{if(p)return l(p);s({bytesWritten:c,buffers:f})})})}),typeof n.realpath.native=="function"?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(kt);var So={},Rl={};const id=ee;Rl.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(id.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const Ol=kt,{checkPath:Pl}=Rl,Il=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};So.makeDir=async(e,t)=>(Pl(e),Ol.mkdir(e,{mode:Il(t),recursive:!0}));So.makeDirSync=(e,t)=>(Pl(e),Ol.mkdirSync(e,{mode:Il(t),recursive:!0}));const od=Pe.fromPromise,{makeDir:ad,makeDirSync:Si}=So,Ai=od(ad);var Je={mkdirs:Ai,mkdirsSync:Si,mkdirp:Ai,mkdirpSync:Si,ensureDir:Ai,ensureDirSync:Si};const sd=Pe.fromPromise,Nl=kt;function ld(e){return Nl.access(e).then(()=>!0).catch(()=>!1)}var Mt={pathExists:sd(ld),pathExistsSync:Nl.existsSync};const en=Ie;function cd(e,t,n,r){en.open(e,"r+",(i,o)=>{if(i)return r(i);en.futimes(o,t,n,a=>{en.close(o,s=>{r&&r(a||s)})})})}function ud(e,t,n){const r=en.openSync(e,"r+");return en.futimesSync(r,t,n),en.closeSync(r)}var Dl={utimesMillis:cd,utimesMillisSync:ud};const nn=kt,me=ee,fd=Wr;function dd(e,t,n){const r=n.dereference?i=>nn.stat(i,{bigint:!0}):i=>nn.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function hd(e,t,n){let r;const i=n.dereference?a=>nn.statSync(a,{bigint:!0}):a=>nn.lstatSync(a,{bigint:!0}),o=i(e);try{r=i(t)}catch(a){if(a.code==="ENOENT")return{srcStat:o,destStat:null};throw a}return{srcStat:o,destStat:r}}function pd(e,t,n,r,i){fd.callbackify(dd)(e,t,r,(o,a)=>{if(o)return i(o);const{srcStat:s,destStat:l}=a;if(l){if(Xn(s,l)){const p=me.basename(e),c=me.basename(t);return n==="move"&&p!==c&&p.toLowerCase()===c.toLowerCase()?i(null,{srcStat:s,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!s.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return s.isDirectory()&&Ao(e,t)?i(new Error(Yr(e,t,n))):i(null,{srcStat:s,destStat:l})})}function md(e,t,n,r){const{srcStat:i,destStat:o}=hd(e,t,r);if(o){if(Xn(i,o)){const a=me.basename(e),s=me.basename(t);if(n==="move"&&a!==s&&a.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Ao(e,t))throw new Error(Yr(e,t,n));return{srcStat:i,destStat:o}}function $l(e,t,n,r,i){const o=me.resolve(me.dirname(e)),a=me.resolve(me.dirname(n));if(a===o||a===me.parse(a).root)return i();nn.stat(a,{bigint:!0},(s,l)=>s?s.code==="ENOENT"?i():i(s):Xn(t,l)?i(new Error(Yr(e,n,r))):$l(e,t,a,r,i))}function Fl(e,t,n,r){const i=me.resolve(me.dirname(e)),o=me.resolve(me.dirname(n));if(o===i||o===me.parse(o).root)return;let a;try{a=nn.statSync(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(Xn(t,a))throw new Error(Yr(e,n,r));return Fl(e,t,o,r)}function Xn(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Ao(e,t){const n=me.resolve(e).split(me.sep).filter(i=>i),r=me.resolve(t).split(me.sep).filter(i=>i);return n.reduce((i,o,a)=>i&&r[a]===o,!0)}function Yr(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var cn={checkPaths:pd,checkPathsSync:md,checkParentPaths:$l,checkParentPathsSync:Fl,isSrcSubdir:Ao,areIdentical:Xn};const $e=Ie,In=ee,gd=Je.mkdirs,Ed=Mt.pathExists,yd=Dl.utimesMillis,Nn=cn;function vd(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Nn.checkPaths(e,t,"copy",n,(i,o)=>{if(i)return r(i);const{srcStat:a,destStat:s}=o;Nn.checkParentPaths(e,a,t,"copy",l=>l?r(l):n.filter?xl(va,s,e,t,n,r):va(s,e,t,n,r))})}function va(e,t,n,r,i){const o=In.dirname(n);Ed(o,(a,s)=>{if(a)return i(a);if(s)return xr(e,t,n,r,i);gd(o,l=>l?i(l):xr(e,t,n,r,i))})}function xl(e,t,n,r,i,o){Promise.resolve(i.filter(n,r)).then(a=>a?e(t,n,r,i,o):o(),a=>o(a))}function _d(e,t,n,r,i){return r.filter?xl(xr,e,t,n,r,i):xr(e,t,n,r,i)}function xr(e,t,n,r,i){(r.dereference?$e.stat:$e.lstat)(t,(a,s)=>a?i(a):s.isDirectory()?Rd(s,e,t,n,r,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?wd(s,e,t,n,r,i):s.isSymbolicLink()?Id(e,t,n,r,i):s.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):s.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function wd(e,t,n,r,i,o){return t?Td(e,n,r,i,o):Ll(e,n,r,i,o)}function Td(e,t,n,r,i){if(r.overwrite)$e.unlink(n,o=>o?i(o):Ll(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function Ll(e,t,n,r,i){$e.copyFile(t,n,o=>o?i(o):r.preserveTimestamps?Sd(e.mode,t,n,i):Xr(n,e.mode,i))}function Sd(e,t,n,r){return Ad(e)?Cd(n,e,i=>i?r(i):_a(e,t,n,r)):_a(e,t,n,r)}function Ad(e){return(e&128)===0}function Cd(e,t,n){return Xr(e,t|128,n)}function _a(e,t,n,r){bd(t,n,i=>i?r(i):Xr(n,e,r))}function Xr(e,t,n){return $e.chmod(e,t,n)}function bd(e,t,n){$e.stat(e,(r,i)=>r?n(r):yd(t,i.atime,i.mtime,n))}function Rd(e,t,n,r,i,o){return t?Ul(n,r,i,o):Od(e.mode,n,r,i,o)}function Od(e,t,n,r,i){$e.mkdir(n,o=>{if(o)return i(o);Ul(t,n,r,a=>a?i(a):Xr(n,e,i))})}function Ul(e,t,n,r){$e.readdir(e,(i,o)=>i?r(i):kl(o,e,t,n,r))}function kl(e,t,n,r,i){const o=e.pop();return o?Pd(e,o,t,n,r,i):i()}function Pd(e,t,n,r,i,o){const a=In.join(n,t),s=In.join(r,t);Nn.checkPaths(a,s,"copy",i,(l,p)=>{if(l)return o(l);const{destStat:c}=p;_d(c,a,s,i,f=>f?o(f):kl(e,n,r,i,o))})}function Id(e,t,n,r,i){$e.readlink(t,(o,a)=>{if(o)return i(o);if(r.dereference&&(a=In.resolve(process.cwd(),a)),e)$e.readlink(n,(s,l)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?$e.symlink(a,n,i):i(s):(r.dereference&&(l=In.resolve(process.cwd(),l)),Nn.isSrcSubdir(a,l)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Nn.isSrcSubdir(l,a)?i(new Error(`Cannot overwrite '${l}' with '${a}'.`)):Nd(a,n,i)));else return $e.symlink(a,n,i)})}function Nd(e,t,n){$e.unlink(t,r=>r?n(r):$e.symlink(e,t,n))}var Dd=vd;const Ae=Ie,Dn=ee,$d=Je.mkdirsSync,Fd=Dl.utimesMillisSync,$n=cn;function xd(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=$n.checkPathsSync(e,t,"copy",n);return $n.checkParentPathsSync(e,r,t,"copy"),Ld(i,e,t,n)}function Ld(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const i=Dn.dirname(n);return Ae.existsSync(i)||$d(i),Ml(e,t,n,r)}function Ud(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return Ml(e,t,n,r)}function Ml(e,t,n,r){const o=(r.dereference?Ae.statSync:Ae.lstatSync)(t);if(o.isDirectory())return Gd(o,e,t,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return kd(o,e,t,n,r);if(o.isSymbolicLink())return Yd(e,t,n,r);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function kd(e,t,n,r,i){return t?Md(e,n,r,i):Bl(e,n,r,i)}function Md(e,t,n,r){if(r.overwrite)return Ae.unlinkSync(n),Bl(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function Bl(e,t,n,r){return Ae.copyFileSync(t,n),r.preserveTimestamps&&Bd(e.mode,t,n),Co(n,e.mode)}function Bd(e,t,n){return Hd(e)&&jd(n,e),qd(t,n)}function Hd(e){return(e&128)===0}function jd(e,t){return Co(e,t|128)}function Co(e,t){return Ae.chmodSync(e,t)}function qd(e,t){const n=Ae.statSync(e);return Fd(t,n.atime,n.mtime)}function Gd(e,t,n,r,i){return t?Hl(n,r,i):Vd(e.mode,n,r,i)}function Vd(e,t,n,r){return Ae.mkdirSync(n),Hl(t,n,r),Co(n,e)}function Hl(e,t,n){Ae.readdirSync(e).forEach(r=>Wd(r,e,t,n))}function Wd(e,t,n,r){const i=Dn.join(t,e),o=Dn.join(n,e),{destStat:a}=$n.checkPathsSync(i,o,"copy",r);return Ud(a,i,o,r)}function Yd(e,t,n,r){let i=Ae.readlinkSync(t);if(r.dereference&&(i=Dn.resolve(process.cwd(),i)),e){let o;try{o=Ae.readlinkSync(n)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Ae.symlinkSync(i,n);throw a}if(r.dereference&&(o=Dn.resolve(process.cwd(),o)),$n.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Ae.statSync(n).isDirectory()&&$n.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Xd(i,n)}else return Ae.symlinkSync(i,n)}function Xd(e,t){return Ae.unlinkSync(t),Ae.symlinkSync(e,t)}var zd=xd;const Kd=Pe.fromCallback;var bo={copy:Kd(Dd),copySync:zd};const wa=Ie,jl=ee,Z=Sl,Fn=process.platform==="win32";function ql(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||wa[n],n=n+"Sync",e[n]=e[n]||wa[n]}),e.maxBusyTries=e.maxBusyTries||3}function Ro(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),Z(e,"rimraf: missing path"),Z.strictEqual(typeof e,"string","rimraf: path should be a string"),Z.strictEqual(typeof n,"function","rimraf: callback function required"),Z(t,"rimraf: invalid options argument provided"),Z.strictEqual(typeof t,"object","rimraf: options should be object"),ql(t),Ta(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&r<t.maxBusyTries){r++;const a=r*100;return setTimeout(()=>Ta(e,t,i),a)}o.code==="ENOENT"&&(o=null)}n(o)})}function Ta(e,t,n){Z(e),Z(t),Z(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&Fn)return Sa(e,t,r,n);if(i&&i.isDirectory())return Nr(e,t,r,n);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return n(null);if(o.code==="EPERM")return Fn?Sa(e,t,o,n):Nr(e,t,o,n);if(o.code==="EISDIR")return Nr(e,t,o,n)}return n(o)})})}function Sa(e,t,n,r){Z(e),Z(t),Z(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(o,a)=>{o?r(o.code==="ENOENT"?null:n):a.isDirectory()?Nr(e,t,n,r):t.unlink(e,r)})})}function Aa(e,t,n){let r;Z(e),Z(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?Dr(e,t,n):t.unlinkSync(e)}function Nr(e,t,n,r){Z(e),Z(t),Z(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Jd(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function Jd(e,t,n){Z(e),Z(t),Z(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let o=i.length,a;if(o===0)return t.rmdir(e,n);i.forEach(s=>{Ro(jl.join(e,s),t,l=>{if(!a){if(l)return n(a=l);--o===0&&t.rmdir(e,n)}})})})}function Gl(e,t){let n;t=t||{},ql(t),Z(e,"rimraf: missing path"),Z.strictEqual(typeof e,"string","rimraf: path should be a string"),Z(t,"rimraf: missing options"),Z.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&Fn&&Aa(e,t,r)}try{n&&n.isDirectory()?Dr(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return Fn?Aa(e,t,r):Dr(e,t,r);if(r.code!=="EISDIR")throw r;Dr(e,t,r)}}function Dr(e,t,n){Z(e),Z(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")Qd(e,t);else if(r.code!=="ENOENT")throw r}}function Qd(e,t){if(Z(e),Z(t),t.readdirSync(e).forEach(n=>Gl(jl.join(e,n),t)),Fn){const n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}var Zd=Ro;Ro.sync=Gl;const Lr=Ie,eh=Pe.fromCallback,Vl=Zd;function th(e,t){if(Lr.rm)return Lr.rm(e,{recursive:!0,force:!0},t);Vl(e,t)}function nh(e){if(Lr.rmSync)return Lr.rmSync(e,{recursive:!0,force:!0});Vl.sync(e)}var zr={remove:eh(th),removeSync:nh};const rh=Pe.fromPromise,Wl=kt,Yl=ee,Xl=Je,zl=zr,Ca=rh(async function(t){let n;try{n=await Wl.readdir(t)}catch{return Xl.mkdirs(t)}return Promise.all(n.map(r=>zl.remove(Yl.join(t,r))))});function ba(e){let t;try{t=Wl.readdirSync(e)}catch{return Xl.mkdirsSync(e)}t.forEach(n=>{n=Yl.join(e,n),zl.removeSync(n)})}var ih={emptyDirSync:ba,emptydirSync:ba,emptyDir:Ca,emptydir:Ca};const oh=Pe.fromCallback,Kl=ee,ht=Ie,Jl=Je;function ah(e,t){function n(){ht.writeFile(e,"",r=>{if(r)return t(r);t()})}ht.stat(e,(r,i)=>{if(!r&&i.isFile())return t();const o=Kl.dirname(e);ht.stat(o,(a,s)=>{if(a)return a.code==="ENOENT"?Jl.mkdirs(o,l=>{if(l)return t(l);n()}):t(a);s.isDirectory()?n():ht.readdir(o,l=>{if(l)return t(l)})})})}function sh(e){let t;try{t=ht.statSync(e)}catch{}if(t&&t.isFile())return;const n=Kl.dirname(e);try{ht.statSync(n).isDirectory()||ht.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")Jl.mkdirsSync(n);else throw r}ht.writeFileSync(e,"")}var lh={createFile:oh(ah),createFileSync:sh};const ch=Pe.fromCallback,Ql=ee,dt=Ie,Zl=Je,uh=Mt.pathExists,{areIdentical:ec}=cn;function fh(e,t,n){function r(i,o){dt.link(i,o,a=>{if(a)return n(a);n(null)})}dt.lstat(t,(i,o)=>{dt.lstat(e,(a,s)=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),n(a);if(o&&ec(s,o))return n(null);const l=Ql.dirname(t);uh(l,(p,c)=>{if(p)return n(p);if(c)return r(e,t);Zl.mkdirs(l,f=>{if(f)return n(f);r(e,t)})})})})}function dh(e,t){let n;try{n=dt.lstatSync(t)}catch{}try{const o=dt.lstatSync(e);if(n&&ec(o,n))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const r=Ql.dirname(t);return dt.existsSync(r)||Zl.mkdirsSync(r),dt.linkSync(e,t)}var hh={createLink:ch(fh),createLinkSync:dh};const pt=ee,Cn=Ie,ph=Mt.pathExists;function mh(e,t,n){if(pt.isAbsolute(e))return Cn.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{const r=pt.dirname(t),i=pt.join(r,e);return ph(i,(o,a)=>o?n(o):a?n(null,{toCwd:i,toDst:e}):Cn.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),n(s)):n(null,{toCwd:e,toDst:pt.relative(r,e)})))}}function gh(e,t){let n;if(pt.isAbsolute(e)){if(n=Cn.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const r=pt.dirname(t),i=pt.join(r,e);if(n=Cn.existsSync(i),n)return{toCwd:i,toDst:e};if(n=Cn.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:pt.relative(r,e)}}}var Eh={symlinkPaths:mh,symlinkPathsSync:gh};const tc=Ie;function yh(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);tc.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function vh(e,t){let n;if(t)return t;try{n=tc.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var _h={symlinkType:yh,symlinkTypeSync:vh};const wh=Pe.fromCallback,nc=ee,je=kt,rc=Je,Th=rc.mkdirs,Sh=rc.mkdirsSync,ic=Eh,Ah=ic.symlinkPaths,Ch=ic.symlinkPathsSync,oc=_h,bh=oc.symlinkType,Rh=oc.symlinkTypeSync,Oh=Mt.pathExists,{areIdentical:ac}=cn;function Ph(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,je.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([je.stat(e),je.stat(t)]).then(([a,s])=>{if(ac(a,s))return r(null);Ra(e,t,n,r)}):Ra(e,t,n,r)})}function Ra(e,t,n,r){Ah(e,t,(i,o)=>{if(i)return r(i);e=o.toDst,bh(o.toCwd,n,(a,s)=>{if(a)return r(a);const l=nc.dirname(t);Oh(l,(p,c)=>{if(p)return r(p);if(c)return je.symlink(e,t,s,r);Th(l,f=>{if(f)return r(f);je.symlink(e,t,s,r)})})})})}function Ih(e,t,n){let r;try{r=je.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const s=je.statSync(e),l=je.statSync(t);if(ac(s,l))return}const i=Ch(e,t);e=i.toDst,n=Rh(i.toCwd,n);const o=nc.dirname(t);return je.existsSync(o)||Sh(o),je.symlinkSync(e,t,n)}var Nh={createSymlink:wh(Ph),createSymlinkSync:Ih};const{createFile:Oa,createFileSync:Pa}=lh,{createLink:Ia,createLinkSync:Na}=hh,{createSymlink:Da,createSymlinkSync:$a}=Nh;var Dh={createFile:Oa,createFileSync:Pa,ensureFile:Oa,ensureFileSync:Pa,createLink:Ia,createLinkSync:Na,ensureLink:Ia,ensureLinkSync:Na,createSymlink:Da,createSymlinkSync:$a,ensureSymlink:Da,ensureSymlinkSync:$a};function $h(e,{EOL:t=`
`,finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+o}function Fh(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var Oo={stringify:$h,stripBom:Fh};let rn;try{rn=Ie}catch{rn=rt}const Kr=Pe,{stringify:sc,stripBom:lc}=Oo;async function xh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||rn,r="throws"in t?t.throws:!0;let i=await Kr.fromCallback(n.readFile)(e,t);i=lc(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(a){if(r)throw a.message=`${e}: ${a.message}`,a;return null}return o}const Lh=Kr.fromPromise(xh);function Uh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||rn,r="throws"in t?t.throws:!0;try{let i=n.readFileSync(e,t);return i=lc(i),JSON.parse(i,t.reviver)}catch(i){if(r)throw i.message=`${e}: ${i.message}`,i;return null}}async function kh(e,t,n={}){const r=n.fs||rn,i=sc(t,n);await Kr.fromCallback(r.writeFile)(e,i,n)}const Mh=Kr.fromPromise(kh);function Bh(e,t,n={}){const r=n.fs||rn,i=sc(t,n);return r.writeFileSync(e,i,n)}var Hh={readFile:Lh,readFileSync:Uh,writeFile:Mh,writeFileSync:Bh};const gr=Hh;var jh={readJson:gr.readFile,readJsonSync:gr.readFileSync,writeJson:gr.writeFile,writeJsonSync:gr.writeFileSync};const qh=Pe.fromCallback,bn=Ie,cc=ee,uc=Je,Gh=Mt.pathExists;function Vh(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");const i=cc.dirname(e);Gh(i,(o,a)=>{if(o)return r(o);if(a)return bn.writeFile(e,t,n,r);uc.mkdirs(i,s=>{if(s)return r(s);bn.writeFile(e,t,n,r)})})}function Wh(e,...t){const n=cc.dirname(e);if(bn.existsSync(n))return bn.writeFileSync(e,...t);uc.mkdirsSync(n),bn.writeFileSync(e,...t)}var Po={outputFile:qh(Vh),outputFileSync:Wh};const{stringify:Yh}=Oo,{outputFile:Xh}=Po;async function zh(e,t,n={}){const r=Yh(t,n);await Xh(e,r,n)}var Kh=zh;const{stringify:Jh}=Oo,{outputFileSync:Qh}=Po;function Zh(e,t,n){const r=Jh(t,n);Qh(e,r,n)}var ep=Zh;const tp=Pe.fromPromise,Oe=jh;Oe.outputJson=tp(Kh);Oe.outputJsonSync=ep;Oe.outputJSON=Oe.outputJson;Oe.outputJSONSync=Oe.outputJsonSync;Oe.writeJSON=Oe.writeJson;Oe.writeJSONSync=Oe.writeJsonSync;Oe.readJSON=Oe.readJson;Oe.readJSONSync=Oe.readJsonSync;var np=Oe;const rp=Ie,to=ee,ip=bo.copy,fc=zr.remove,op=Je.mkdirp,ap=Mt.pathExists,Fa=cn;function sp(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};const i=n.overwrite||n.clobber||!1;Fa.checkPaths(e,t,"move",n,(o,a)=>{if(o)return r(o);const{srcStat:s,isChangingCase:l=!1}=a;Fa.checkParentPaths(e,s,t,"move",p=>{if(p)return r(p);if(lp(t))return xa(e,t,i,l,r);op(to.dirname(t),c=>c?r(c):xa(e,t,i,l,r))})})}function lp(e){const t=to.dirname(e);return to.parse(t).root===t}function xa(e,t,n,r,i){if(r)return Ci(e,t,n,i);if(n)return fc(t,o=>o?i(o):Ci(e,t,n,i));ap(t,(o,a)=>o?i(o):a?i(new Error("dest already exists.")):Ci(e,t,n,i))}function Ci(e,t,n,r){rp.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):cp(e,t,n,r):r())}function cp(e,t,n,r){ip(e,t,{overwrite:n,errorOnExist:!0},o=>o?r(o):fc(e,r))}var up=sp;const dc=Ie,no=ee,fp=bo.copySync,hc=zr.removeSync,dp=Je.mkdirpSync,La=cn;function hp(e,t,n){n=n||{};const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=La.checkPathsSync(e,t,"move",n);return La.checkParentPathsSync(e,i,t,"move"),pp(t)||dp(no.dirname(t)),mp(e,t,r,o)}function pp(e){const t=no.dirname(e);return no.parse(t).root===t}function mp(e,t,n,r){if(r)return bi(e,t,n);if(n)return hc(t),bi(e,t,n);if(dc.existsSync(t))throw new Error("dest already exists.");return bi(e,t,n)}function bi(e,t,n){try{dc.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return gp(e,t,n)}}function gp(e,t,n){return fp(e,t,{overwrite:n,errorOnExist:!0}),hc(e)}var Ep=hp;const yp=Pe.fromCallback;var vp={move:yp(up),moveSync:Ep},Tt={...kt,...bo,...ih,...Dh,...np,...Je,...vp,...Po,...Mt,...zr},it={},gt={},ge={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.CancellationError=Et.CancellationToken=void 0;const _p=_o;class wp extends _p.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new ro);const n=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}};let r=null;return new Promise((i,o)=>{let a=null;if(r=()=>{try{a!=null&&(a(),a=null)}finally{o(new ro)}},this.cancelled){r();return}this.onCancel(r),t(i,o,s=>{a=s})}).then(i=>(n(),i)).catch(i=>{throw n(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}Et.CancellationToken=wp;class ro extends Error{constructor(){super("cancelled")}}Et.CancellationError=ro;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.newError=Tp;function Tp(e,t){const n=new Error(e);return n.code=t,n}var Re={},io={exports:{}},Er={exports:{}},Ri,Ua;function Sp(){if(Ua)return Ri;Ua=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;Ri=function(c,f){f=f||{};var d=typeof c;if(d==="string"&&c.length>0)return a(c);if(d==="number"&&isFinite(c))return f.long?l(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function a(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var d=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function s(c){var f=Math.abs(c);return f>=r?Math.round(c/r)+"d":f>=n?Math.round(c/n)+"h":f>=t?Math.round(c/t)+"m":f>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var f=Math.abs(c);return f>=r?p(c,f,r,"day"):f>=n?p(c,f,n,"hour"):f>=t?p(c,f,t,"minute"):f>=e?p(c,f,e,"second"):c+" ms"}function p(c,f,d,g){var w=f>=d*1.5;return Math.round(c/d)+" "+g+(w?"s":"")}return Ri}var Oi,ka;function pc(){if(ka)return Oi;ka=1;function e(t){r.debug=r,r.default=r,r.coerce=p,r.disable=s,r.enable=o,r.enabled=l,r.humanize=Sp(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let d=0;for(let g=0;g<f.length;g++)d=(d<<5)-d+f.charCodeAt(g),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=n;function r(f){let d,g=null,w,y;function T(...A){if(!T.enabled)return;const S=T,F=Number(new Date),L=F-(d||F);S.diff=L,S.prev=d,S.curr=F,d=F,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let re=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(X,xe)=>{if(X==="%%")return"%";re++;const E=r.formatters[xe];if(typeof E=="function"){const V=A[re];X=E.call(S,V),A.splice(re,1),re--}return X}),r.formatArgs.call(S,A),(S.log||r.log).apply(S,A)}return T.namespace=f,T.useColors=r.useColors(),T.color=r.selectColor(f),T.extend=i,T.destroy=r.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(w!==r.namespaces&&(w=r.namespaces,y=r.enabled(f)),y),set:A=>{g=A}}),typeof r.init=="function"&&r.init(T),T}function i(f,d){const g=r(this.namespace+(typeof d>"u"?":":d)+f);return g.log=this.log,g}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const d=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of d)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function a(f,d){let g=0,w=0,y=-1,T=0;for(;g<f.length;)if(w<d.length&&(d[w]===f[g]||d[w]==="*"))d[w]==="*"?(y=w,T=g,w++):(g++,w++);else if(y!==-1)w=y+1,T++,g=T;else return!1;for(;w<d.length&&d[w]==="*";)w++;return w===d.length}function s(){const f=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),f}function l(f){for(const d of r.skips)if(a(f,d))return!1;for(const d of r.names)if(a(f,d))return!0;return!1}function p(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Oi=e,Oi}var Ma;function Ap(){return Ma||(Ma=1,function(e,t){t.formatArgs=r,t.save=i,t.load=o,t.useColors=n,t.storage=a(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;l.splice(1,0,p,"color: inherit");let c=0,f=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(f=c))}),l.splice(f,0,p)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function a(){try{return localStorage}catch{}}e.exports=pc()(t);const{formatters:s}=e.exports;s.j=function(l){try{return JSON.stringify(l)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}(Er,Er.exports)),Er.exports}var yr={exports:{}},Pi,Ba;function Cp(){return Ba||(Ba=1,Pi=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}),Pi}var Ii,Ha;function bp(){if(Ha)return Ii;Ha=1;const e=Yn,t=Al,n=Cp(),{env:r}=process;let i;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?i=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=1),"FORCE_COLOR"in r&&(r.FORCE_COLOR==="true"?i=1:r.FORCE_COLOR==="false"?i=0:i=r.FORCE_COLOR.length===0?1:Math.min(parseInt(r.FORCE_COLOR,10),3));function o(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function a(l,p){if(i===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(l&&!p&&i===void 0)return 0;const c=i||0;if(r.TERM==="dumb")return c;if(process.platform==="win32"){const f=e.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in r)||r.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if(r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in r){const f=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:c}function s(l){const p=a(l,l&&l.isTTY);return o(p)}return Ii={supportsColor:s,stdout:o(a(!0,t.isatty(1))),stderr:o(a(!0,t.isatty(2)))},Ii}var ja;function Rp(){return ja||(ja=1,function(e,t){const n=Al,r=Wr;t.init=c,t.log=s,t.formatArgs=o,t.save=l,t.load=p,t.useColors=i,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const d=bp();d&&(d.stderr||d).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(d=>/^debug_/i.test(d)).reduce((d,g)=>{const w=g.substring(6).toLowerCase().replace(/_([a-z])/g,(T,A)=>A.toUpperCase());let y=process.env[g];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),d[w]=y,d},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}function o(d){const{namespace:g,useColors:w}=this;if(w){const y=this.color,T="\x1B[3"+(y<8?y:"8;5;"+y),A=`  ${T};1m${g} \x1B[0m`;d[0]=A+d[0].split(`
`).join(`
`+A),d.push(T+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=a()+g+" "+d[0]}function a(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...d){return process.stderr.write(r.formatWithOptions(t.inspectOpts,...d)+`
`)}function l(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function p(){return process.env.DEBUG}function c(d){d.inspectOpts={};const g=Object.keys(t.inspectOpts);for(let w=0;w<g.length;w++)d.inspectOpts[g[w]]=t.inspectOpts[g[w]]}e.exports=pc()(t);const{formatters:f}=e.exports;f.o=function(d){return this.inspectOpts.colors=this.useColors,r.inspect(d,this.inspectOpts).split(`
`).map(g=>g.trim()).join(" ")},f.O=function(d){return this.inspectOpts.colors=this.useColors,r.inspect(d,this.inspectOpts)}}(yr,yr.exports)),yr.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?io.exports=Ap():io.exports=Rp();var Op=io.exports,zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.ProgressCallbackTransform=void 0;const Pp=sn;class Ip extends Pp.Transform{constructor(t,n,r){super(),this.total=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}zn.ProgressCallbackTransform=Ip;Object.defineProperty(Re,"__esModule",{value:!0});Re.DigestTransform=Re.HttpExecutor=Re.HttpError=void 0;Re.createHttpError=oo;Re.parseJson=kp;Re.configureRequestOptionsFromUrl=gc;Re.configureRequestUrl=No;Re.safeGetHeader=tn;Re.configureRequestOptions=kr;Re.safeStringifyJson=Mr;const Np=Wn,Dp=Op,$p=rt,Fp=sn,mc=ln,xp=Et,qa=un,Lp=zn,yn=(0,Dp.default)("electron-builder");function oo(e,t=null){return new Io(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+Mr(e.headers),t)}const Up=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class Io extends Error{constructor(t,n=`HTTP error: ${Up.get(t)||t}`,r=null){super(n),this.statusCode=t,this.description=r,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Re.HttpError=Io;function kp(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class Ur{constructor(){this.maxRedirects=10}request(t,n=new xp.CancellationToken,r){kr(t);const i=r==null?void 0:JSON.stringify(r),o=i?Buffer.from(i):void 0;if(o!=null){yn(i);const{headers:a,...s}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":o.length,...a},...s}}return this.doApiRequest(t,n,a=>a.end(o))}doApiRequest(t,n,r,i=0){return yn.enabled&&yn(`Request: ${Mr(t)}`),n.createPromise((o,a,s)=>{const l=this.createRequest(t,p=>{try{this.handleResponse(p,t,n,o,a,i,r)}catch(c){a(c)}});this.addErrorAndTimeoutHandlers(l,a,t.timeout),this.addRedirectHandlers(l,t,a,i,p=>{this.doApiRequest(p,n,r,i).then(o).catch(a)}),r(l,a),s(()=>l.abort())})}addRedirectHandlers(t,n,r,i,o){}addErrorAndTimeoutHandlers(t,n,r=60*1e3){this.addTimeOutHandler(t,n,r),t.on("error",n),t.on("aborted",()=>{n(new Error("Request has been aborted by the server"))})}handleResponse(t,n,r,i,o,a,s){var l;if(yn.enabled&&yn(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${Mr(n)}`),t.statusCode===404){o(oo(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const p=(l=t.statusCode)!==null&&l!==void 0?l:0,c=p>=300&&p<400,f=tn(t,"location");if(c&&f!=null){if(a>this.maxRedirects){o(this.createMaxRedirectError());return}this.doApiRequest(Ur.prepareRedirectUrlOptions(f,n),r,s,a).then(i).catch(o);return}t.setEncoding("utf8");let d="";t.on("error",o),t.on("data",g=>d+=g),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const g=tn(t,"content-type"),w=g!=null&&(Array.isArray(g)?g.find(y=>y.includes("json"))!=null:g.includes("json"));o(oo(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

          Data:
          ${w?JSON.stringify(JSON.parse(d)):d}
          `))}else i(d.length===0?null:d)}catch(g){o(g)}})}async downloadToBuffer(t,n){return await n.cancellationToken.createPromise((r,i,o)=>{const a=[],s={headers:n.headers||void 0,redirect:"manual"};No(t,s),kr(s),this.doDownload(s,{destination:null,options:n,onCancel:o,callback:l=>{l==null?r(Buffer.concat(a)):i(l)},responseHandler:(l,p)=>{let c=0;l.on("data",f=>{if(c+=f.length,c>524288e3){p(new Error("Maximum allowed size is 500 MB"));return}a.push(f)}),l.on("end",()=>{p(null)})}},0)})}doDownload(t,n,r){const i=this.createRequest(t,o=>{if(o.statusCode>=400){n.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${o.statusCode}: ${o.statusMessage}`));return}o.on("error",n.callback);const a=tn(o,"location");if(a!=null){r<this.maxRedirects?this.doDownload(Ur.prepareRedirectUrlOptions(a,t),n,r++):n.callback(this.createMaxRedirectError());return}n.responseHandler==null?Bp(n,o):n.responseHandler(o,n.callback)});this.addErrorAndTimeoutHandlers(i,n.callback,t.timeout),this.addRedirectHandlers(i,t,n.callback,r,o=>{this.doDownload(o,n,r++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,n,r){t.on("socket",i=>{i.setTimeout(r,()=>{t.abort(),n(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,n){const r=gc(t,{...n}),i=r.headers;if(i!=null&&i.authorization){const o=new mc.URL(t);(o.hostname.endsWith(".amazonaws.com")||o.searchParams.has("X-Amz-Credential"))&&delete i.authorization}return r}static retryOnServerError(t,n=3){for(let r=0;;r++)try{return t()}catch(i){if(r<n&&(i instanceof Io&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}Re.HttpExecutor=Ur;function gc(e,t){const n=kr(t);return No(new mc.URL(e),n),n}function No(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class ao extends Fp.Transform{get actual(){return this._actual}constructor(t,n="sha512",r="base64"){super(),this.expected=t,this.algorithm=n,this.encoding=r,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,Np.createHash)(n)}_transform(t,n,r){this.digester.update(t),r(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(n){t(n);return}t(null)}validate(){if(this._actual==null)throw(0,qa.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,qa.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Re.DigestTransform=ao;function Mp(e,t,n){return e!=null&&t!=null&&e!==t?(n(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function tn(e,t){const n=e.headers[t];return n==null?null:Array.isArray(n)?n.length===0?null:n[n.length-1]:n}function Bp(e,t){if(!Mp(tn(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const n=[];if(e.options.onProgress!=null){const a=tn(t,"content-length");a!=null&&n.push(new Lp.ProgressCallbackTransform(parseInt(a,10),e.options.cancellationToken,e.options.onProgress))}const r=e.options.sha512;r!=null?n.push(new ao(r,"sha512",r.length===128&&!r.includes("+")&&!r.includes("Z")&&!r.includes("=")?"hex":"base64")):e.options.sha2!=null&&n.push(new ao(e.options.sha2,"sha256","hex"));const i=(0,$p.createWriteStream)(e.destination);n.push(i);let o=t;for(const a of n)a.on("error",s=>{i.close(),e.options.cancellationToken.cancelled||e.callback(s)}),o=o.pipe(a);i.on("finish",()=>{i.close(e.callback)})}function kr(e,t,n){n!=null&&(e.method=n),e.headers={...e.headers};const r=e.headers;return t!=null&&(r.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),r["User-Agent"]==null&&(r["User-Agent"]="electron-builder"),(n==null||n==="GET"||r["Cache-Control"]==null)&&(r["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function Mr(e,t){return JSON.stringify(e,(n,r)=>n.endsWith("Authorization")||n.endsWith("authorization")||n.endsWith("Password")||n.endsWith("PASSWORD")||n.endsWith("Token")||n.includes("password")||n.includes("token")||t!=null&&t.has(n)?"<stripped sensitive data>":r,2)}var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.MemoLazy=void 0;class Hp{constructor(t,n){this.selector=t,this.creator=n,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&Ec(this.selected,t))return this._value;this.selected=t;const n=this.creator(t);return this.value=n,n}set value(t){this._value=t}}Jr.MemoLazy=Hp;function Ec(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(a=>Ec(e[a],t[a]))}return e===t}var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.githubUrl=jp;Qr.getS3LikeProviderBaseUrl=qp;function jp(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function qp(e){const t=e.provider;if(t==="s3")return Gp(e);if(t==="spaces")return Vp(e);throw new Error(`Not supported provider: ${t}`)}function Gp(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return yc(t,e.path)}function yc(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function Vp(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return yc(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.retry=vc;const Wp=Et;async function vc(e,t,n,r=0,i=0,o){var a;const s=new Wp.CancellationToken;try{return await e()}catch(l){if((!((a=o==null?void 0:o(l))!==null&&a!==void 0)||a)&&t>0&&!s.cancelled)return await new Promise(p=>setTimeout(p,n+r*i)),await vc(e,t-1,n,r,i+1,o);throw l}}var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.parseDn=Yp;function Yp(e){let t=!1,n=null,r="",i=0;e=e.trim();const o=new Map;for(let a=0;a<=e.length;a++){if(a===e.length){n!==null&&o.set(n,r);break}const s=e[a];if(t){if(s==='"'){t=!1;continue}}else{if(s==='"'){t=!0;continue}if(s==="\\"){a++;const l=parseInt(e.slice(a,a+2),16);Number.isNaN(l)?r+=e[a]:(a++,r+=String.fromCharCode(l));continue}if(n===null&&s==="="){n=r,r="";continue}if(s===","||s===";"||s==="+"){n!==null&&o.set(n,r),n=null,r="";continue}}if(s===" "&&!t){if(r.length===0)continue;if(a>i){let l=a;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||n===null&&e[i]==="="||n!==null&&e[i]==="+"){a=i-1;continue}}r+=s}return o}var on={};Object.defineProperty(on,"__esModule",{value:!0});on.nil=on.UUID=void 0;const _c=Wn,wc=un,Xp="options.name must be either a string or a Buffer",Ga=(0,_c.randomBytes)(16);Ga[0]=Ga[0]|1;const $r={},Y=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);$r[t]=e,Y[e]=t}class Ut{constructor(t){this.ascii=null,this.binary=null;const n=Ut.check(t);if(!n)throw new Error("not a UUID");this.version=n.version,n.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,n){return zp(t,"sha1",80,n)}toString(){return this.ascii==null&&(this.ascii=Kp(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,n=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:($r[t[14]+t[15]]&240)>>4,variant:Va(($r[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<n+16)return!1;let r=0;for(;r<16&&t[n+r]===0;r++);return r===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[n+6]&240)>>4,variant:Va((t[n+8]&224)>>5),format:"binary"}}throw(0,wc.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const n=Buffer.allocUnsafe(16);let r=0;for(let i=0;i<16;i++)n[i]=$r[t[r++]+t[r++]],(i===3||i===5||i===7||i===9)&&(r+=1);return n}}on.UUID=Ut;Ut.OID=Ut.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function Va(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var Rn;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(Rn||(Rn={}));function zp(e,t,n,r,i=Rn.ASCII){const o=(0,_c.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,wc.newError)(Xp,"ERR_INVALID_UUID_NAME");o.update(r),o.update(e);const s=o.digest();let l;switch(i){case Rn.BINARY:s[6]=s[6]&15|n,s[8]=s[8]&63|128,l=s;break;case Rn.OBJECT:s[6]=s[6]&15|n,s[8]=s[8]&63|128,l=new Ut(s);break;default:l=Y[s[0]]+Y[s[1]]+Y[s[2]]+Y[s[3]]+"-"+Y[s[4]]+Y[s[5]]+"-"+Y[s[6]&15|n]+Y[s[7]]+"-"+Y[s[8]&63|128]+Y[s[9]]+"-"+Y[s[10]]+Y[s[11]]+Y[s[12]]+Y[s[13]]+Y[s[14]]+Y[s[15]];break}return l}function Kp(e){return Y[e[0]]+Y[e[1]]+Y[e[2]]+Y[e[3]]+"-"+Y[e[4]]+Y[e[5]]+"-"+Y[e[6]]+Y[e[7]]+"-"+Y[e[8]]+Y[e[9]]+"-"+Y[e[10]]+Y[e[11]]+Y[e[12]]+Y[e[13]]+Y[e[14]]+Y[e[15]]}on.nil=new Ut("00000000-0000-0000-0000-000000000000");var Kn={},Tc={};(function(e){(function(t){t.parser=function(h,u){return new r(h,u)},t.SAXParser=r,t.SAXStream=c,t.createStream=p,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(h,u){if(!(this instanceof r))return new r(h,u);var C=this;o(C),C.q=C.c="",C.bufferCheckPosition=t.MAX_BUFFER_LENGTH,C.opt=u||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!h,C.noscript=!!(h||C.opt.noscript),C.state=E.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(y)),C.opt.unquotedAttributeValues===void 0&&(C.opt.unquotedAttributeValues=!h),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),j(C,"onready")}Object.create||(Object.create=function(h){function u(){}u.prototype=h;var C=new u;return C}),Object.keys||(Object.keys=function(h){var u=[];for(var C in h)h.hasOwnProperty(C)&&u.push(C);return u});function i(h){for(var u=Math.max(t.MAX_BUFFER_LENGTH,10),C=0,_=0,z=n.length;_<z;_++){var te=h[n[_]].length;if(te>u)switch(n[_]){case"textNode":K(h);break;case"cdata":H(h,"oncdata",h.cdata),h.cdata="";break;case"script":H(h,"onscript",h.script),h.script="";break;default:R(h,"Max buffer length exceeded: "+n[_])}C=Math.max(C,te)}var se=t.MAX_BUFFER_LENGTH-C;h.bufferCheckPosition=se+h.position}function o(h){for(var u=0,C=n.length;u<C;u++)h[n[u]]=""}function a(h){K(h),h.cdata!==""&&(H(h,"oncdata",h.cdata),h.cdata=""),h.script!==""&&(H(h,"onscript",h.script),h.script="")}r.prototype={end:function(){N(this)},write:Ye,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var l=t.EVENTS.filter(function(h){return h!=="error"&&h!=="end"});function p(h,u){return new c(h,u)}function c(h,u){if(!(this instanceof c))return new c(h,u);s.apply(this),this._parser=new r(h,u),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(_){C.emit("error",_),C._parser.error=null},this._decoder=null,l.forEach(function(_){Object.defineProperty(C,"on"+_,{get:function(){return C._parser["on"+_]},set:function(z){if(!z)return C.removeAllListeners(_),C._parser["on"+_]=z,z;C.on(_,z)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(h){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(h)){if(!this._decoder){var u=Hf.StringDecoder;this._decoder=new u("utf8")}h=this._decoder.write(h)}return this._parser.write(h.toString()),this.emit("data",h),!0},c.prototype.end=function(h){return h&&h.length&&this.write(h),this._parser.end(),!0},c.prototype.on=function(h,u){var C=this;return!C._parser["on"+h]&&l.indexOf(h)!==-1&&(C._parser["on"+h]=function(){var _=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);_.splice(0,0,h),C.emit.apply(C,_)}),s.prototype.on.call(C,h,u)};var f="[CDATA[",d="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",y={xml:g,xmlns:w},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function L(h){return h===" "||h===`
`||h==="\r"||h==="	"}function re(h){return h==='"'||h==="'"}function ce(h){return h===">"||L(h)}function X(h,u){return h.test(u)}function xe(h,u){return!X(h,u)}var E=0;t.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(h){var u=t.ENTITIES[h],C=typeof u=="number"?String.fromCharCode(u):u;t.ENTITIES[h]=C});for(var V in t.STATE)t.STATE[t.STATE[V]]=V;E=t.STATE;function j(h,u,C){h[u]&&h[u](C)}function H(h,u,C){h.textNode&&K(h),j(h,u,C)}function K(h){h.textNode=P(h.opt,h.textNode),h.textNode&&j(h,"ontext",h.textNode),h.textNode=""}function P(h,u){return h.trim&&(u=u.trim()),h.normalize&&(u=u.replace(/\s+/g," ")),u}function R(h,u){return K(h),h.trackPosition&&(u+=`
Line: `+h.line+`
Column: `+h.column+`
Char: `+h.c),u=new Error(u),h.error=u,j(h,"onerror",u),h}function N(h){return h.sawRoot&&!h.closedRoot&&b(h,"Unclosed root tag"),h.state!==E.BEGIN&&h.state!==E.BEGIN_WHITESPACE&&h.state!==E.TEXT&&R(h,"Unexpected end"),K(h),h.c="",h.closed=!0,j(h,"onend"),r.call(h,h.strict,h.opt),h}function b(h,u){if(typeof h!="object"||!(h instanceof r))throw new Error("bad call to strictFail");h.strict&&R(h,u)}function $(h){h.strict||(h.tagName=h.tagName[h.looseCase]());var u=h.tags[h.tags.length-1]||h,C=h.tag={name:h.tagName,attributes:{}};h.opt.xmlns&&(C.ns=u.ns),h.attribList.length=0,H(h,"onopentagstart",C)}function I(h,u){var C=h.indexOf(":"),_=C<0?["",h]:h.split(":"),z=_[0],te=_[1];return u&&h==="xmlns"&&(z="xmlns",te=""),{prefix:z,local:te}}function B(h){if(h.strict||(h.attribName=h.attribName[h.looseCase]()),h.attribList.indexOf(h.attribName)!==-1||h.tag.attributes.hasOwnProperty(h.attribName)){h.attribName=h.attribValue="";return}if(h.opt.xmlns){var u=I(h.attribName,!0),C=u.prefix,_=u.local;if(C==="xmlns")if(_==="xml"&&h.attribValue!==g)b(h,"xml: prefix must be bound to "+g+`
Actual: `+h.attribValue);else if(_==="xmlns"&&h.attribValue!==w)b(h,"xmlns: prefix must be bound to "+w+`
Actual: `+h.attribValue);else{var z=h.tag,te=h.tags[h.tags.length-1]||h;z.ns===te.ns&&(z.ns=Object.create(te.ns)),z.ns[_]=h.attribValue}h.attribList.push([h.attribName,h.attribValue])}else h.tag.attributes[h.attribName]=h.attribValue,H(h,"onattribute",{name:h.attribName,value:h.attribValue});h.attribName=h.attribValue=""}function W(h,u){if(h.opt.xmlns){var C=h.tag,_=I(h.tagName);C.prefix=_.prefix,C.local=_.local,C.uri=C.ns[_.prefix]||"",C.prefix&&!C.uri&&(b(h,"Unbound namespace prefix: "+JSON.stringify(h.tagName)),C.uri=_.prefix);var z=h.tags[h.tags.length-1]||h;C.ns&&z.ns!==C.ns&&Object.keys(C.ns).forEach(function(or){H(h,"onopennamespace",{prefix:or,uri:C.ns[or]})});for(var te=0,se=h.attribList.length;te<se;te++){var Ee=h.attribList[te],Te=Ee[0],ot=Ee[1],fe=I(Te,!0),Be=fe.prefix,mi=fe.local,ir=Be===""?"":C.ns[Be]||"",hn={name:Te,value:ot,prefix:Be,local:mi,uri:ir};Be&&Be!=="xmlns"&&!ir&&(b(h,"Unbound namespace prefix: "+JSON.stringify(Be)),hn.uri=Be),h.tag.attributes[Te]=hn,H(h,"onattribute",hn)}h.attribList.length=0}h.tag.isSelfClosing=!!u,h.sawRoot=!0,h.tags.push(h.tag),H(h,"onopentag",h.tag),u||(!h.noscript&&h.tagName.toLowerCase()==="script"?h.state=E.SCRIPT:h.state=E.TEXT,h.tag=null,h.tagName=""),h.attribName=h.attribValue="",h.attribList.length=0}function q(h){if(!h.tagName){b(h,"Weird empty close tag."),h.textNode+="</>",h.state=E.TEXT;return}if(h.script){if(h.tagName!=="script"){h.script+="</"+h.tagName+">",h.tagName="",h.state=E.SCRIPT;return}H(h,"onscript",h.script),h.script=""}var u=h.tags.length,C=h.tagName;h.strict||(C=C[h.looseCase]());for(var _=C;u--;){var z=h.tags[u];if(z.name!==_)b(h,"Unexpected close tag");else break}if(u<0){b(h,"Unmatched closing tag: "+h.tagName),h.textNode+="</"+h.tagName+">",h.state=E.TEXT;return}h.tagName=C;for(var te=h.tags.length;te-- >u;){var se=h.tag=h.tags.pop();h.tagName=h.tag.name,H(h,"onclosetag",h.tagName);var Ee={};for(var Te in se.ns)Ee[Te]=se.ns[Te];var ot=h.tags[h.tags.length-1]||h;h.opt.xmlns&&se.ns!==ot.ns&&Object.keys(se.ns).forEach(function(fe){var Be=se.ns[fe];H(h,"onclosenamespace",{prefix:fe,uri:Be})})}u===0&&(h.closedRoot=!0),h.tagName=h.attribValue=h.attribName="",h.attribList.length=0,h.state=E.TEXT}function J(h){var u=h.entity,C=u.toLowerCase(),_,z="";return h.ENTITIES[u]?h.ENTITIES[u]:h.ENTITIES[C]?h.ENTITIES[C]:(u=C,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),_=parseInt(u,16),z=_.toString(16)):(u=u.slice(1),_=parseInt(u,10),z=_.toString(10))),u=u.replace(/^0+/,""),isNaN(_)||z.toLowerCase()!==u||_<0||_>1114111?(b(h,"Invalid character entity"),"&"+h.entity+";"):String.fromCodePoint(_))}function he(h,u){u==="<"?(h.state=E.OPEN_WAKA,h.startTagPosition=h.position):L(u)||(b(h,"Non-whitespace before first tag."),h.textNode=u,h.state=E.TEXT)}function M(h,u){var C="";return u<h.length&&(C=h.charAt(u)),C}function Ye(h){var u=this;if(this.error)throw this.error;if(u.closed)return R(u,"Cannot write after close. Assign an onready handler.");if(h===null)return N(u);typeof h=="object"&&(h=h.toString());for(var C=0,_="";_=M(h,C++),u.c=_,!!_;)switch(u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++),u.state){case E.BEGIN:if(u.state=E.BEGIN_WHITESPACE,_==="\uFEFF")continue;he(u,_);continue;case E.BEGIN_WHITESPACE:he(u,_);continue;case E.TEXT:if(u.sawRoot&&!u.closedRoot){for(var te=C-1;_&&_!=="<"&&_!=="&";)_=M(h,C++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.textNode+=h.substring(te,C-1)}_==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=E.OPEN_WAKA,u.startTagPosition=u.position):(!L(_)&&(!u.sawRoot||u.closedRoot)&&b(u,"Text data outside of root node."),_==="&"?u.state=E.TEXT_ENTITY:u.textNode+=_);continue;case E.SCRIPT:_==="<"?u.state=E.SCRIPT_ENDING:u.script+=_;continue;case E.SCRIPT_ENDING:_==="/"?u.state=E.CLOSE_TAG:(u.script+="<"+_,u.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(_==="!")u.state=E.SGML_DECL,u.sgmlDecl="";else if(!L(_))if(X(T,_))u.state=E.OPEN_TAG,u.tagName=_;else if(_==="/")u.state=E.CLOSE_TAG,u.tagName="";else if(_==="?")u.state=E.PROC_INST,u.procInstName=u.procInstBody="";else{if(b(u,"Unencoded <"),u.startTagPosition+1<u.position){var z=u.position-u.startTagPosition;_=new Array(z).join(" ")+_}u.textNode+="<"+_,u.state=E.TEXT}continue;case E.SGML_DECL:if(u.sgmlDecl+_==="--"){u.state=E.COMMENT,u.comment="",u.sgmlDecl="";continue}u.doctype&&u.doctype!==!0&&u.sgmlDecl?(u.state=E.DOCTYPE_DTD,u.doctype+="<!"+u.sgmlDecl+_,u.sgmlDecl=""):(u.sgmlDecl+_).toUpperCase()===f?(H(u,"onopencdata"),u.state=E.CDATA,u.sgmlDecl="",u.cdata=""):(u.sgmlDecl+_).toUpperCase()===d?(u.state=E.DOCTYPE,(u.doctype||u.sawRoot)&&b(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):_===">"?(H(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=E.TEXT):(re(_)&&(u.state=E.SGML_DECL_QUOTED),u.sgmlDecl+=_);continue;case E.SGML_DECL_QUOTED:_===u.q&&(u.state=E.SGML_DECL,u.q=""),u.sgmlDecl+=_;continue;case E.DOCTYPE:_===">"?(u.state=E.TEXT,H(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=_,_==="["?u.state=E.DOCTYPE_DTD:re(_)&&(u.state=E.DOCTYPE_QUOTED,u.q=_));continue;case E.DOCTYPE_QUOTED:u.doctype+=_,_===u.q&&(u.q="",u.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:_==="]"?(u.doctype+=_,u.state=E.DOCTYPE):_==="<"?(u.state=E.OPEN_WAKA,u.startTagPosition=u.position):re(_)?(u.doctype+=_,u.state=E.DOCTYPE_DTD_QUOTED,u.q=_):u.doctype+=_;continue;case E.DOCTYPE_DTD_QUOTED:u.doctype+=_,_===u.q&&(u.state=E.DOCTYPE_DTD,u.q="");continue;case E.COMMENT:_==="-"?u.state=E.COMMENT_ENDING:u.comment+=_;continue;case E.COMMENT_ENDING:_==="-"?(u.state=E.COMMENT_ENDED,u.comment=P(u.opt,u.comment),u.comment&&H(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+_,u.state=E.COMMENT);continue;case E.COMMENT_ENDED:_!==">"?(b(u,"Malformed comment"),u.comment+="--"+_,u.state=E.COMMENT):u.doctype&&u.doctype!==!0?u.state=E.DOCTYPE_DTD:u.state=E.TEXT;continue;case E.CDATA:for(var te=C-1;_&&_!=="]";)_=M(h,C++),_&&u.trackPosition&&(u.position++,_===`
`?(u.line++,u.column=0):u.column++);u.cdata+=h.substring(te,C-1),_==="]"&&(u.state=E.CDATA_ENDING);continue;case E.CDATA_ENDING:_==="]"?u.state=E.CDATA_ENDING_2:(u.cdata+="]"+_,u.state=E.CDATA);continue;case E.CDATA_ENDING_2:_===">"?(u.cdata&&H(u,"oncdata",u.cdata),H(u,"onclosecdata"),u.cdata="",u.state=E.TEXT):_==="]"?u.cdata+="]":(u.cdata+="]]"+_,u.state=E.CDATA);continue;case E.PROC_INST:_==="?"?u.state=E.PROC_INST_ENDING:L(_)?u.state=E.PROC_INST_BODY:u.procInstName+=_;continue;case E.PROC_INST_BODY:if(!u.procInstBody&&L(_))continue;_==="?"?u.state=E.PROC_INST_ENDING:u.procInstBody+=_;continue;case E.PROC_INST_ENDING:_===">"?(H(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=E.TEXT):(u.procInstBody+="?"+_,u.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:X(A,_)?u.tagName+=_:($(u),_===">"?W(u):_==="/"?u.state=E.OPEN_TAG_SLASH:(L(_)||b(u,"Invalid character in tag name"),u.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:_===">"?(W(u,!0),q(u)):(b(u,"Forward-slash in opening tag not followed by >"),u.state=E.ATTRIB);continue;case E.ATTRIB:if(L(_))continue;_===">"?W(u):_==="/"?u.state=E.OPEN_TAG_SLASH:X(T,_)?(u.attribName=_,u.attribValue="",u.state=E.ATTRIB_NAME):b(u,"Invalid attribute name");continue;case E.ATTRIB_NAME:_==="="?u.state=E.ATTRIB_VALUE:_===">"?(b(u,"Attribute without value"),u.attribValue=u.attribName,B(u),W(u)):L(_)?u.state=E.ATTRIB_NAME_SAW_WHITE:X(A,_)?u.attribName+=_:b(u,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(_==="=")u.state=E.ATTRIB_VALUE;else{if(L(_))continue;b(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",H(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",_===">"?W(u):X(T,_)?(u.attribName=_,u.state=E.ATTRIB_NAME):(b(u,"Invalid attribute name"),u.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(L(_))continue;re(_)?(u.q=_,u.state=E.ATTRIB_VALUE_QUOTED):(u.opt.unquotedAttributeValues||R(u,"Unquoted attribute value"),u.state=E.ATTRIB_VALUE_UNQUOTED,u.attribValue=_);continue;case E.ATTRIB_VALUE_QUOTED:if(_!==u.q){_==="&"?u.state=E.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=_;continue}B(u),u.q="",u.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:L(_)?u.state=E.ATTRIB:_===">"?W(u):_==="/"?u.state=E.OPEN_TAG_SLASH:X(T,_)?(b(u,"No whitespace between attributes"),u.attribName=_,u.attribValue="",u.state=E.ATTRIB_NAME):b(u,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!ce(_)){_==="&"?u.state=E.ATTRIB_VALUE_ENTITY_U:u.attribValue+=_;continue}B(u),_===">"?W(u):u.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(u.tagName)_===">"?q(u):X(A,_)?u.tagName+=_:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=E.SCRIPT):(L(_)||b(u,"Invalid tagname in closing tag"),u.state=E.CLOSE_TAG_SAW_WHITE);else{if(L(_))continue;xe(T,_)?u.script?(u.script+="</"+_,u.state=E.SCRIPT):b(u,"Invalid tagname in closing tag."):u.tagName=_}continue;case E.CLOSE_TAG_SAW_WHITE:if(L(_))continue;_===">"?q(u):b(u,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var se,Ee;switch(u.state){case E.TEXT_ENTITY:se=E.TEXT,Ee="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:se=E.ATTRIB_VALUE_QUOTED,Ee="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:se=E.ATTRIB_VALUE_UNQUOTED,Ee="attribValue";break}if(_===";"){var Te=J(u);u.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(Te)?(u.entity="",u.state=se,u.write(Te)):(u[Ee]+=Te,u.entity="",u.state=se)}else X(u.entity.length?F:S,_)?u.entity+=_:(b(u,"Invalid character in entity name"),u[Ee]+="&"+u.entity+_,u.entity="",u.state=se);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&i(u),u}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var h=String.fromCharCode,u=Math.floor,C=function(){var _=16384,z=[],te,se,Ee=-1,Te=arguments.length;if(!Te)return"";for(var ot="";++Ee<Te;){var fe=Number(arguments[Ee]);if(!isFinite(fe)||fe<0||fe>1114111||u(fe)!==fe)throw RangeError("Invalid code point: "+fe);fe<=65535?z.push(fe):(fe-=65536,te=(fe>>10)+55296,se=fe%1024+56320,z.push(te,se)),(Ee+1===Te||z.length>_)&&(ot+=h.apply(null,z),z.length=0)}return ot};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C}()})(e)})(Tc);Object.defineProperty(Kn,"__esModule",{value:!0});Kn.XElement=void 0;Kn.parseXml=em;const Jp=Tc,vr=un;class Sc{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,vr.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Zp(t))throw(0,vr.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const n=this.attributes===null?null:this.attributes[t];if(n==null)throw(0,vr.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return n}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,n=!1,r=null){const i=this.elementOrNull(t,n);if(i===null)throw(0,vr.newError)(r||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,n=!1){if(this.elements===null)return null;for(const r of this.elements)if(Wa(r,t,n))return r;return null}getElements(t,n=!1){return this.elements===null?[]:this.elements.filter(r=>Wa(r,t,n))}elementValueOrEmpty(t,n=!1){const r=this.elementOrNull(t,n);return r===null?"":r.value}}Kn.XElement=Sc;const Qp=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Zp(e){return Qp.test(e)}function Wa(e,t,n){const r=e.name;return r===t||n===!0&&r.length===t.length&&r.toLowerCase()===t.toLowerCase()}function em(e){let t=null;const n=Jp.parser(!0,{}),r=[];return n.onopentag=i=>{const o=new Sc(i.name);if(o.attributes=i.attributes,t===null)t=o;else{const a=r[r.length-1];a.elements==null&&(a.elements=[]),a.elements.push(o)}r.push(o)},n.onclosetag=()=>{r.pop()},n.ontext=i=>{r.length>0&&(r[r.length-1].value=i)},n.oncdata=i=>{const o=r[r.length-1];o.value=i,o.isCData=!0},n.onerror=i=>{throw i},n.write(e),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=f;var t=Et;Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});var n=un;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return n.newError}});var r=Re;Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return r.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return r.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return r.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return r.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return r.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return r.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return r.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return r.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return r.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return r.safeStringifyJson}});var i=Jr;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return i.MemoLazy}});var o=zn;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return o.ProgressCallbackTransform}});var a=Qr;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return a.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return a.githubUrl}});var s=Do;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return s.retry}});var l=$o;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var p=on;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return p.UUID}});var c=Kn;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return c.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return c.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function f(d){return d==null?[]:Array.isArray(d)?d:[d]}})(ge);var we={},Fo={},Ge={};function Ac(e){return typeof e>"u"||e===null}function tm(e){return typeof e=="object"&&e!==null}function nm(e){return Array.isArray(e)?e:Ac(e)?[]:[e]}function rm(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function im(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function om(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Ge.isNothing=Ac;Ge.isObject=tm;Ge.toArray=nm;Ge.repeat=im;Ge.isNegativeZero=om;Ge.extend=rm;function Cc(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function xn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Cc(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}xn.prototype=Object.create(Error.prototype);xn.prototype.constructor=xn;xn.prototype.toString=function(t){return this.name+": "+Cc(this,t)};var Jn=xn,Sn=Ge;function Ni(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(o=" ... ",t=r-s+o.length),n-r>s&&(a=" ...",n=r+s-a.length),{str:o+e.slice(t,n).replace(/\t/g,"")+a,pos:r-t+o.length}}function Di(e,t){return Sn.repeat(" ",t-e.length)+e}function am(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var s="",l,p,c=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)p=Ni(e.buffer,r[a-l],i[a-l],e.position-(r[a]-r[a-l]),f),s=Sn.repeat(" ",t.indent)+Di((e.line-l+1).toString(),c)+" | "+p.str+`
`+s;for(p=Ni(e.buffer,r[a],i[a],e.position,f),s+=Sn.repeat(" ",t.indent)+Di((e.line+1).toString(),c)+" | "+p.str+`
`,s+=Sn.repeat("-",t.indent+c+3+p.pos)+`^
`,l=1;l<=t.linesAfter&&!(a+l>=i.length);l++)p=Ni(e.buffer,r[a+l],i[a+l],e.position-(r[a]-r[a+l]),f),s+=Sn.repeat(" ",t.indent)+Di((e.line+l+1).toString(),c)+" | "+p.str+`
`;return s.replace(/\n$/,"")}var sm=am,Ya=Jn,lm=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],cm=["scalar","sequence","mapping"];function um(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function fm(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(lm.indexOf(n)===-1)throw new Ya('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=um(t.styleAliases||null),cm.indexOf(this.kind)===-1)throw new Ya('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Ne=fm,vn=Jn,$i=Ne;function Xa(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}function dm(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function so(e){return this.extend(e)}so.prototype.extend=function(t){var n=[],r=[];if(t instanceof $i)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new vn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof $i))throw new vn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new vn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new vn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof $i))throw new vn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(so.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Xa(i,"implicit"),i.compiledExplicit=Xa(i,"explicit"),i.compiledTypeMap=dm(i.compiledImplicit,i.compiledExplicit),i};var bc=so,hm=Ne,Rc=new hm("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),pm=Ne,Oc=new pm("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),mm=Ne,Pc=new mm("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),gm=bc,Ic=new gm({explicit:[Rc,Oc,Pc]}),Em=Ne;function ym(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function vm(){return null}function _m(e){return e===null}var Nc=new Em("tag:yaml.org,2002:null",{kind:"scalar",resolve:ym,construct:vm,predicate:_m,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),wm=Ne;function Tm(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Sm(e){return e==="true"||e==="True"||e==="TRUE"}function Am(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Dc=new wm("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Tm,construct:Sm,predicate:Am,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Cm=Ge,bm=Ne;function Rm(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Om(e){return 48<=e&&e<=55}function Pm(e){return 48<=e&&e<=57}function Im(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!Rm(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!Om(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!Pm(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function Nm(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function Dm(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Cm.isNegativeZero(e)}var $c=new bm("tag:yaml.org,2002:int",{kind:"scalar",resolve:Im,construct:Nm,predicate:Dm,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Fc=Ge,$m=Ne,Fm=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function xm(e){return!(e===null||!Fm.test(e)||e[e.length-1]==="_")}function Lm(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var Um=/^[-+]?[0-9]+e/;function km(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Fc.isNegativeZero(e))return"-0.0";return n=e.toString(10),Um.test(n)?n.replace("e",".e"):n}function Mm(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Fc.isNegativeZero(e))}var xc=new $m("tag:yaml.org,2002:float",{kind:"scalar",resolve:xm,construct:Lm,predicate:Mm,represent:km,defaultStyle:"lowercase"}),Lc=Ic.extend({implicit:[Nc,Dc,$c,xc]}),Uc=Lc,Bm=Ne,kc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Mc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Hm(e){return e===null?!1:kc.exec(e)!==null||Mc.exec(e)!==null}function jm(e){var t,n,r,i,o,a,s,l=0,p=null,c,f,d;if(t=kc.exec(e),t===null&&(t=Mc.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],f=+(t[11]||0),p=(c*60+f)*6e4,t[9]==="-"&&(p=-p)),d=new Date(Date.UTC(n,r,i,o,a,s,l)),p&&d.setTime(d.getTime()-p),d}function qm(e){return e.toISOString()}var Bc=new Bm("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Hm,construct:jm,instanceOf:Date,represent:qm}),Gm=Ne;function Vm(e){return e==="<<"||e===null}var Hc=new Gm("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Vm}),Wm=Ne,xo=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ym(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=xo;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Xm(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=xo,a=0,s=[];for(t=0;t<i;t++)t%4===0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):n===18?(s.push(a>>10&255),s.push(a>>2&255)):n===12&&s.push(a>>4&255),new Uint8Array(s)}function zm(e){var t="",n=0,r,i,o=e.length,a=xo;for(r=0;r<o;r++)r%3===0&&r&&(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=a[n>>18&63],t+=a[n>>12&63],t+=a[n>>6&63],t+=a[n&63]):i===2?(t+=a[n>>10&63],t+=a[n>>4&63],t+=a[n<<2&63],t+=a[64]):i===1&&(t+=a[n>>2&63],t+=a[n<<4&63],t+=a[64],t+=a[64]),t}function Km(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var jc=new Wm("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ym,construct:Xm,predicate:Km,represent:zm}),Jm=Ne,Qm=Object.prototype.hasOwnProperty,Zm=Object.prototype.toString;function eg(e){if(e===null)return!0;var t=[],n,r,i,o,a,s=e;for(n=0,r=s.length;n<r;n+=1){if(i=s[n],a=!1,Zm.call(i)!=="[object Object]")return!1;for(o in i)if(Qm.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function tg(e){return e!==null?e:[]}var qc=new Jm("tag:yaml.org,2002:omap",{kind:"sequence",resolve:eg,construct:tg}),ng=Ne,rg=Object.prototype.toString;function ig(e){if(e===null)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],rg.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function og(e){if(e===null)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var Gc=new ng("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ig,construct:og}),ag=Ne,sg=Object.prototype.hasOwnProperty;function lg(e){if(e===null)return!0;var t,n=e;for(t in n)if(sg.call(n,t)&&n[t]!==null)return!1;return!0}function cg(e){return e!==null?e:{}}var Vc=new ag("tag:yaml.org,2002:set",{kind:"mapping",resolve:lg,construct:cg}),Lo=Uc.extend({implicit:[Bc,Hc],explicit:[jc,qc,Gc,Vc]}),$t=Ge,Wc=Jn,ug=sm,fg=Lo,yt=Object.prototype.hasOwnProperty,Br=1,Yc=2,Xc=3,Hr=4,Fi=1,dg=2,za=3,hg=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,pg=/[\x85\u2028\u2029]/,mg=/[,\[\]\{\}]/,zc=/^(?:!|!!|![a-z\-]+!)$/i,Kc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ka(e){return Object.prototype.toString.call(e)}function Ke(e){return e===10||e===13}function Lt(e){return e===9||e===32}function Fe(e){return e===9||e===32||e===10||e===13}function zt(e){return e===44||e===91||e===93||e===123||e===125}function gg(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Eg(e){return e===120?2:e===117?4:e===85?8:0}function yg(e){return 48<=e&&e<=57?e-48:-1}function Ja(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function vg(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function Jc(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var Qc=new Array(256),Zc=new Array(256);for(var qt=0;qt<256;qt++)Qc[qt]=Ja(qt)?1:0,Zc[qt]=Ja(qt);function _g(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||fg,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function eu(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=ug(n),new Wc(t,n)}function U(e,t){throw eu(e,t)}function jr(e,t){e.onWarning&&e.onWarning.call(null,eu(e,t))}var Qa={YAML:function(t,n,r){var i,o,a;t.version!==null&&U(t,"duplication of %YAML directive"),r.length!==1&&U(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&U(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&U(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&jr(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&U(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],zc.test(i)||U(t,"ill-formed tag handle (first argument) of the TAG directive"),yt.call(t.tagMap,i)&&U(t,'there is a previously declared suffix for "'+i+'" tag handle'),Kc.test(o)||U(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{U(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function mt(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)a=s.charCodeAt(i),a===9||32<=a&&a<=1114111||U(e,"expected valid JSON character");else hg.test(s)&&U(e,"the stream contains non-printable characters");e.result+=s}}function Za(e,t,n,r){var i,o,a,s;for($t.isObject(n)||U(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,s=i.length;a<s;a+=1)o=i[a],yt.call(t,o)||(Jc(t,o,n[o]),r[o]=!0)}function Kt(e,t,n,r,i,o,a,s,l){var p,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),p=0,c=i.length;p<c;p+=1)Array.isArray(i[p])&&U(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Ka(i[p])==="[object Object]"&&(i[p]="[object Object]");if(typeof i=="object"&&Ka(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(p=0,c=o.length;p<c;p+=1)Za(e,t,o[p],n);else Za(e,t,o,n);else!e.json&&!yt.call(n,i)&&yt.call(t,i)&&(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,U(e,"duplicated mapping key")),Jc(t,i,o),delete n[i];return t}function Uo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):U(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ue(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Lt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ke(i))for(Uo(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&jr(e,"deficient indentation"),r}function Zr(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Fe(n)))}function ko(e,t){t===1?e.result+=" ":t>1&&(e.result+=$t.repeat(`
`,t-1))}function wg(e,t,n){var r,i,o,a,s,l,p,c,f=e.kind,d=e.result,g;if(g=e.input.charCodeAt(e.position),Fe(g)||zt(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),Fe(i)||n&&zt(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),Fe(i)||n&&zt(i))break}else if(g===35){if(r=e.input.charCodeAt(e.position-1),Fe(r))break}else{if(e.position===e.lineStart&&Zr(e)||n&&zt(g))break;if(Ke(g))if(l=e.line,p=e.lineStart,c=e.lineIndent,ue(e,!1,-1),e.lineIndent>=t){s=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=p,e.lineIndent=c;break}}s&&(mt(e,o,a,!1),ko(e,e.line-l),o=a=e.position,s=!1),Lt(g)||(a=e.position+1),g=e.input.charCodeAt(++e.position)}return mt(e,o,a,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function Tg(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(mt(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Ke(n)?(mt(e,r,i,!0),ko(e,ue(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Zr(e)?U(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);U(e,"unexpected end of the stream within a single quoted scalar")}function Sg(e,t){var n,r,i,o,a,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return mt(e,n,e.position,!0),e.position++,!0;if(s===92){if(mt(e,n,e.position,!0),s=e.input.charCodeAt(++e.position),Ke(s))ue(e,!1,t);else if(s<256&&Qc[s])e.result+=Zc[s],e.position++;else if((a=Eg(s))>0){for(i=a,o=0;i>0;i--)s=e.input.charCodeAt(++e.position),(a=gg(s))>=0?o=(o<<4)+a:U(e,"expected hexadecimal character");e.result+=vg(o),e.position++}else U(e,"unknown escape sequence");n=r=e.position}else Ke(s)?(mt(e,n,r,!0),ko(e,ue(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Zr(e)?U(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}U(e,"unexpected end of the stream within a double quoted scalar")}function Ag(e,t){var n=!0,r,i,o,a=e.tag,s,l=e.anchor,p,c,f,d,g,w=Object.create(null),y,T,A,S;if(S=e.input.charCodeAt(e.position),S===91)c=93,g=!1,s=[];else if(S===123)c=125,g=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),S=e.input.charCodeAt(++e.position);S!==0;){if(ue(e,!0,t),S=e.input.charCodeAt(e.position),S===c)return e.position++,e.tag=a,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=s,!0;n?S===44&&U(e,"expected the node content, but found ','"):U(e,"missed comma between flow collection entries"),T=y=A=null,f=d=!1,S===63&&(p=e.input.charCodeAt(e.position+1),Fe(p)&&(f=d=!0,e.position++,ue(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,an(e,t,Br,!1,!0),T=e.tag,y=e.result,ue(e,!0,t),S=e.input.charCodeAt(e.position),(d||e.line===r)&&S===58&&(f=!0,S=e.input.charCodeAt(++e.position),ue(e,!0,t),an(e,t,Br,!1,!0),A=e.result),g?Kt(e,s,w,T,y,A,r,i,o):f?s.push(Kt(e,null,w,T,y,A,r,i,o)):s.push(y),ue(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(n=!0,S=e.input.charCodeAt(++e.position)):n=!1}U(e,"unexpected end of the stream within a flow collection")}function Cg(e,t){var n,r,i=Fi,o=!1,a=!1,s=t,l=0,p=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Fi===i?i=f===43?za:dg:U(e,"repeat of a chomping mode identifier");else if((c=yg(f))>=0)c===0?U(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?U(e,"repeat of an indentation width identifier"):(s=t+c-1,a=!0);else break;if(Lt(f)){do f=e.input.charCodeAt(++e.position);while(Lt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ke(f)&&f!==0)}for(;f!==0;){for(Uo(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),Ke(f)){l++;continue}if(e.lineIndent<s){i===za?e.result+=$t.repeat(`
`,o?1+l:l):i===Fi&&o&&(e.result+=`
`);break}for(r?Lt(f)?(p=!0,e.result+=$t.repeat(`
`,o?1+l:l)):p?(p=!1,e.result+=$t.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=$t.repeat(`
`,l):e.result+=$t.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,n=e.position;!Ke(f)&&f!==0;)f=e.input.charCodeAt(++e.position);mt(e,n,e.position,!1)}return!0}function es(e,t){var n,r=e.tag,i=e.anchor,o=[],a,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),!(l!==45||(a=e.input.charCodeAt(e.position+1),!Fe(a))));){if(s=!0,e.position++,ue(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,an(e,t,Xc,!1,!0),o.push(e.result),ue(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)U(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function bg(e,t,n){var r,i,o,a,s,l,p=e.tag,c=e.anchor,f={},d=Object.create(null),g=null,w=null,y=null,T=!1,A=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),S=e.input.charCodeAt(e.position);S!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,U(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(S===63||S===58)&&Fe(r))S===63?(T&&(Kt(e,f,d,g,w,null,a,s,l),g=w=y=null),A=!0,T=!0,i=!0):T?(T=!1,i=!0):U(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=r;else{if(a=e.line,s=e.lineStart,l=e.position,!an(e,n,Yc,!1,!0))break;if(e.line===o){for(S=e.input.charCodeAt(e.position);Lt(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),Fe(S)||U(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(Kt(e,f,d,g,w,null,a,s,l),g=w=y=null),A=!0,T=!1,i=!1,g=e.tag,w=e.result;else if(A)U(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=c,!0}else if(A)U(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=c,!0}if((e.line===o||e.lineIndent>t)&&(T&&(a=e.line,s=e.lineStart,l=e.position),an(e,t,Hr,!0,i)&&(T?w=e.result:y=e.result),T||(Kt(e,f,d,g,w,y,a,s,l),g=w=y=null),ue(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&S!==0)U(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&Kt(e,f,d,g,w,null,a,s,l),A&&(e.tag=p,e.anchor=c,e.kind="mapping",e.result=f),A}function Rg(e){var t,n=!1,r=!1,i,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&U(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(n=!0,a=e.input.charCodeAt(++e.position)):a===33?(r=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):U(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Fe(a);)a===33&&(r?U(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),zc.test(i)||U(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),mg.test(o)&&U(e,"tag suffix cannot contain flow indicator characters")}o&&!Kc.test(o)&&U(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{U(e,"tag name is malformed: "+o)}return n?e.tag=o:yt.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:U(e,'undeclared tag handle "'+i+'"'),!0}function Og(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&U(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Fe(n)&&!zt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Pg(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Fe(r)&&!zt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&U(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),yt.call(e.anchorMap,n)||U(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],ue(e,!0,-1),!0}function an(e,t,n,r,i){var o,a,s,l=1,p=!1,c=!1,f,d,g,w,y,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=Hr===n||Xc===n,r&&ue(e,!0,-1)&&(p=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;Rg(e)||Og(e);)ue(e,!0,-1)?(p=!0,s=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=p||i),(l===1||Hr===n)&&(Br===n||Yc===n?y=t:y=t+1,T=e.position-e.lineStart,l===1?s&&(es(e,T)||bg(e,T,y))||Ag(e,y)?c=!0:(a&&Cg(e,y)||Tg(e,y)||Sg(e,y)?c=!0:Pg(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&U(e,"alias node should not have any properties")):wg(e,y,Br===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=s&&es(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&U(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(w=e.implicitTypes[f],w.resolve(e.result)){e.result=w.construct(e.result),e.tag=w.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(yt.call(e.typeMap[e.kind||"fallback"],e.tag))w=e.typeMap[e.kind||"fallback"][e.tag];else for(w=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,d=g.length;f<d;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){w=g[f];break}w||U(e,"unknown tag !<"+e.tag+">"),e.result!==null&&w.kind!==e.kind&&U(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+w.kind+'", not "'+e.kind+'"'),w.resolve(e.result,e.tag)?(e.result=w.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):U(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Ig(e){var t=e.position,n,r,i,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(ue(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),n=e.position;a!==0&&!Fe(a);)a=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&U(e,"directive name must not be less than one character in length");a!==0;){for(;Lt(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Ke(a));break}if(Ke(a))break;for(n=e.position;a!==0&&!Fe(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}a!==0&&Uo(e),yt.call(Qa,r)?Qa[r](e,r,i):jr(e,'unknown document directive "'+r+'"')}if(ue(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ue(e,!0,-1)):o&&U(e,"directives end mark is expected"),an(e,e.lineIndent-1,Hr,!1,!0),ue(e,!0,-1),e.checkLineBreaks&&pg.test(e.input.slice(t,e.position))&&jr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Zr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ue(e,!0,-1));return}if(e.position<e.length-1)U(e,"end of the stream or a document separator is expected");else return}function tu(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new _g(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,U(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Ig(n);return n.documents}function Ng(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=tu(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function Dg(e,t){var n=tu(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Wc("expected a single document in the stream, but found more")}}Fo.loadAll=Ng;Fo.load=Dg;var nu={},ei=Ge,Qn=Jn,$g=Lo,ru=Object.prototype.toString,iu=Object.prototype.hasOwnProperty,Mo=65279,Fg=9,Ln=10,xg=13,Lg=32,Ug=33,kg=34,lo=35,Mg=37,Bg=38,Hg=39,jg=42,ou=44,qg=45,qr=58,Gg=61,Vg=62,Wg=63,Yg=64,au=91,su=93,Xg=96,lu=123,zg=124,cu=125,Ce={};Ce[0]="\\0";Ce[7]="\\a";Ce[8]="\\b";Ce[9]="\\t";Ce[10]="\\n";Ce[11]="\\v";Ce[12]="\\f";Ce[13]="\\r";Ce[27]="\\e";Ce[34]='\\"';Ce[92]="\\\\";Ce[133]="\\N";Ce[160]="\\_";Ce[8232]="\\L";Ce[8233]="\\P";var Kg=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Jg=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Qg(e,t){var n,r,i,o,a,s,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)a=r[i],s=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&iu.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}function Zg(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Qn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+ei.repeat("0",r-t.length)+t}var e0=1,Un=2;function t0(e){this.schema=e.schema||$g,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=ei.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Qg(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Un:e0,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ts(e,t){for(var n=ei.repeat(" ",t),r=0,i=-1,o="",a,s=e.length;r<s;)i=e.indexOf(`
`,r),i===-1?(a=e.slice(r),r=s):(a=e.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}function co(e,t){return`
`+ei.repeat(" ",e.indent*t)}function n0(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function Gr(e){return e===Lg||e===Fg}function kn(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Mo||65536<=e&&e<=1114111}function ns(e){return kn(e)&&e!==Mo&&e!==xg&&e!==Ln}function rs(e,t,n){var r=ns(e),i=r&&!Gr(e);return(n?r:r&&e!==ou&&e!==au&&e!==su&&e!==lu&&e!==cu)&&e!==lo&&!(t===qr&&!i)||ns(t)&&!Gr(t)&&e===lo||t===qr&&i}function r0(e){return kn(e)&&e!==Mo&&!Gr(e)&&e!==qg&&e!==Wg&&e!==qr&&e!==ou&&e!==au&&e!==su&&e!==lu&&e!==cu&&e!==lo&&e!==Bg&&e!==jg&&e!==Ug&&e!==zg&&e!==Gg&&e!==Vg&&e!==Hg&&e!==kg&&e!==Mg&&e!==Yg&&e!==Xg}function i0(e){return!Gr(e)&&e!==qr}function An(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function uu(e){var t=/^\n* /;return t.test(e)}var fu=1,uo=2,du=3,hu=4,Xt=5;function o0(e,t,n,r,i,o,a,s){var l,p=0,c=null,f=!1,d=!1,g=r!==-1,w=-1,y=r0(An(e,0))&&i0(An(e,e.length-1));if(t||a)for(l=0;l<e.length;p>=65536?l+=2:l++){if(p=An(e,l),!kn(p))return Xt;y=y&&rs(p,c,s),c=p}else{for(l=0;l<e.length;p>=65536?l+=2:l++){if(p=An(e,l),p===Ln)f=!0,g&&(d=d||l-w-1>r&&e[w+1]!==" ",w=l);else if(!kn(p))return Xt;y=y&&rs(p,c,s),c=p}d=d||g&&l-w-1>r&&e[w+1]!==" "}return!f&&!d?y&&!a&&!i(e)?fu:o===Un?Xt:uo:n>9&&uu(e)?Xt:a?o===Un?Xt:uo:d?hu:du}function a0(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Un?'""':"''";if(!e.noCompatMode&&(Kg.indexOf(t)!==-1||Jg.test(t)))return e.quotingType===Un?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;function l(p){return n0(e,p)}switch(o0(t,s,e.indent,a,l,e.quotingType,e.forceQuotes&&!r,i)){case fu:return t;case uo:return"'"+t.replace(/'/g,"''")+"'";case du:return"|"+is(t,e.indent)+os(ts(t,o));case hu:return">"+is(t,e.indent)+os(ts(s0(t,a),o));case Xt:return'"'+l0(t)+'"';default:throw new Qn("impossible error: invalid scalar style")}}()}function is(e,t){var n=uu(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function os(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function s0(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,n.lastIndex=p,as(e.slice(0,p),t)}(),i=e[0]===`
`||e[0]===" ",o,a;a=n.exec(e);){var s=a[1],l=a[2];o=l[0]===" ",r+=s+(!i&&!o&&l!==""?`
`:"")+as(l,t),i=o}return r}function as(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,a=0,s=0,l="";r=n.exec(e);)s=r.index,s-i>t&&(o=a>i?a:s,l+=`
`+e.slice(i,o),i=o+1),a=s;return l+=`
`,e.length-i>t&&a>i?l+=e.slice(i,a)+`
`+e.slice(a+1):l+=e.slice(i),l.slice(1)}function l0(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=An(e,i),r=Ce[n],!r&&kn(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Zg(n);return t}function c0(e,t,n){var r="",i=e.tag,o,a,s;for(o=0,a=n.length;o<a;o+=1)s=n[o],e.replacer&&(s=e.replacer.call(n,String(o),s)),(nt(e,t,s,!1,!1)||typeof s>"u"&&nt(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function ss(e,t,n,r){var i="",o=e.tag,a,s,l;for(a=0,s=n.length;a<s;a+=1)l=n[a],e.replacer&&(l=e.replacer.call(n,String(a),l)),(nt(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&nt(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=co(e,t)),e.dump&&Ln===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function u0(e,t,n){var r="",i=e.tag,o=Object.keys(n),a,s,l,p,c;for(a=0,s=o.length;a<s;a+=1)c="",r!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=o[a],p=n[l],e.replacer&&(p=e.replacer.call(n,l,p)),nt(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),nt(e,t,p,!1,!1)&&(c+=e.dump,r+=c));e.tag=i,e.dump="{"+r+"}"}function f0(e,t,n,r){var i="",o=e.tag,a=Object.keys(n),s,l,p,c,f,d;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Qn("sortKeys must be a boolean or a function");for(s=0,l=a.length;s<l;s+=1)d="",(!r||i!=="")&&(d+=co(e,t)),p=a[s],c=n[p],e.replacer&&(c=e.replacer.call(n,p,c)),nt(e,t+1,p,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Ln===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=co(e,t)),nt(e,t+1,c,!0,f)&&(e.dump&&Ln===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=o,e.dump=i||"{}"}function ls(e,t,n){var r,i,o,a,s,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,a=i.length;o<a;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,ru.call(s.represent)==="[object Function]")r=s.represent(t,l);else if(iu.call(s.represent,l))r=s.represent[l](t,l);else throw new Qn("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function nt(e,t,n,r,i,o,a){e.tag=null,e.dump=n,ls(e,n,!1)||ls(e,n,!0);var s=ru.call(e.dump),l=r,p;r&&(r=e.flowLevel<0||e.flowLevel>t);var c=s==="[object Object]"||s==="[object Array]",f,d;if(c&&(f=e.duplicates.indexOf(n),d=f!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),s==="[object Object]")r&&Object.keys(e.dump).length!==0?(f0(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(u0(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?ss(e,t-1,e.dump,i):ss(e,t,e.dump,i),d&&(e.dump="&ref_"+f+e.dump)):(c0(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&a0(e,e.dump,t,o,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Qn("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function d0(e,t){var n=[],r=[],i,o;for(fo(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function fo(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)fo(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)fo(e[r[i]],t,n)}function h0(e,t){t=t||{};var n=new t0(t);n.noRefs||d0(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),nt(n,0,r,!0,!0)?n.dump+`
`:""}nu.dump=h0;var pu=Fo,p0=nu;function Bo(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}we.Type=Ne;we.Schema=bc;we.FAILSAFE_SCHEMA=Ic;we.JSON_SCHEMA=Lc;we.CORE_SCHEMA=Uc;we.DEFAULT_SCHEMA=Lo;we.load=pu.load;we.loadAll=pu.loadAll;we.dump=p0.dump;we.YAMLException=Jn;we.types={binary:jc,float:xc,map:Pc,null:Nc,pairs:Gc,set:Vc,timestamp:Bc,bool:Dc,int:$c,merge:Hc,omap:qc,seq:Oc,str:Rc};we.safeLoad=Bo("safeLoad","load");we.safeLoadAll=Bo("safeLoadAll","loadAll");we.safeDump=Bo("safeDump","dump");var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.Lazy=void 0;class m0{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}ti.Lazy=m0;var ho={exports:{}};const g0="2.0.0",mu=256,E0=Number.MAX_SAFE_INTEGER||9007199254740991,y0=16,v0=mu-6,_0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ni={MAX_LENGTH:mu,MAX_SAFE_COMPONENT_LENGTH:y0,MAX_SAFE_BUILD_LENGTH:v0,MAX_SAFE_INTEGER:E0,RELEASE_TYPES:_0,SEMVER_SPEC_VERSION:g0,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const w0=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var ri=w0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=ni,o=ri;t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],p=t.safeSrc=[],c=t.t={};let f=0;const d="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[d,r]],w=T=>{for(const[A,S]of g)T=T.split(`${A}*`).join(`${A}{0,${S}}`).split(`${A}+`).join(`${A}{1,${S}}`);return T},y=(T,A,S)=>{const F=w(A),L=f++;o(T,L,A),c[T]=L,l[L]=A,p[L]=F,a[L]=new RegExp(A,S?"g":void 0),s[L]=new RegExp(F,S?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),y("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${d}+`),y("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),y("FULL",`^${l[c.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),y("LOOSE",`^${l[c.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),y("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[c.COERCE],!0),y("COERCERTLFULL",l[c.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ho,ho.exports);var Zn=ho.exports;const T0=Object.freeze({loose:!0}),S0=Object.freeze({}),A0=e=>e?typeof e!="object"?T0:e:S0;var Ho=A0;const cs=/^[0-9]+$/,gu=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const n=cs.test(e),r=cs.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},C0=(e,t)=>gu(t,e);var Eu={compareIdentifiers:gu,rcompareIdentifiers:C0};const _r=ri,{MAX_LENGTH:us,MAX_SAFE_INTEGER:wr}=ni,{safeRe:Tr,t:Sr}=Zn,b0=Ho,{compareIdentifiers:xi}=Eu;let R0=class ze{constructor(t,n){if(n=b0(n),t instanceof ze){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>us)throw new TypeError(`version is longer than ${us} characters`);_r("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Tr[Sr.LOOSE]:Tr[Sr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>wr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<wr)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(_r("SemVer.compare",this.version,this.options,t),!(t instanceof ze)){if(typeof t=="string"&&t===this.version)return 0;t=new ze(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ze||(t=new ze(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof ze||(t=new ze(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(_r("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xi(r,i)}while(++n)}compareBuild(t){t instanceof ze||(t=new ze(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(_r("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xi(r,i)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const i=`-${n}`.match(this.options.loose?Tr[Sr.PRERELEASELOOSE]:Tr[Sr.PRERELEASE]);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),xi(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var De=R0;const fs=De,O0=(e,t,n=!1)=>{if(e instanceof fs)return e;try{return new fs(e,t)}catch(r){if(!n)return null;throw r}};var fn=O0;const P0=fn,I0=(e,t)=>{const n=P0(e,t);return n?n.version:null};var N0=I0;const D0=fn,$0=(e,t)=>{const n=D0(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var F0=$0;const ds=De,x0=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new ds(e instanceof ds?e.version:e,n).inc(t,r,i).version}catch{return null}};var L0=x0;const hs=fn,U0=(e,t)=>{const n=hs(e,null,!0),r=hs(t,null,!0),i=n.compare(r);if(i===0)return null;const o=i>0,a=o?n:r,s=o?r:n,l=!!a.prerelease.length;if(!!s.prerelease.length&&!l){if(!s.patch&&!s.minor)return"major";if(s.compareMain(a)===0)return s.minor&&!s.patch?"minor":"patch"}const c=l?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var k0=U0;const M0=De,B0=(e,t)=>new M0(e,t).major;var H0=B0;const j0=De,q0=(e,t)=>new j0(e,t).minor;var G0=q0;const V0=De,W0=(e,t)=>new V0(e,t).patch;var Y0=W0;const X0=fn,z0=(e,t)=>{const n=X0(e,t);return n&&n.prerelease.length?n.prerelease:null};var K0=z0;const ps=De,J0=(e,t,n)=>new ps(e,n).compare(new ps(t,n));var Ve=J0;const Q0=Ve,Z0=(e,t,n)=>Q0(t,e,n);var eE=Z0;const tE=Ve,nE=(e,t)=>tE(e,t,!0);var rE=nE;const ms=De,iE=(e,t,n)=>{const r=new ms(e,n),i=new ms(t,n);return r.compare(i)||r.compareBuild(i)};var jo=iE;const oE=jo,aE=(e,t)=>e.sort((n,r)=>oE(n,r,t));var sE=aE;const lE=jo,cE=(e,t)=>e.sort((n,r)=>lE(r,n,t));var uE=cE;const fE=Ve,dE=(e,t,n)=>fE(e,t,n)>0;var ii=dE;const hE=Ve,pE=(e,t,n)=>hE(e,t,n)<0;var qo=pE;const mE=Ve,gE=(e,t,n)=>mE(e,t,n)===0;var yu=gE;const EE=Ve,yE=(e,t,n)=>EE(e,t,n)!==0;var vu=yE;const vE=Ve,_E=(e,t,n)=>vE(e,t,n)>=0;var Go=_E;const wE=Ve,TE=(e,t,n)=>wE(e,t,n)<=0;var Vo=TE;const SE=yu,AE=vu,CE=ii,bE=Go,RE=qo,OE=Vo,PE=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return SE(e,n,r);case"!=":return AE(e,n,r);case">":return CE(e,n,r);case">=":return bE(e,n,r);case"<":return RE(e,n,r);case"<=":return OE(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var _u=PE;const IE=De,NE=fn,{safeRe:Ar,t:Cr}=Zn,DE=(e,t)=>{if(e instanceof IE)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?Ar[Cr.COERCEFULL]:Ar[Cr.COERCE]);else{const l=t.includePrerelease?Ar[Cr.COERCERTLFULL]:Ar[Cr.COERCERTL];let p;for(;(p=l.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||p.index+p[0].length!==n.index+n[0].length)&&(n=p),l.lastIndex=p.index+p[1].length+p[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",o=n[4]||"0",a=t.includePrerelease&&n[5]?`-${n[5]}`:"",s=t.includePrerelease&&n[6]?`+${n[6]}`:"";return NE(`${r}.${i}.${o}${a}${s}`,t)};var $E=DE;class FE{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var xE=FE,Li,gs;function We(){if(gs)return Li;gs=1;const e=/\s+/g;class t{constructor(R,N){if(N=i(N),R instanceof t)return R.loose===!!N.loose&&R.includePrerelease===!!N.includePrerelease?R:new t(R.raw,N);if(R instanceof o)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(b=>this.parseRange(b.trim())).filter(b=>b.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const b=this.set[0];if(this.set=this.set.filter($=>!y($[0])),this.set.length===0)this.set=[b];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&T($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const N=this.set[R];for(let b=0;b<N.length;b++)b>0&&(this.formatted+=" "),this.formatted+=N[b].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const b=((this.options.includePrerelease&&g)|(this.options.loose&&w))+":"+R,$=r.get(b);if($)return $;const I=this.options.loose,B=I?l[p.HYPHENRANGELOOSE]:l[p.HYPHENRANGE];R=R.replace(B,H(this.options.includePrerelease)),a("hyphen replace",R),R=R.replace(l[p.COMPARATORTRIM],c),a("comparator trim",R),R=R.replace(l[p.TILDETRIM],f),a("tilde trim",R),R=R.replace(l[p.CARETTRIM],d),a("caret trim",R);let W=R.split(" ").map(M=>S(M,this.options)).join(" ").split(/\s+/).map(M=>j(M,this.options));I&&(W=W.filter(M=>(a("loose invalid filter",M,this.options),!!M.match(l[p.COMPARATORLOOSE])))),a("range list",W);const q=new Map,J=W.map(M=>new o(M,this.options));for(const M of J){if(y(M))return[M];q.set(M.value,M)}q.size>1&&q.has("")&&q.delete("");const he=[...q.values()];return r.set(b,he),he}intersects(R,N){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(b=>A(b,N)&&R.set.some($=>A($,N)&&b.every(I=>$.every(B=>I.intersects(B,N)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(K(this.set[N],R,this.options))return!0;return!1}}Li=t;const n=xE,r=new n,i=Ho,o=oi(),a=ri,s=De,{safeRe:l,t:p,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=Zn,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:w}=ni,y=P=>P.value==="<0.0.0-0",T=P=>P.value==="",A=(P,R)=>{let N=!0;const b=P.slice();let $=b.pop();for(;N&&b.length;)N=b.every(I=>$.intersects(I,R)),$=b.pop();return N},S=(P,R)=>(P=P.replace(l[p.BUILD],""),a("comp",P,R),P=ce(P,R),a("caret",P),P=L(P,R),a("tildes",P),P=xe(P,R),a("xrange",P),P=V(P,R),a("stars",P),P),F=P=>!P||P.toLowerCase()==="x"||P==="*",L=(P,R)=>P.trim().split(/\s+/).map(N=>re(N,R)).join(" "),re=(P,R)=>{const N=R.loose?l[p.TILDELOOSE]:l[p.TILDE];return P.replace(N,(b,$,I,B,W)=>{a("tilde",P,b,$,I,B,W);let q;return F($)?q="":F(I)?q=`>=${$}.0.0 <${+$+1}.0.0-0`:F(B)?q=`>=${$}.${I}.0 <${$}.${+I+1}.0-0`:W?(a("replaceTilde pr",W),q=`>=${$}.${I}.${B}-${W} <${$}.${+I+1}.0-0`):q=`>=${$}.${I}.${B} <${$}.${+I+1}.0-0`,a("tilde return",q),q})},ce=(P,R)=>P.trim().split(/\s+/).map(N=>X(N,R)).join(" "),X=(P,R)=>{a("caret",P,R);const N=R.loose?l[p.CARETLOOSE]:l[p.CARET],b=R.includePrerelease?"-0":"";return P.replace(N,($,I,B,W,q)=>{a("caret",P,$,I,B,W,q);let J;return F(I)?J="":F(B)?J=`>=${I}.0.0${b} <${+I+1}.0.0-0`:F(W)?I==="0"?J=`>=${I}.${B}.0${b} <${I}.${+B+1}.0-0`:J=`>=${I}.${B}.0${b} <${+I+1}.0.0-0`:q?(a("replaceCaret pr",q),I==="0"?B==="0"?J=`>=${I}.${B}.${W}-${q} <${I}.${B}.${+W+1}-0`:J=`>=${I}.${B}.${W}-${q} <${I}.${+B+1}.0-0`:J=`>=${I}.${B}.${W}-${q} <${+I+1}.0.0-0`):(a("no pr"),I==="0"?B==="0"?J=`>=${I}.${B}.${W}${b} <${I}.${B}.${+W+1}-0`:J=`>=${I}.${B}.${W}${b} <${I}.${+B+1}.0-0`:J=`>=${I}.${B}.${W} <${+I+1}.0.0-0`),a("caret return",J),J})},xe=(P,R)=>(a("replaceXRanges",P,R),P.split(/\s+/).map(N=>E(N,R)).join(" ")),E=(P,R)=>{P=P.trim();const N=R.loose?l[p.XRANGELOOSE]:l[p.XRANGE];return P.replace(N,(b,$,I,B,W,q)=>{a("xRange",P,b,$,I,B,W,q);const J=F(I),he=J||F(B),M=he||F(W),Ye=M;return $==="="&&Ye&&($=""),q=R.includePrerelease?"-0":"",J?$===">"||$==="<"?b="<0.0.0-0":b="*":$&&Ye?(he&&(B=0),W=0,$===">"?($=">=",he?(I=+I+1,B=0,W=0):(B=+B+1,W=0)):$==="<="&&($="<",he?I=+I+1:B=+B+1),$==="<"&&(q="-0"),b=`${$+I}.${B}.${W}${q}`):he?b=`>=${I}.0.0${q} <${+I+1}.0.0-0`:M&&(b=`>=${I}.${B}.0${q} <${I}.${+B+1}.0-0`),a("xRange return",b),b})},V=(P,R)=>(a("replaceStars",P,R),P.trim().replace(l[p.STAR],"")),j=(P,R)=>(a("replaceGTE0",P,R),P.trim().replace(l[R.includePrerelease?p.GTE0PRE:p.GTE0],"")),H=P=>(R,N,b,$,I,B,W,q,J,he,M,Ye)=>(F(b)?N="":F($)?N=`>=${b}.0.0${P?"-0":""}`:F(I)?N=`>=${b}.${$}.0${P?"-0":""}`:B?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,F(J)?q="":F(he)?q=`<${+J+1}.0.0-0`:F(M)?q=`<${J}.${+he+1}.0-0`:Ye?q=`<=${J}.${he}.${M}-${Ye}`:P?q=`<${J}.${he}.${+M+1}-0`:q=`<=${q}`,`${N} ${q}`.trim()),K=(P,R,N)=>{for(let b=0;b<P.length;b++)if(!P[b].test(R))return!1;if(R.prerelease.length&&!N.includePrerelease){for(let b=0;b<P.length;b++)if(a(P[b].semver),P[b].semver!==o.ANY&&P[b].semver.prerelease.length>0){const $=P[b].semver;if($.major===R.major&&$.minor===R.minor&&$.patch===R.patch)return!0}return!1}return!0};return Li}var Ui,Es;function oi(){if(Es)return Ui;Es=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Ui=t;const n=Ho,{safeRe:r,t:i}=Zn,o=_u,a=ri,s=De,l=We();return Ui}const LE=We(),UE=(e,t,n)=>{try{t=new LE(t,n)}catch{return!1}return t.test(e)};var ai=UE;const kE=We(),ME=(e,t)=>new kE(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var BE=ME;const HE=De,jE=We(),qE=(e,t,n)=>{let r=null,i=null,o=null;try{o=new jE(t,n)}catch{return null}return e.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new HE(r,n))}),r};var GE=qE;const VE=De,WE=We(),YE=(e,t,n)=>{let r=null,i=null,o=null;try{o=new WE(t,n)}catch{return null}return e.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new VE(r,n))}),r};var XE=YE;const ki=De,zE=We(),ys=ii,KE=(e,t)=>{e=new zE(e,t);let n=new ki("0.0.0");if(e.test(n)||(n=new ki("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let o=null;i.forEach(a=>{const s=new ki(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!o||ys(s,o))&&(o=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||ys(n,o))&&(n=o)}return n&&e.test(n)?n:null};var JE=KE;const QE=We(),ZE=(e,t)=>{try{return new QE(e,t).range||"*"}catch{return null}};var ey=ZE;const ty=De,wu=oi(),{ANY:ny}=wu,ry=We(),iy=ai,vs=ii,_s=qo,oy=Vo,ay=Go,sy=(e,t,n,r)=>{e=new ty(e,r),t=new ry(t,r);let i,o,a,s,l;switch(n){case">":i=vs,o=oy,a=_s,s=">",l=">=";break;case"<":i=_s,o=ay,a=vs,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(iy(e,t,r))return!1;for(let p=0;p<t.set.length;++p){const c=t.set[p];let f=null,d=null;if(c.forEach(g=>{g.semver===ny&&(g=new wu(">=0.0.0")),f=f||g,d=d||g,i(g.semver,f.semver,r)?f=g:a(g.semver,d.semver,r)&&(d=g)}),f.operator===s||f.operator===l||(!d.operator||d.operator===s)&&o(e,d.semver))return!1;if(d.operator===l&&a(e,d.semver))return!1}return!0};var Wo=sy;const ly=Wo,cy=(e,t,n)=>ly(e,t,">",n);var uy=cy;const fy=Wo,dy=(e,t,n)=>fy(e,t,"<",n);var hy=dy;const ws=We(),py=(e,t,n)=>(e=new ws(e,n),t=new ws(t,n),e.intersects(t,n));var my=py;const gy=ai,Ey=Ve;var yy=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort((c,f)=>Ey(c,f,n));for(const c of a)gy(c,t,n)?(o=c,i||(i=c)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);const s=[];for(const[c,f]of r)c===f?s.push(c):!f&&c===a[0]?s.push("*"):f?c===a[0]?s.push(`<=${f}`):s.push(`${c} - ${f}`):s.push(`>=${c}`);const l=s.join(" || "),p=typeof t.raw=="string"?t.raw:String(t);return l.length<p.length?l:t};const Ts=We(),Yo=oi(),{ANY:Mi}=Yo,_n=ai,Xo=Ve,vy=(e,t,n={})=>{if(e===t)return!0;e=new Ts(e,n),t=new Ts(t,n);let r=!1;e:for(const i of e.set){for(const o of t.set){const a=wy(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},_y=[new Yo(">=0.0.0-0")],Ss=[new Yo(">=0.0.0")],wy=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Mi){if(t.length===1&&t[0].semver===Mi)return!0;n.includePrerelease?e=_y:e=Ss}if(t.length===1&&t[0].semver===Mi){if(n.includePrerelease)return!0;t=Ss}const r=new Set;let i,o;for(const g of e)g.operator===">"||g.operator===">="?i=As(i,g,n):g.operator==="<"||g.operator==="<="?o=Cs(o,g,n):r.add(g.semver);if(r.size>1)return null;let a;if(i&&o){if(a=Xo(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const g of r){if(i&&!_n(g,String(i),n)||o&&!_n(g,String(o),n))return null;for(const w of t)if(!_n(g,String(w),n))return!1;return!0}let s,l,p,c,f=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const g of t){if(c=c||g.operator===">"||g.operator===">=",p=p||g.operator==="<"||g.operator==="<=",i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator===">"||g.operator===">="){if(s=As(i,g,n),s===g&&s!==i)return!1}else if(i.operator===">="&&!_n(i.semver,String(g),n))return!1}if(o){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator==="<"||g.operator==="<="){if(l=Cs(o,g,n),l===g&&l!==o)return!1}else if(o.operator==="<="&&!_n(o.semver,String(g),n))return!1}if(!g.operator&&(o||i)&&a!==0)return!1}return!(i&&p&&!o&&a!==0||o&&c&&!i&&a!==0||d||f)},As=(e,t,n)=>{if(!e)return t;const r=Xo(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},Cs=(e,t,n)=>{if(!e)return t;const r=Xo(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var Ty=vy;const Bi=Zn,bs=ni,Sy=De,Rs=Eu,Ay=fn,Cy=N0,by=F0,Ry=L0,Oy=k0,Py=H0,Iy=G0,Ny=Y0,Dy=K0,$y=Ve,Fy=eE,xy=rE,Ly=jo,Uy=sE,ky=uE,My=ii,By=qo,Hy=yu,jy=vu,qy=Go,Gy=Vo,Vy=_u,Wy=$E,Yy=oi(),Xy=We(),zy=ai,Ky=BE,Jy=GE,Qy=XE,Zy=JE,ev=ey,tv=Wo,nv=uy,rv=hy,iv=my,ov=yy,av=Ty;var Tu={parse:Ay,valid:Cy,clean:by,inc:Ry,diff:Oy,major:Py,minor:Iy,patch:Ny,prerelease:Dy,compare:$y,rcompare:Fy,compareLoose:xy,compareBuild:Ly,sort:Uy,rsort:ky,gt:My,lt:By,eq:Hy,neq:jy,gte:qy,lte:Gy,cmp:Vy,coerce:Wy,Comparator:Yy,Range:Xy,satisfies:zy,toComparators:Ky,maxSatisfying:Jy,minSatisfying:Qy,minVersion:Zy,validRange:ev,outside:tv,gtr:nv,ltr:rv,intersects:iv,simplifyRange:ov,subset:av,SemVer:Sy,re:Bi.re,src:Bi.src,tokens:Bi.t,SEMVER_SPEC_VERSION:bs.SEMVER_SPEC_VERSION,RELEASE_TYPES:bs.RELEASE_TYPES,compareIdentifiers:Rs.compareIdentifiers,rcompareIdentifiers:Rs.rcompareIdentifiers},er={},Vr={exports:{}};Vr.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",l="[object Array]",p="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",g="[object Function]",w="[object GeneratorFunction]",y="[object Map]",T="[object Number]",A="[object Null]",S="[object Object]",F="[object Promise]",L="[object Proxy]",re="[object RegExp]",ce="[object Set]",X="[object String]",xe="[object Symbol]",E="[object Undefined]",V="[object WeakMap]",j="[object ArrayBuffer]",H="[object DataView]",K="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",N="[object Int16Array]",b="[object Int32Array]",$="[object Uint8Array]",I="[object Uint8ClampedArray]",B="[object Uint16Array]",W="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,J=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,M={};M[K]=M[P]=M[R]=M[N]=M[b]=M[$]=M[I]=M[B]=M[W]=!0,M[s]=M[l]=M[j]=M[c]=M[H]=M[f]=M[d]=M[g]=M[y]=M[T]=M[S]=M[re]=M[ce]=M[X]=M[V]=!1;var Ye=typeof ve=="object"&&ve&&ve.Object===Object&&ve,h=typeof self=="object"&&self&&self.Object===Object&&self,u=Ye||h||Function("return this")(),C=t&&!t.nodeType&&t,_=C&&!0&&e&&!e.nodeType&&e,z=_&&_.exports===C,te=z&&Ye.process,se=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),Ee=se&&se.isTypedArray;function Te(m,v){for(var O=-1,x=m==null?0:m.length,ne=0,G=[];++O<x;){var le=m[O];v(le,O,m)&&(G[ne++]=le)}return G}function ot(m,v){for(var O=-1,x=v.length,ne=m.length;++O<x;)m[ne+O]=v[O];return m}function fe(m,v){for(var O=-1,x=m==null?0:m.length;++O<x;)if(v(m[O],O,m))return!0;return!1}function Be(m,v){for(var O=-1,x=Array(m);++O<m;)x[O]=v(O);return x}function mi(m){return function(v){return m(v)}}function ir(m,v){return m.has(v)}function hn(m,v){return m==null?void 0:m[v]}function or(m){var v=-1,O=Array(m.size);return m.forEach(function(x,ne){O[++v]=[ne,x]}),O}function Uu(m,v){return function(O){return m(v(O))}}function ku(m){var v=-1,O=Array(m.size);return m.forEach(function(x){O[++v]=x}),O}var Mu=Array.prototype,Bu=Function.prototype,ar=Object.prototype,gi=u["__core-js_shared__"],Qo=Bu.toString,Xe=ar.hasOwnProperty,Zo=function(){var m=/[^.]+$/.exec(gi&&gi.keys&&gi.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),ea=ar.toString,Hu=RegExp("^"+Qo.call(Xe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=z?u.Buffer:void 0,sr=u.Symbol,na=u.Uint8Array,ra=ar.propertyIsEnumerable,ju=Mu.splice,At=sr?sr.toStringTag:void 0,ia=Object.getOwnPropertySymbols,qu=ta?ta.isBuffer:void 0,Gu=Uu(Object.keys,Object),Ei=Ht(u,"DataView"),pn=Ht(u,"Map"),yi=Ht(u,"Promise"),vi=Ht(u,"Set"),_i=Ht(u,"WeakMap"),mn=Ht(Object,"create"),Vu=Rt(Ei),Wu=Rt(pn),Yu=Rt(yi),Xu=Rt(vi),zu=Rt(_i),oa=sr?sr.prototype:void 0,wi=oa?oa.valueOf:void 0;function Ct(m){var v=-1,O=m==null?0:m.length;for(this.clear();++v<O;){var x=m[v];this.set(x[0],x[1])}}function Ku(){this.__data__=mn?mn(null):{},this.size=0}function Ju(m){var v=this.has(m)&&delete this.__data__[m];return this.size-=v?1:0,v}function Qu(m){var v=this.__data__;if(mn){var O=v[m];return O===r?void 0:O}return Xe.call(v,m)?v[m]:void 0}function Zu(m){var v=this.__data__;return mn?v[m]!==void 0:Xe.call(v,m)}function ef(m,v){var O=this.__data__;return this.size+=this.has(m)?0:1,O[m]=mn&&v===void 0?r:v,this}Ct.prototype.clear=Ku,Ct.prototype.delete=Ju,Ct.prototype.get=Qu,Ct.prototype.has=Zu,Ct.prototype.set=ef;function Qe(m){var v=-1,O=m==null?0:m.length;for(this.clear();++v<O;){var x=m[v];this.set(x[0],x[1])}}function tf(){this.__data__=[],this.size=0}function nf(m){var v=this.__data__,O=cr(v,m);if(O<0)return!1;var x=v.length-1;return O==x?v.pop():ju.call(v,O,1),--this.size,!0}function rf(m){var v=this.__data__,O=cr(v,m);return O<0?void 0:v[O][1]}function of(m){return cr(this.__data__,m)>-1}function af(m,v){var O=this.__data__,x=cr(O,m);return x<0?(++this.size,O.push([m,v])):O[x][1]=v,this}Qe.prototype.clear=tf,Qe.prototype.delete=nf,Qe.prototype.get=rf,Qe.prototype.has=of,Qe.prototype.set=af;function bt(m){var v=-1,O=m==null?0:m.length;for(this.clear();++v<O;){var x=m[v];this.set(x[0],x[1])}}function sf(){this.size=0,this.__data__={hash:new Ct,map:new(pn||Qe),string:new Ct}}function lf(m){var v=ur(this,m).delete(m);return this.size-=v?1:0,v}function cf(m){return ur(this,m).get(m)}function uf(m){return ur(this,m).has(m)}function ff(m,v){var O=ur(this,m),x=O.size;return O.set(m,v),this.size+=O.size==x?0:1,this}bt.prototype.clear=sf,bt.prototype.delete=lf,bt.prototype.get=cf,bt.prototype.has=uf,bt.prototype.set=ff;function lr(m){var v=-1,O=m==null?0:m.length;for(this.__data__=new bt;++v<O;)this.add(m[v])}function df(m){return this.__data__.set(m,r),this}function hf(m){return this.__data__.has(m)}lr.prototype.add=lr.prototype.push=df,lr.prototype.has=hf;function at(m){var v=this.__data__=new Qe(m);this.size=v.size}function pf(){this.__data__=new Qe,this.size=0}function mf(m){var v=this.__data__,O=v.delete(m);return this.size=v.size,O}function gf(m){return this.__data__.get(m)}function Ef(m){return this.__data__.has(m)}function yf(m,v){var O=this.__data__;if(O instanceof Qe){var x=O.__data__;if(!pn||x.length<n-1)return x.push([m,v]),this.size=++O.size,this;O=this.__data__=new bt(x)}return O.set(m,v),this.size=O.size,this}at.prototype.clear=pf,at.prototype.delete=mf,at.prototype.get=gf,at.prototype.has=Ef,at.prototype.set=yf;function vf(m,v){var O=fr(m),x=!O&&Ff(m),ne=!O&&!x&&Ti(m),G=!O&&!x&&!ne&&pa(m),le=O||x||ne||G,pe=le?Be(m.length,String):[],ye=pe.length;for(var oe in m)Xe.call(m,oe)&&!(le&&(oe=="length"||ne&&(oe=="offset"||oe=="parent")||G&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||Pf(oe,ye)))&&pe.push(oe);return pe}function cr(m,v){for(var O=m.length;O--;)if(ua(m[O][0],v))return O;return-1}function _f(m,v,O){var x=v(m);return fr(m)?x:ot(x,O(m))}function gn(m){return m==null?m===void 0?E:A:At&&At in Object(m)?Rf(m):$f(m)}function aa(m){return En(m)&&gn(m)==s}function sa(m,v,O,x,ne){return m===v?!0:m==null||v==null||!En(m)&&!En(v)?m!==m&&v!==v:wf(m,v,O,x,sa,ne)}function wf(m,v,O,x,ne,G){var le=fr(m),pe=fr(v),ye=le?l:st(m),oe=pe?l:st(v);ye=ye==s?S:ye,oe=oe==s?S:oe;var Le=ye==S,He=oe==S,Se=ye==oe;if(Se&&Ti(m)){if(!Ti(v))return!1;le=!0,Le=!1}if(Se&&!Le)return G||(G=new at),le||pa(m)?la(m,v,O,x,ne,G):Cf(m,v,ye,O,x,ne,G);if(!(O&i)){var Ue=Le&&Xe.call(m,"__wrapped__"),ke=He&&Xe.call(v,"__wrapped__");if(Ue||ke){var lt=Ue?m.value():m,Ze=ke?v.value():v;return G||(G=new at),ne(lt,Ze,O,x,G)}}return Se?(G||(G=new at),bf(m,v,O,x,ne,G)):!1}function Tf(m){if(!ha(m)||Nf(m))return!1;var v=fa(m)?Hu:J;return v.test(Rt(m))}function Sf(m){return En(m)&&da(m.length)&&!!M[gn(m)]}function Af(m){if(!Df(m))return Gu(m);var v=[];for(var O in Object(m))Xe.call(m,O)&&O!="constructor"&&v.push(O);return v}function la(m,v,O,x,ne,G){var le=O&i,pe=m.length,ye=v.length;if(pe!=ye&&!(le&&ye>pe))return!1;var oe=G.get(m);if(oe&&G.get(v))return oe==v;var Le=-1,He=!0,Se=O&o?new lr:void 0;for(G.set(m,v),G.set(v,m);++Le<pe;){var Ue=m[Le],ke=v[Le];if(x)var lt=le?x(ke,Ue,Le,v,m,G):x(Ue,ke,Le,m,v,G);if(lt!==void 0){if(lt)continue;He=!1;break}if(Se){if(!fe(v,function(Ze,Ot){if(!ir(Se,Ot)&&(Ue===Ze||ne(Ue,Ze,O,x,G)))return Se.push(Ot)})){He=!1;break}}else if(!(Ue===ke||ne(Ue,ke,O,x,G))){He=!1;break}}return G.delete(m),G.delete(v),He}function Cf(m,v,O,x,ne,G,le){switch(O){case H:if(m.byteLength!=v.byteLength||m.byteOffset!=v.byteOffset)return!1;m=m.buffer,v=v.buffer;case j:return!(m.byteLength!=v.byteLength||!G(new na(m),new na(v)));case c:case f:case T:return ua(+m,+v);case d:return m.name==v.name&&m.message==v.message;case re:case X:return m==v+"";case y:var pe=or;case ce:var ye=x&i;if(pe||(pe=ku),m.size!=v.size&&!ye)return!1;var oe=le.get(m);if(oe)return oe==v;x|=o,le.set(m,v);var Le=la(pe(m),pe(v),x,ne,G,le);return le.delete(m),Le;case xe:if(wi)return wi.call(m)==wi.call(v)}return!1}function bf(m,v,O,x,ne,G){var le=O&i,pe=ca(m),ye=pe.length,oe=ca(v),Le=oe.length;if(ye!=Le&&!le)return!1;for(var He=ye;He--;){var Se=pe[He];if(!(le?Se in v:Xe.call(v,Se)))return!1}var Ue=G.get(m);if(Ue&&G.get(v))return Ue==v;var ke=!0;G.set(m,v),G.set(v,m);for(var lt=le;++He<ye;){Se=pe[He];var Ze=m[Se],Ot=v[Se];if(x)var ma=le?x(Ot,Ze,Se,v,m,G):x(Ze,Ot,Se,m,v,G);if(!(ma===void 0?Ze===Ot||ne(Ze,Ot,O,x,G):ma)){ke=!1;break}lt||(lt=Se=="constructor")}if(ke&&!lt){var dr=m.constructor,hr=v.constructor;dr!=hr&&"constructor"in m&&"constructor"in v&&!(typeof dr=="function"&&dr instanceof dr&&typeof hr=="function"&&hr instanceof hr)&&(ke=!1)}return G.delete(m),G.delete(v),ke}function ca(m){return _f(m,Uf,Of)}function ur(m,v){var O=m.__data__;return If(v)?O[typeof v=="string"?"string":"hash"]:O.map}function Ht(m,v){var O=hn(m,v);return Tf(O)?O:void 0}function Rf(m){var v=Xe.call(m,At),O=m[At];try{m[At]=void 0;var x=!0}catch{}var ne=ea.call(m);return x&&(v?m[At]=O:delete m[At]),ne}var Of=ia?function(m){return m==null?[]:(m=Object(m),Te(ia(m),function(v){return ra.call(m,v)}))}:kf,st=gn;(Ei&&st(new Ei(new ArrayBuffer(1)))!=H||pn&&st(new pn)!=y||yi&&st(yi.resolve())!=F||vi&&st(new vi)!=ce||_i&&st(new _i)!=V)&&(st=function(m){var v=gn(m),O=v==S?m.constructor:void 0,x=O?Rt(O):"";if(x)switch(x){case Vu:return H;case Wu:return y;case Yu:return F;case Xu:return ce;case zu:return V}return v});function Pf(m,v){return v=v??a,!!v&&(typeof m=="number"||he.test(m))&&m>-1&&m%1==0&&m<v}function If(m){var v=typeof m;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?m!=="__proto__":m===null}function Nf(m){return!!Zo&&Zo in m}function Df(m){var v=m&&m.constructor,O=typeof v=="function"&&v.prototype||ar;return m===O}function $f(m){return ea.call(m)}function Rt(m){if(m!=null){try{return Qo.call(m)}catch{}try{return m+""}catch{}}return""}function ua(m,v){return m===v||m!==m&&v!==v}var Ff=aa(function(){return arguments}())?aa:function(m){return En(m)&&Xe.call(m,"callee")&&!ra.call(m,"callee")},fr=Array.isArray;function xf(m){return m!=null&&da(m.length)&&!fa(m)}var Ti=qu||Mf;function Lf(m,v){return sa(m,v)}function fa(m){if(!ha(m))return!1;var v=gn(m);return v==g||v==w||v==p||v==L}function da(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=a}function ha(m){var v=typeof m;return m!=null&&(v=="object"||v=="function")}function En(m){return m!=null&&typeof m=="object"}var pa=Ee?mi(Ee):Sf;function Uf(m){return xf(m)?vf(m):Af(m)}function kf(){return[]}function Mf(){return!1}e.exports=Lf})(Vr,Vr.exports);var sv=Vr.exports;Object.defineProperty(er,"__esModule",{value:!0});er.DownloadedUpdateHelper=void 0;er.createTempUpdateFile=dv;const lv=Wn,cv=rt,Os=sv,It=Tt,On=ee;class uv{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return On.join(this.cacheDir,"pending")}async validateDownloadedPath(t,n,r,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return Os(this.versionInfo,n)&&Os(this.fileInfo.info,r.info)&&await(0,It.pathExists)(t)?t:null;const o=await this.getValidCachedUpdateFile(r,i);return o===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=o,o)}async setDownloadedFile(t,n,r,i,o,a){this._file=t,this._packageFile=n,this.versionInfo=r,this.fileInfo=i,this._downloadedFileInfo={fileName:o,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},a&&await(0,It.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,It.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,n){const r=this.getUpdateInfoFile();if(!await(0,It.pathExists)(r))return null;let o;try{o=await(0,It.readJson)(r)}catch(p){let c="No cached update info available";return p.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=` (error on read: ${p.message})`),n.info(c),null}if(!((o==null?void 0:o.fileName)!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const s=On.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,It.pathExists)(s))return n.info("Cached update file doesn't exist"),null;const l=await fv(s);return t.info.sha512!==l?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,s)}getUpdateInfoFile(){return On.join(this.cacheDirForPendingUpdate,"update-info.json")}}er.DownloadedUpdateHelper=uv;function fv(e,t="sha512",n="base64",r){return new Promise((i,o)=>{const a=(0,lv.createHash)(t);a.on("error",o).setEncoding(n),(0,cv.createReadStream)(e,{...r,highWaterMark:1024*1024}).on("error",o).on("end",()=>{a.end(),i(a.read())}).pipe(a,{end:!1})})}async function dv(e,t,n){let r=0,i=On.join(t,e);for(let o=0;o<3;o++)try{return await(0,It.unlink)(i),i}catch(a){if(a.code==="ENOENT")return i;n.warn(`Error on remove temp update file: ${a}`),i=On.join(t,`${r++}-${e}`)}return i}var si={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.getAppCacheDir=pv;const Hi=ee,hv=Yn;function pv(){const e=(0,hv.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||Hi.join(e,"AppData","Local"):process.platform==="darwin"?t=Hi.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||Hi.join(e,".cache"),t}Object.defineProperty(si,"__esModule",{value:!0});si.ElectronAppAdapter=void 0;const Ps=ee,mv=zo;class gv{constructor(t=k.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?Ps.join(process.resourcesPath,"app-update.yml"):Ps.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,mv.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(n,r)=>t(r))}}si.ElectronAppAdapter=gv;var Su={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=n;const t=ge;e.NET_SESSION_NAME="electron-updater";function n(){return k.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class r extends t.HttpExecutor{constructor(o){super(),this.proxyLoginCallback=o,this.cachedSession=null}async download(o,a,s){return await s.cancellationToken.createPromise((l,p,c)=>{const f={headers:s.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(o,f),(0,t.configureRequestOptions)(f),this.doDownload(f,{destination:a,options:s,onCancel:c,callback:d=>{d==null?l(a):p(d)},responseHandler:null},0)})}createRequest(o,a){o.headers&&o.headers.Host&&(o.host=o.headers.Host,delete o.headers.Host),this.cachedSession==null&&(this.cachedSession=n());const s=k.net.request({...o,session:this.cachedSession});return s.on("response",a),this.proxyLoginCallback!=null&&s.on("login",this.proxyLoginCallback),s}addRedirectHandlers(o,a,s,l,p){o.on("redirect",(c,f,d)=>{o.abort(),l>this.maxRedirects?s(this.createMaxRedirectError()):p(t.HttpExecutor.prepareRedirectUrlOptions(d,a))})}}e.ElectronHttpExecutor=r})(Su);var tr={},Me={},Ev="[object Symbol]",Au=/[\\^$.*+?()[\]{}|]/g,yv=RegExp(Au.source),vv=typeof ve=="object"&&ve&&ve.Object===Object&&ve,_v=typeof self=="object"&&self&&self.Object===Object&&self,wv=vv||_v||Function("return this")(),Tv=Object.prototype,Sv=Tv.toString,Is=wv.Symbol,Ns=Is?Is.prototype:void 0,Ds=Ns?Ns.toString:void 0;function Av(e){if(typeof e=="string")return e;if(bv(e))return Ds?Ds.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Cv(e){return!!e&&typeof e=="object"}function bv(e){return typeof e=="symbol"||Cv(e)&&Sv.call(e)==Ev}function Rv(e){return e==null?"":Av(e)}function Ov(e){return e=Rv(e),e&&yv.test(e)?e.replace(Au,"\\$&"):e}var Pv=Ov;Object.defineProperty(Me,"__esModule",{value:!0});Me.newBaseUrl=Nv;Me.newUrlFromBase=po;Me.getChannelFilename=Dv;Me.blockmapFiles=$v;const Cu=ln,Iv=Pv;function Nv(e){const t=new Cu.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function po(e,t,n=!1){const r=new Cu.URL(e,t),i=t.search;return i!=null&&i.length!==0?r.search=i:n&&(r.search=`noCache=${Date.now().toString(32)}`),r}function Dv(e){return`${e}.yml`}function $v(e,t,n){const r=po(`${e.pathname}.blockmap`,e);return[po(`${e.pathname.replace(new RegExp(Iv(n),"g"),t)}.blockmap`,e),r]}var de={};Object.defineProperty(de,"__esModule",{value:!0});de.Provider=void 0;de.findFile=Lv;de.parseUpdateInfo=Uv;de.getFileList=bu;de.resolveFiles=kv;const vt=ge,Fv=we,$s=Me;class xv{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,n,r){return this.executor.request(this.createRequestOptions(t,n),r)}createRequestOptions(t,n){const r={};return this.requestHeaders==null?n!=null&&(r.headers=n):r.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,vt.configureRequestUrl)(t,r),r}}de.Provider=xv;function Lv(e,t,n){if(e.length===0)throw(0,vt.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const r=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return r??(n==null?e[0]:e.find(i=>!n.some(o=>i.url.pathname.toLowerCase().endsWith(`.${o}`))))}function Uv(e,t,n){if(e==null)throw(0,vt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let r;try{r=(0,Fv.load)(e)}catch(i){throw(0,vt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return r}function bu(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,vt.newError)(`No files provided: ${(0,vt.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function kv(e,t,n=r=>r){const i=bu(e).map(s=>{if(s.sha2==null&&s.sha512==null)throw(0,vt.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,vt.safeStringifyJson)(s)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,$s.newUrlFromBase)(n(s.url),t),info:s}}),o=e.packages,a=o==null?null:o[process.arch]||o.ia32;return a!=null&&(i[0].packageInfo={...a,path:(0,$s.newUrlFromBase)(n(a.path),t).href}),i}Object.defineProperty(tr,"__esModule",{value:!0});tr.GenericProvider=void 0;const Fs=ge,ji=Me,qi=de;class Mv extends qi.Provider{constructor(t,n,r){super(r),this.configuration=t,this.updater=n,this.baseUrl=(0,ji.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,ji.getChannelFilename)(this.channel),n=(0,ji.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let r=0;;r++)try{return(0,qi.parseUpdateInfo)(await this.httpRequest(n),t,n)}catch(i){if(i instanceof Fs.HttpError&&i.statusCode===404)throw(0,Fs.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&r<3){await new Promise((o,a)=>{try{setTimeout(o,1e3*r)}catch(s){a(s)}});continue}throw i}}resolveFiles(t){return(0,qi.resolveFiles)(t,this.baseUrl)}}tr.GenericProvider=Mv;var li={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.BitbucketProvider=void 0;const xs=ge,Gi=Me,Vi=de;class Bv extends Vi.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n;const{owner:i,slug:o}=t;this.baseUrl=(0,Gi.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${o}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new xs.CancellationToken,n=(0,Gi.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Gi.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,void 0,t);return(0,Vi.parseUpdateInfo)(i,n,r)}catch(i){throw(0,xs.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Vi.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:n}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${n}, channel: ${this.channel})`}}ci.BitbucketProvider=Bv;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.GitHubProvider=_t.BaseGitHubProvider=void 0;_t.computeReleaseNotes=Ou;const et=ge,Jt=Tu,Hv=ln,Qt=Me,mo=de,Wi=/\/tag\/([^/]+)$/;class Ru extends mo.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,Qt.newBaseUrl)((0,et.githubUrl)(t,n));const i=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,Qt.newBaseUrl)((0,et.githubUrl)(t,i))}computeGithubBasePath(t){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${t}`:t}}_t.BaseGitHubProvider=Ru;class jv extends Ru{constructor(t,n,r){super(t,"github.com",r),this.options=t,this.updater=n}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,n,r,i,o;const a=new et.CancellationToken,s=await this.httpRequest((0,Qt.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},a),l=(0,et.parseXml)(s);let p=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){const T=((t=this.updater)===null||t===void 0?void 0:t.channel)||((n=Jt.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(T===null)c=Wi.exec(p.element("link").attribute("href"))[1];else for(const A of l.getElements("entry")){const S=Wi.exec(A.element("link").attribute("href"));if(S===null)continue;const F=S[1],L=((r=Jt.prerelease(F))===null||r===void 0?void 0:r[0])||null,re=!T||["alpha","beta"].includes(T),ce=L!==null&&!["alpha","beta"].includes(String(L));if(re&&!ce&&!(T==="beta"&&L==="alpha")){c=F;break}if(L&&L===T){c=F;break}}}else{c=await this.getLatestTagName(a);for(const T of l.getElements("entry"))if(Wi.exec(T.element("link").attribute("href"))[1]===c){p=T;break}}}catch(T){throw(0,et.newError)(`Cannot parse releases feed: ${T.stack||T.message},
XML:
${s}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,et.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let f,d="",g="";const w=async T=>{d=(0,Qt.getChannelFilename)(T),g=(0,Qt.newUrlFromBase)(this.getBaseDownloadPath(String(c),d),this.baseUrl);const A=this.createRequestOptions(g);try{return await this.executor.request(A,a)}catch(S){throw S instanceof et.HttpError&&S.statusCode===404?(0,et.newError)(`Cannot find ${d} in the latest release artifacts (${g}): ${S.stack||S.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):S}};try{let T=this.channel;this.updater.allowPrerelease&&(!((i=Jt.prerelease(c))===null||i===void 0)&&i[0])&&(T=this.getCustomChannelName(String((o=Jt.prerelease(c))===null||o===void 0?void 0:o[0]))),f=await w(T)}catch(T){if(this.updater.allowPrerelease)f=await w(this.getDefaultChannelName());else throw T}const y=(0,mo.parseUpdateInfo)(f,d,g);return y.releaseName==null&&(y.releaseName=p.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=Ou(this.updater.currentVersion,this.updater.fullChangelog,l,p)),{tag:c,...y}}async getLatestTagName(t){const n=this.options,r=n.host==null||n.host==="github.com"?(0,Qt.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new Hv.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(r,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,et.newError)(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,mo.resolveFiles)(t,this.baseUrl,n=>this.getBaseDownloadPath(t.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(t,n){return`${this.basePath}/download/${t}/${n}`}}_t.GitHubProvider=jv;function Ls(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function Ou(e,t,n,r){if(!t)return Ls(r);const i=[];for(const o of n.getElements("entry")){const a=/\/tag\/v?([^/]+)$/.exec(o.element("link").attribute("href"))[1];Jt.lt(e,a)&&i.push({version:a,note:Ls(o)})}return i.sort((o,a)=>Jt.rcompare(o.version,a.version))}var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.KeygenProvider=void 0;const Us=ge,Yi=Me,Xi=de;class qv extends Xi.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,Yi.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new Us.CancellationToken,n=(0,Yi.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Yi.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,Xi.parseUpdateInfo)(i,n,r)}catch(i){throw(0,Us.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Xi.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:n,platform:r}=this.configuration;return`Keygen (account: ${t}, product: ${n}, platform: ${r}, channel: ${this.channel})`}}ui.KeygenProvider=qv;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.PrivateGitHubProvider=void 0;const Gt=ge,Gv=we,Vv=ee,ks=ln,Ms=Me,Wv=_t,Yv=de;class Xv extends Wv.BaseGitHubProvider{constructor(t,n,r,i){super(t,"api.github.com",i),this.updater=n,this.token=r}createRequestOptions(t,n){const r=super.createRequestOptions(t,n);return r.redirect="manual",r}async getLatestVersion(){const t=new Gt.CancellationToken,n=(0,Ms.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(t),i=r.assets.find(s=>s.name===n);if(i==null)throw(0,Gt.newError)(`Cannot find ${n} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const o=new ks.URL(i.url);let a;try{a=(0,Gv.load)(await this.httpRequest(o,this.configureHeaders("application/octet-stream"),t))}catch(s){throw s instanceof Gt.HttpError&&s.statusCode===404?(0,Gt.newError)(`Cannot find ${n} in the latest release artifacts (${o}): ${s.stack||s.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):s}return a.assets=r.assets,a}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const n=this.updater.allowPrerelease;let r=this.basePath;n||(r=`${r}/latest`);const i=(0,Ms.newUrlFromBase)(r,this.baseUrl);try{const o=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return n?o.find(a=>a.prerelease)||o[0]:o}catch(o){throw(0,Gt.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Yv.getFileList)(t).map(n=>{const r=Vv.posix.basename(n.url).replace(/ /g,"-"),i=t.assets.find(o=>o!=null&&o.name===r);if(i==null)throw(0,Gt.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new ks.URL(i.url),info:n}})}}fi.PrivateGitHubProvider=Xv;Object.defineProperty(li,"__esModule",{value:!0});li.isUrlProbablySupportMultiRangeRequests=Pu;li.createClient=Zv;const br=ge,zv=ci,Bs=tr,Kv=_t,Jv=ui,Qv=fi;function Pu(e){return!e.includes("s3.amazonaws.com")}function Zv(e,t,n){if(typeof e=="string")throw(0,br.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const r=e.provider;switch(r){case"github":{const i=e,o=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return o==null?new Kv.GitHubProvider(i,t,n):new Qv.PrivateGitHubProvider(i,t,o,n)}case"bitbucket":return new zv.BitbucketProvider(e,t,n);case"keygen":return new Jv.KeygenProvider(e,t,n);case"s3":case"spaces":return new Bs.GenericProvider({provider:"generic",url:(0,br.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...n,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new Bs.GenericProvider(i,t,{...n,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&Pu(i.url)})}case"custom":{const i=e,o=i.updateProvider;if(!o)throw(0,br.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new o(i,t,n)}default:throw(0,br.newError)(`Unsupported provider: ${r}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var di={},nr={},dn={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.OperationKind=void 0;Bt.computeOperations=e_;var Ft;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Ft||(Bt.OperationKind=Ft={}));function e_(e,t,n){const r=js(e.files),i=js(t.files);let o=null;const a=t.files[0],s=[],l=a.name,p=r.get(l);if(p==null)throw new Error(`no file ${l} in old blockmap`);const c=i.get(l);let f=0;const{checksumToOffset:d,checksumToOldSize:g}=n_(r.get(l),p.offset,n);let w=a.offset;for(let y=0;y<c.checksums.length;w+=c.sizes[y],y++){const T=c.sizes[y],A=c.checksums[y];let S=d.get(A);S!=null&&g.get(A)!==T&&(n.warn(`Checksum ("${A}") matches, but size differs (old: ${g.get(A)}, new: ${T})`),S=void 0),S===void 0?(f++,o!=null&&o.kind===Ft.DOWNLOAD&&o.end===w?o.end+=T:(o={kind:Ft.DOWNLOAD,start:w,end:w+T},Hs(o,s,A,y))):o!=null&&o.kind===Ft.COPY&&o.end===S?o.end+=T:(o={kind:Ft.COPY,start:S,end:S+T},Hs(o,s,A,y))}return f>0&&n.info(`File${a.name==="file"?"":" "+a.name} has ${f} changed blocks`),s}const t_=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function Hs(e,t,n,r){if(t_&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const o=[i.start,i.end,e.start,e.end].reduce((a,s)=>a<s?a:s);throw new Error(`operation (block index: ${r}, checksum: ${n}, kind: ${Ft[e.kind]}) overlaps previous operation (checksum: ${n}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-o} until ${i.end-o} and ${e.start-o} until ${e.end-o}`)}}t.push(e)}function n_(e,t,n){const r=new Map,i=new Map;let o=t;for(let a=0;a<e.checksums.length;a++){const s=e.checksums[a],l=e.sizes[a],p=i.get(s);if(p===void 0)r.set(s,o),i.set(s,l);else if(n.debug!=null){const c=p===l?"(same size)":`(size: ${p}, this size: ${l})`;n.debug(`${s} duplicated in blockmap ${c}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=l}return{checksumToOffset:r,checksumToOldSize:i}}function js(e){const t=new Map;for(const n of e)t.set(n.name,n);return t}Object.defineProperty(dn,"__esModule",{value:!0});dn.DataSplitter=void 0;dn.copyData=Iu;const Rr=ge,r_=rt,i_=sn,o_=Bt,qs=Buffer.from(`\r
\r
`);var ft;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(ft||(ft={}));function Iu(e,t,n,r,i){const o=(0,r_.createReadStream)("",{fd:n,autoClose:!1,start:e.start,end:e.end-1});o.on("error",r),o.once("end",i),o.pipe(t,{end:!1})}class a_ extends i_.Writable{constructor(t,n,r,i,o,a){super(),this.out=t,this.options=n,this.partIndexToTaskIndex=r,this.partIndexToLength=o,this.finishHandler=a,this.partIndex=-1,this.headerListBuffer=null,this.readState=ft.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,n,r){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(r).catch(r)}async handleData(t){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,Rr.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=r,n=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=r,await this.processPartData(t,0,r),n=r}if(n!==t.length){if(this.readState===ft.HEADER){const r=this.searchHeaderListEnd(t,n);if(r===-1)return;n=r,this.readState=ft.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ft.BODY)this.readState=ft.INIT;else{this.partIndex++;let a=this.partIndexToTaskIndex.get(this.partIndex);if(a==null)if(this.isFinished)a=this.options.end;else throw(0,Rr.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const s=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(s<a)await this.copyExistingData(s,a);else if(s>a)throw(0,Rr.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(t,n),n===-1){this.readState=ft.HEADER;return}}const r=this.partIndexToLength[this.partIndex],i=n+r,o=Math.min(i,t.length);if(await this.processPartStarted(t,n,o),this.remainingPartDataCount=r-(o-n),this.remainingPartDataCount>0)return;if(n=i+this.boundaryLength,n>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,n){return new Promise((r,i)=>{const o=()=>{if(t===n){r();return}const a=this.options.tasks[t];if(a.kind!==o_.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}Iu(a,this.out,this.options.oldFileFd,i,()=>{t++,o()})};o()})}searchHeaderListEnd(t,n){const r=t.indexOf(qs,n);if(r!==-1)return r+qs.length;const i=n===0?t:t.slice(n);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,Rr.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,n,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,n,r)}processPartData(t,n,r){this.actualPartLength+=r-n;const i=this.out;return i.write(n===0&&t.length===r?t:t.slice(n,r))?Promise.resolve():new Promise((o,a)=>{i.on("error",a),i.once("drain",()=>{i.removeListener("error",a),o()})})}}dn.DataSplitter=a_;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.executeTasksUsingMultipleRangeRequests=s_;hi.checkIsRangesSupported=Eo;const go=ge,Gs=dn,Vs=Bt;function s_(e,t,n,r,i){const o=a=>{if(a>=t.length){e.fileMetadataBuffer!=null&&n.write(e.fileMetadataBuffer),n.end();return}const s=a+1e3;l_(e,{tasks:t,start:a,end:Math.min(t.length,s),oldFileFd:r},n,()=>o(s),i)};return o}function l_(e,t,n,r,i){let o="bytes=",a=0;const s=new Map,l=[];for(let f=t.start;f<t.end;f++){const d=t.tasks[f];d.kind===Vs.OperationKind.DOWNLOAD&&(o+=`${d.start}-${d.end-1}, `,s.set(a,f),a++,l.push(d.end-d.start))}if(a<=1){const f=d=>{if(d>=t.end){r();return}const g=t.tasks[d++];if(g.kind===Vs.OperationKind.COPY)(0,Gs.copyData)(g,n,t.oldFileFd,i,()=>f(d));else{const w=e.createRequestOptions();w.headers.Range=`bytes=${g.start}-${g.end-1}`;const y=e.httpExecutor.createRequest(w,T=>{Eo(T,i)&&(T.pipe(n,{end:!1}),T.once("end",()=>f(d)))});e.httpExecutor.addErrorAndTimeoutHandlers(y,i),y.end()}};f(t.start);return}const p=e.createRequestOptions();p.headers.Range=o.substring(0,o.length-2);const c=e.httpExecutor.createRequest(p,f=>{if(!Eo(f,i))return;const d=(0,go.safeGetHeader)(f,"content-type"),g=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(d);if(g==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${d}"`));return}const w=new Gs.DataSplitter(n,t,s,g[1]||g[2],l,r);w.on("error",i),f.pipe(w),f.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function Eo(e,t){if(e.statusCode>=400)return t((0,go.createHttpError)(e)),!1;if(e.statusCode!==206){const n=(0,go.safeGetHeader)(e,"accept-ranges");if(n==null||n==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.ProgressDifferentialDownloadCallbackTransform=void 0;const c_=sn;var Zt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Zt||(Zt={}));class u_ extends c_.Transform{constructor(t,n,r){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Zt.COPY,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==Zt.COPY){r(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}beginFileCopy(){this.operationType=Zt.COPY}beginRangeDownload(){this.operationType=Zt.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}pi.ProgressDifferentialDownloadCallbackTransform=u_;Object.defineProperty(nr,"__esModule",{value:!0});nr.DifferentialDownloader=void 0;const wn=ge,zi=Tt,f_=rt,d_=dn,h_=ln,Or=Bt,Ws=hi,p_=pi;class m_{constructor(t,n,r){this.blockAwareFileInfo=t,this.httpExecutor=n,this.options=r,this.fileMetadataBuffer=null,this.logger=r.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,wn.configureRequestUrl)(this.options.newUrl,t),(0,wn.configureRequestOptions)(t),t}doDownload(t,n){if(t.version!==n.version)throw new Error(`version is different (${t.version} - ${n.version}), full download is required`);const r=this.logger,i=(0,Or.computeOperations)(t,n,r);r.debug!=null&&r.debug(JSON.stringify(i,null,2));let o=0,a=0;for(const l of i){const p=l.end-l.start;l.kind===Or.OperationKind.DOWNLOAD?o+=p:a+=p}const s=this.blockAwareFileInfo.size;if(o+a+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==s)throw new Error(`Internal error, size mismatch: downloadSize: ${o}, copySize: ${a}, newSize: ${s}`);return r.info(`Full: ${Ys(s)}, To download: ${Ys(o)} (${Math.round(o/(s/100))}%)`),this.downloadFile(i)}downloadFile(t){const n=[],r=()=>Promise.all(n.map(i=>(0,zi.close)(i.descriptor).catch(o=>{this.logger.error(`cannot close file "${i.path}": ${o}`)})));return this.doDownloadFile(t,n).then(r).catch(i=>r().catch(o=>{try{this.logger.error(`cannot close files: ${o}`)}catch(a){try{console.error(a)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,n){const r=await(0,zi.open)(this.options.oldFile,"r");n.push({descriptor:r,path:this.options.oldFile});const i=await(0,zi.open)(this.options.newFile,"w");n.push({descriptor:i,path:this.options.newFile});const o=(0,f_.createWriteStream)(this.options.newFile,{fd:i});await new Promise((a,s)=>{const l=[];let p;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const A=[];let S=0;for(const L of t)L.kind===Or.OperationKind.DOWNLOAD&&(A.push(L.end-L.start),S+=L.end-L.start);const F={expectedByteCounts:A,grandTotal:S};p=new p_.ProgressDifferentialDownloadCallbackTransform(F,this.options.cancellationToken,this.options.onProgress),l.push(p)}const c=new wn.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),o.on("finish",()=>{o.close(()=>{n.splice(1,1);try{c.validate()}catch(A){s(A);return}a(void 0)})}),l.push(o);let f=null;for(const A of l)A.on("error",s),f==null?f=A:f=f.pipe(A);const d=l[0];let g;if(this.options.isUseMultipleRangeRequest){g=(0,Ws.executeTasksUsingMultipleRangeRequests)(this,t,d,r,s),g(0);return}let w=0,y=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const T=this.createRequestOptions();T.redirect="manual",g=A=>{var S,F;if(A>=t.length){this.fileMetadataBuffer!=null&&d.write(this.fileMetadataBuffer),d.end();return}const L=t[A++];if(L.kind===Or.OperationKind.COPY){p&&p.beginFileCopy(),(0,d_.copyData)(L,d,r,s,()=>g(A));return}const re=`bytes=${L.start}-${L.end-1}`;T.headers.range=re,(F=(S=this.logger)===null||S===void 0?void 0:S.debug)===null||F===void 0||F.call(S,`download range: ${re}`),p&&p.beginRangeDownload();const ce=this.httpExecutor.createRequest(T,X=>{X.on("error",s),X.on("aborted",()=>{s(new Error("response has been aborted by the server"))}),X.statusCode>=400&&s((0,wn.createHttpError)(X)),X.pipe(d,{end:!1}),X.once("end",()=>{p&&p.endRangeDownload(),++w===100?(w=0,setTimeout(()=>g(A),1e3)):g(A)})});ce.on("redirect",(X,xe,E)=>{this.logger.info(`Redirect to ${g_(E)}`),y=E,(0,wn.configureRequestUrl)(new h_.URL(y),T),ce.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(ce,s),ce.end()},g(0)})}async readRemoteBytes(t,n){const r=Buffer.allocUnsafe(n+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${n}`;let o=0;if(await this.request(i,a=>{a.copy(r,o),o+=a.length}),o!==r.length)throw new Error(`Received data length ${o} is not equal to expected ${r.length}`);return r}request(t,n){return new Promise((r,i)=>{const o=this.httpExecutor.createRequest(t,a=>{(0,Ws.checkIsRangesSupported)(a,i)&&(a.on("error",i),a.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),a.on("data",n),a.on("end",()=>r()))});this.httpExecutor.addErrorAndTimeoutHandlers(o,i),o.end()})}}nr.DifferentialDownloader=m_;function Ys(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function g_(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(di,"__esModule",{value:!0});di.GenericDifferentialDownloader=void 0;const E_=nr;class y_ extends E_.DifferentialDownloader{download(t,n){return this.doDownload(t,n)}}di.GenericDifferentialDownloader=y_;var St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=r;const t=ge;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class n{constructor(o){this.emitter=o}login(o){r(this.emitter,"login",o)}progress(o){r(this.emitter,e.DOWNLOAD_PROGRESS,o)}updateDownloaded(o){r(this.emitter,e.UPDATE_DOWNLOADED,o)}updateCancelled(o){r(this.emitter,"update-cancelled",o)}}e.UpdaterSignal=n;function r(i,o,a){i.on(o,a)}})(St);Object.defineProperty(gt,"__esModule",{value:!0});gt.NoOpLogger=gt.AppUpdater=void 0;const be=ge,v_=Wn,__=Yn,w_=_o,Vt=Tt,T_=we,Ki=ti,Pt=ee,Nt=Tu,Xs=er,S_=si,zs=Su,A_=tr,Ji=li,C_=Cl,b_=Me,R_=di,Wt=St;class Ko extends w_.EventEmitter{get channel(){return this._channel}set channel(t){if(this._channel!=null){if(typeof t!="string")throw(0,be.newError)(`Channel must be a string, but got: ${t}`,"ERR_UPDATER_INVALID_CHANNEL");if(t.length===0)throw(0,be.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=t,this.allowDowngrade=!0}addAuthHeader(t){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:t})}get netSession(){return(0,zs.getNetSession)()}get logger(){return this._logger}set logger(t){this._logger=t??new Nu}set updateConfigPath(t){this.clientPromise=null,this._appUpdateConfigPath=t,this.configOnDisk=new Ki.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(t){t&&(this._isUpdateSupported=t)}constructor(t,n){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Wt.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=o=>this.checkIfUpdateSupported(o),this.clientPromise=null,this.stagingUserIdPromise=new Ki.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new Ki.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",o=>{this._logger.error(`Error: ${o.stack||o.message}`)}),n==null?(this.app=new S_.ElectronAppAdapter,this.httpExecutor=new zs.ElectronHttpExecutor((o,a)=>this.emit("login",o,a))):(this.app=n,this.httpExecutor=null);const r=this.app.version,i=(0,Nt.parse)(r);if(i==null)throw(0,be.newError)(`App version is not a valid semver version: "${r}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=i,this.allowPrerelease=O_(i),t!=null&&(this.setFeedURL(t),typeof t!="string"&&t.requestHeaders&&(this.requestHeaders=t.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(t){const n=this.createProviderRuntimeOptions();let r;typeof t=="string"?r=new A_.GenericProvider({provider:"generic",url:t},this,{...n,isUseMultipleRangeRequest:(0,Ji.isUrlProbablySupportMultiRangeRequests)(t)}):r=(0,Ji.createClient)(t,this,n),this.clientPromise=Promise.resolve(r)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let t=this.checkForUpdatesPromise;if(t!=null)return this._logger.info("Checking for update (already in progress)"),t;const n=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),t=this.doCheckForUpdates().then(r=>(n(),r)).catch(r=>{throw n(),this.emit("error",r,`Cannot check for updates: ${(r.stack||r).toString()}`),r}),this.checkForUpdatesPromise=t,t}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(t){return this.checkForUpdates().then(n=>n!=null&&n.downloadPromise?(n.downloadPromise.then(()=>{const r=Ko.formatDownloadNotification(n.updateInfo.version,this.app.name,t);new k.Notification(r).show()}),n):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),n))}static formatDownloadNotification(t,n,r){return r==null&&(r={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),r={title:r.title.replace("{appName}",n).replace("{version}",t),body:r.body.replace("{appName}",n).replace("{version}",t)},r}async isStagingMatch(t){const n=t.stagingPercentage;let r=n;if(r==null)return!0;if(r=parseInt(r,10),isNaN(r))return this._logger.warn(`Staging percentage is NaN: ${n}`),!0;r=r/100;const i=await this.stagingUserIdPromise.value,a=be.UUID.parse(i).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${r}, percentage: ${a}, user id: ${i}`),a<r}computeFinalHeaders(t){return this.requestHeaders!=null&&Object.assign(t,this.requestHeaders),t}async isUpdateAvailable(t){const n=(0,Nt.parse)(t.version);if(n==null)throw(0,be.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${t.version}"`,"ERR_UPDATER_INVALID_VERSION");const r=this.currentVersion;if((0,Nt.eq)(n,r)||!await Promise.resolve(this.isUpdateSupported(t))||!await this.isStagingMatch(t))return!1;const o=(0,Nt.gt)(n,r),a=(0,Nt.lt)(n,r);return o?!0:this.allowDowngrade&&a}checkIfUpdateSupported(t){const n=t==null?void 0:t.minimumSystemVersion,r=(0,__.release)();if(n)try{if((0,Nt.lt)(r,n))return this._logger.info(`Current OS version ${r} is less than the minimum OS version required ${n} for version ${r}`),!1}catch(i){this._logger.warn(`Failed to compare current OS version(${r}) with minimum OS version(${n}): ${(i.message||i).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(r=>(0,Ji.createClient)(r,this,this.createProviderRuntimeOptions())));const t=await this.clientPromise,n=await this.stagingUserIdPromise.value;return t.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":n})),{info:await t.getLatestVersion(),provider:t}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const t=await this.getUpdateInfoAndProvider(),n=t.info;if(!await this.isUpdateAvailable(n))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${n.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",n),{isUpdateAvailable:!1,versionInfo:n,updateInfo:n};this.updateInfoAndProvider=t,this.onUpdateAvailable(n);const r=new be.CancellationToken;return{isUpdateAvailable:!0,versionInfo:n,updateInfo:n,cancellationToken:r,downloadPromise:this.autoDownload?this.downloadUpdate(r):null}}onUpdateAvailable(t){this._logger.info(`Found version ${t.version} (url: ${(0,be.asArray)(t.files).map(n=>n.url).join(", ")})`),this.emit("update-available",t)}downloadUpdate(t=new be.CancellationToken){const n=this.updateInfoAndProvider;if(n==null){const i=new Error("Please check update first");return this.dispatchError(i),Promise.reject(i)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,be.asArray)(n.info.files).map(i=>i.url).join(", ")}`);const r=i=>{if(!(i instanceof be.CancellationError))try{this.dispatchError(i)}catch(o){this._logger.warn(`Cannot dispatch error event: ${o.stack||o}`)}return i};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:n,requestHeaders:this.computeRequestHeaders(n.provider),cancellationToken:t,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(i=>{throw r(i)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(t){this.emit("error",t,(t.stack||t).toString())}dispatchUpdateDownloaded(t){this.emit(Wt.UPDATE_DOWNLOADED,t)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,T_.load)(await(0,Vt.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(t){const n=t.fileExtraDownloadHeaders;if(n!=null){const r=this.requestHeaders;return r==null?n:{...n,...r}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const t=Pt.join(this.app.userDataPath,".updaterId");try{const r=await(0,Vt.readFile)(t,"utf-8");if(be.UUID.check(r))return r;this._logger.warn(`Staging user id file exists, but content was invalid: ${r}`)}catch(r){r.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${r}`)}const n=be.UUID.v5((0,v_.randomBytes)(4096),be.UUID.OID);this._logger.info(`Generated new staging user ID: ${n}`);try{await(0,Vt.outputFile)(t,n)}catch(r){this._logger.warn(`Couldn't write out staging user ID: ${r}`)}return n}get isAddNoCacheQuery(){const t=this.requestHeaders;if(t==null)return!0;for(const n of Object.keys(t)){const r=n.toLowerCase();if(r==="authorization"||r==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let t=this.downloadedUpdateHelper;if(t==null){const n=(await this.configOnDisk.value).updaterCacheDirName,r=this._logger;n==null&&r.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const i=Pt.join(this.app.baseCachePath,n||this.app.name);r.debug!=null&&r.debug(`updater cache dir: ${i}`),t=new Xs.DownloadedUpdateHelper(i),this.downloadedUpdateHelper=t}return t}async executeDownload(t){const n=t.fileInfo,r={headers:t.downloadUpdateOptions.requestHeaders,cancellationToken:t.downloadUpdateOptions.cancellationToken,sha2:n.info.sha2,sha512:n.info.sha512};this.listenerCount(Wt.DOWNLOAD_PROGRESS)>0&&(r.onProgress=S=>this.emit(Wt.DOWNLOAD_PROGRESS,S));const i=t.downloadUpdateOptions.updateInfoAndProvider.info,o=i.version,a=n.packageInfo;function s(){const S=decodeURIComponent(t.fileInfo.url.pathname);return S.endsWith(`.${t.fileExtension}`)?Pt.basename(S):t.fileInfo.info.url}const l=await this.getOrCreateDownloadHelper(),p=l.cacheDirForPendingUpdate;await(0,Vt.mkdir)(p,{recursive:!0});const c=s();let f=Pt.join(p,c);const d=a==null?null:Pt.join(p,`package-${o}${Pt.extname(a.path)||".7z"}`),g=async S=>(await l.setDownloadedFile(f,d,i,n,c,S),await t.done({...i,downloadedFile:f}),d==null?[f]:[f,d]),w=this._logger,y=await l.validateDownloadedPath(f,i,n,w);if(y!=null)return f=y,await g(!1);const T=async()=>(await l.clear().catch(()=>{}),await(0,Vt.unlink)(f).catch(()=>{})),A=await(0,Xs.createTempUpdateFile)(`temp-${c}`,p,w);try{await t.task(A,r,d,T),await(0,be.retry)(()=>(0,Vt.rename)(A,f),60,500,0,0,S=>S instanceof Error&&/^EBUSY:/.test(S.message))}catch(S){throw await T(),S instanceof be.CancellationError&&(w.info("cancelled"),this.emit("update-cancelled",i)),S}return w.info(`New version ${o} has been downloaded to ${f}`),await g(!0)}async differentialDownloadInstaller(t,n,r,i,o){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const a=(0,b_.blockmapFiles)(t.url,this.app.version,n.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${a[0]}", new: ${a[1]})`);const s=async c=>{const f=await this.httpExecutor.downloadToBuffer(c,{headers:n.requestHeaders,cancellationToken:n.cancellationToken});if(f==null||f.length===0)throw new Error(`Blockmap "${c.href}" is empty`);try{return JSON.parse((0,C_.gunzipSync)(f).toString())}catch(d){throw new Error(`Cannot parse blockmap "${c.href}", error: ${d}`)}},l={newUrl:t.url,oldFile:Pt.join(this.downloadedUpdateHelper.cacheDir,o),logger:this._logger,newFile:r,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:n.requestHeaders,cancellationToken:n.cancellationToken};this.listenerCount(Wt.DOWNLOAD_PROGRESS)>0&&(l.onProgress=c=>this.emit(Wt.DOWNLOAD_PROGRESS,c));const p=await Promise.all(a.map(c=>s(c)));return await new R_.GenericDifferentialDownloader(t.info,this.httpExecutor,l).download(p[0],p[1]),!1}catch(a){if(this._logger.error(`Cannot download differentially, fallback to full download: ${a.stack||a}`),this._testOnlyOptions!=null)throw a;return!0}}}gt.AppUpdater=Ko;function O_(e){const t=(0,Nt.prerelease)(e);return t!=null&&t.length>0}class Nu{info(t){}warn(t){}error(t){}}gt.NoOpLogger=Nu;Object.defineProperty(it,"__esModule",{value:!0});it.BaseUpdater=void 0;const Ks=Vn,P_=gt;class I_ extends P_.AppUpdater{constructor(t,n){super(t,n),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(t=!1,n=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(t,t?n:this.autoRunAppAfterInstall)?setImmediate(()=>{k.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(t){return super.executeDownload({...t,done:n=>(this.dispatchUpdateDownloaded(n),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(t=!1,n=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const r=this.downloadedUpdateHelper,i=this.installerPath,o=r==null?null:r.downloadedFileInfo;if(i==null||o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${t}, isForceRunAfter: ${n}`),this.doInstall({isSilent:t,isForceRunAfter:n,isAdminRightsRequired:o.isAdminRightsRequired})}catch(a){return this.dispatchError(a),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(t=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(t!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${t}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:t}=this.app,n=`"${t} would like to update"`,r=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),i=[r];return/kdesudo/i.test(r)?(i.push("--comment",n),i.push("-c")):/gksudo/i.test(r)?i.push("--message",n):/pkexec/i.test(r)&&i.push("--disable-internal-agent"),i.join(" ")}spawnSyncLog(t,n=[],r={}){this._logger.info(`Executing: ${t} with args: ${n}`);const i=(0,Ks.spawnSync)(t,n,{env:{...process.env,...r},encoding:"utf-8",shell:!0}),{error:o,status:a,stdout:s,stderr:l}=i;if(o!=null)throw this._logger.error(l),o;if(a!=null&&a!==0)throw this._logger.error(l),new Error(`Command ${t} exited with code ${a}`);return s.trim()}async spawnLog(t,n=[],r=void 0,i="ignore"){return this._logger.info(`Executing: ${t} with args: ${n}`),new Promise((o,a)=>{try{const s={stdio:i,env:r,detached:!0},l=(0,Ks.spawn)(t,n,s);l.on("error",p=>{a(p)}),l.unref(),l.pid!==void 0&&o(!0)}catch(s){a(s)}})}}it.BaseUpdater=I_;var Mn={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const Yt=Tt,N_=nr,D_=Cl;class $_ extends N_.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,n=t.size,r=n-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(r,n-1);const i=Du(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await F_(this.options.oldFile),i)}}rr.FileWithEmbeddedBlockMapDifferentialDownloader=$_;function Du(e){return JSON.parse((0,D_.inflateRawSync)(e).toString())}async function F_(e){const t=await(0,Yt.open)(e,"r");try{const n=(await(0,Yt.fstat)(t)).size,r=Buffer.allocUnsafe(4);await(0,Yt.read)(t,r,0,r.length,n-r.length);const i=Buffer.allocUnsafe(r.readUInt32BE(0));return await(0,Yt.read)(t,i,0,i.length,n-r.length-i.length),await(0,Yt.close)(t),Du(i)}catch(n){throw await(0,Yt.close)(t),n}}Object.defineProperty(Mn,"__esModule",{value:!0});Mn.AppImageUpdater=void 0;const Js=ge,Qs=Vn,x_=Tt,L_=rt,Tn=ee,U_=it,k_=rr,M_=de,Zs=St;class B_ extends U_.BaseUpdater{constructor(t,n){super(t,n)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,M_.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{const a=process.env.APPIMAGE;if(a==null)throw(0,Js.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(t.disableDifferentialDownload||await this.downloadDifferential(r,a,i,n,t))&&await this.httpExecutor.download(r.url,i,o),await(0,x_.chmod)(i,493)}})}async downloadDifferential(t,n,r,i,o){try{const a={newUrl:t.url,oldFile:n,logger:this._logger,newFile:r,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,requestHeaders:o.requestHeaders,cancellationToken:o.cancellationToken};return this.listenerCount(Zs.DOWNLOAD_PROGRESS)>0&&(a.onProgress=s=>this.emit(Zs.DOWNLOAD_PROGRESS,s)),await new k_.FileWithEmbeddedBlockMapDifferentialDownloader(t.info,this.httpExecutor,a).download(),!1}catch(a){return this._logger.error(`Cannot download differentially, fallback to full download: ${a.stack||a}`),process.platform==="linux"}}doInstall(t){const n=process.env.APPIMAGE;if(n==null)throw(0,Js.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,L_.unlinkSync)(n);let r;const i=Tn.basename(n),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;Tn.basename(o)===i||!/\d+\.\d+\.\d+/.test(i)?r=n:r=Tn.join(Tn.dirname(n),Tn.basename(o)),(0,Qs.execFileSync)("mv",["-f",o,r]),r!==n&&this.emit("appimage-filename-updated",r);const a={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return t.isForceRunAfter?this.spawnLog(r,[],a):(a.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,Qs.execFileSync)(r,[],{env:a})),!0}}Mn.AppImageUpdater=B_;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.DebUpdater=void 0;const H_=it,j_=de,el=St;class q_ extends H_.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,j_.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(el.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(el.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${o.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Bn.DebUpdater=q_;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.PacmanUpdater=void 0;const G_=it,tl=St,V_=de;class W_ extends G_.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,V_.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(tl.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(tl.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const o=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${o.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}Hn.PacmanUpdater=W_;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.RpmUpdater=void 0;const Y_=it,nl=St,X_=de;class z_ extends Y_.BaseUpdater{constructor(t,n){super(t,n)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,X_.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:r,downloadUpdateOptions:t,task:async(i,o)=>{this.listenerCount(nl.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(nl.DOWNLOAD_PROGRESS,a)),await this.httpExecutor.download(r.url,i,o)}})}get installerPath(){var t,n;return(n=(t=super.installerPath)===null||t===void 0?void 0:t.replace(/ /g,"\\ "))!==null&&n!==void 0?n:null}doInstall(t){const n=this.wrapSudo(),r=/pkexec/i.test(n)?"":'"',i=this.spawnSyncLog("which zypper"),o=this.installerPath;if(o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let a;return i?a=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",o]:a=[this.spawnSyncLog("which dnf || which yum"),"-y","install",o],this.spawnSyncLog(n,[`${r}/bin/bash`,"-c",`'${a.join(" ")}'${r}`]),t.isForceRunAfter&&this.app.relaunch(),!0}}jn.RpmUpdater=z_;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.MacUpdater=void 0;const rl=ge,Qi=Tt,K_=rt,il=ee,J_=jf,Q_=gt,Z_=de,ol=Vn,al=Wn;class ew extends Q_.AppUpdater{constructor(t,n){super(t,n),this.nativeUpdater=k.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",r=>{this._logger.warn(r),this.emit("error",r)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(t){this._logger.debug!=null&&this._logger.debug(t)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(t=>{t&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(t){let n=t.updateInfoAndProvider.provider.resolveFiles(t.updateInfoAndProvider.info);const r=this._logger,i="sysctl.proc_translated";let o=!1;try{this.debug("Checking for macOS Rosetta environment"),o=(0,ol.execFileSync)("sysctl",[i],{encoding:"utf8"}).includes(`${i}: 1`),r.info(`Checked for macOS Rosetta environment (isRosetta=${o})`)}catch(f){r.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${f}`)}let a=!1;try{this.debug("Checking for arm64 in uname");const d=(0,ol.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");r.info(`Checked 'uname -a': arm64=${d}`),a=a||d}catch(f){r.warn(`uname shell command to check for arm64 failed: ${f}`)}a=a||process.arch==="arm64"||o;const s=f=>{var d;return f.url.pathname.includes("arm64")||((d=f.info.url)===null||d===void 0?void 0:d.includes("arm64"))};a&&n.some(s)?n=n.filter(f=>a===s(f)):n=n.filter(f=>!s(f));const l=(0,Z_.findFile)(n,"zip",["pkg","dmg"]);if(l==null)throw(0,rl.newError)(`ZIP file not provided: ${(0,rl.safeStringifyJson)(n)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const p=t.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:t,task:async(f,d)=>{const g=il.join(this.downloadedUpdateHelper.cacheDir,c),w=()=>(0,Qi.pathExistsSync)(g)?!t.disableDifferentialDownload:(r.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;w()&&(y=await this.differentialDownloadInstaller(l,t,f,p,c)),y&&await this.httpExecutor.download(l.url,f,d)},done:async f=>{if(!t.disableDifferentialDownload)try{const d=il.join(this.downloadedUpdateHelper.cacheDir,c);await(0,Qi.copyFile)(f.downloadedFile,d)}catch(d){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${d.message}`)}return this.updateDownloaded(l,f)}})}async updateDownloaded(t,n){var r;const i=n.downloadedFile,o=(r=t.info.size)!==null&&r!==void 0?r:(await(0,Qi.stat)(i)).size,a=this._logger,s=`fileToProxy=${t.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${s})`),this.server=(0,J_.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${s})`),this.server.on("close",()=>{a.info(`Proxy server for native Squirrel.Mac is closed (${s})`)});const l=p=>{const c=p.address();return typeof c=="string"?c:`http://127.0.0.1:${c==null?void 0:c.port}`};return await new Promise((p,c)=>{const f=(0,al.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),d=Buffer.from(`autoupdater:${f}`,"ascii"),g=`/${(0,al.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(w,y)=>{const T=w.url;if(a.info(`${T} requested`),T==="/"){if(!w.headers.authorization||w.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),a.warn("No authenthication info");return}const F=w.headers.authorization.split(" ")[1],L=Buffer.from(F,"base64").toString("ascii"),[re,ce]=L.split(":");if(re!=="autoupdater"||ce!==f){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),a.warn("Invalid authenthication credentials");return}const X=Buffer.from(`{ "url": "${l(this.server)}${g}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":X.length}),y.end(X);return}if(!T.startsWith(g)){a.warn(`${T} requested, but not supported`),y.writeHead(404),y.end();return}a.info(`${g} requested by Squirrel.Mac, pipe ${i}`);let A=!1;y.on("finish",()=>{A||(this.nativeUpdater.removeListener("error",c),p([]))});const S=(0,K_.createReadStream)(i);S.on("error",F=>{try{y.end()}catch(L){a.warn(`cannot end response: ${L}`)}A=!0,this.nativeUpdater.removeListener("error",c),c(new Error(`Cannot pipe "${i}": ${F}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":o}),S.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${s})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${l(this.server)}, ${s})`),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${d.toString("base64")}`}}),this.dispatchUpdateDownloaded(n),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):p([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}}qn.MacUpdater=ew;var Gn={},Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.verifySignature=nw;const sl=ge,$u=Vn,tw=Yn,ll=ee;function nw(e,t,n){return new Promise((r,i)=>{const o=t.replace(/'/g,"''");n.info(`Verifying signature ${o}`),(0,$u.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${o}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(a,s,l)=>{var p;try{if(a!=null||l){Zi(n,a,l,i),r(null);return}const c=rw(s);if(c.Status===0){try{const w=ll.normalize(c.Path),y=ll.normalize(t);if(n.info(`LiteralPath: ${w}. Update Path: ${y}`),w!==y){Zi(n,new Error(`LiteralPath of ${w} is different than ${y}`),l,i),r(null);return}}catch(w){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(p=w.message)!==null&&p!==void 0?p:w.stack}`)}const d=(0,sl.parseDn)(c.SignerCertificate.Subject);let g=!1;for(const w of e){const y=(0,sl.parseDn)(w);if(y.size?g=Array.from(y.keys()).every(A=>y.get(A)===d.get(A)):w===d.get("CN")&&(n.warn(`Signature validated using only CN ${w}. Please add your full Distinguished Name (DN) to publisherNames configuration`),g=!0),g){r(null);return}}}const f=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(c,(d,g)=>d==="RawData"?void 0:g,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${f}`),r(f)}catch(c){Zi(n,c,null,i),r(null);return}})})}function rw(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const n=t.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),t}function Zi(e,t,n,r){if(iw()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,$u.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&r(t),n&&r(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function iw(){const e=tw.release();return e.startsWith("6.")&&!e.startsWith("6.3")}Object.defineProperty(Gn,"__esModule",{value:!0});Gn.NsisUpdater=void 0;const Pr=ge,cl=ee,ow=it,aw=rr,ul=St,sw=de,lw=Tt,cw=Jo,fl=ln;class uw extends ow.BaseUpdater{constructor(t,n){super(t,n),this._verifyUpdateCodeSignature=(r,i)=>(0,cw.verifySignature)(r,i,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(t){t&&(this._verifyUpdateCodeSignature=t)}doDownloadUpdate(t){const n=t.updateInfoAndProvider.provider,r=(0,sw.findFile)(n.resolveFiles(t.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:t,fileInfo:r,task:async(i,o,a,s)=>{const l=r.packageInfo,p=l!=null&&a!=null;if(p&&t.disableWebInstaller)throw(0,Pr.newError)(`Unable to download new version ${t.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!p&&!t.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(p||t.disableDifferentialDownload||await this.differentialDownloadInstaller(r,t,i,n,Pr.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(r.url,i,o);const c=await this.verifySignature(i);if(c!=null)throw await s(),(0,Pr.newError)(`New version ${t.updateInfoAndProvider.info.version} is not signed by the application owner: ${c}`,"ERR_UPDATER_INVALID_SIGNATURE");if(p&&await this.differentialDownloadWebPackage(t,l,a,n))try{await this.httpExecutor.download(new fl.URL(l.path),a,{headers:t.requestHeaders,cancellationToken:t.cancellationToken,sha512:l.sha512})}catch(f){try{await(0,lw.unlink)(a)}catch{}throw f}}})}async verifySignature(t){let n;try{if(n=(await this.configOnDisk.value).publisherName,n==null)return null}catch(r){if(r.code==="ENOENT")return null;throw r}return await this._verifyUpdateCodeSignature(Array.isArray(n)?n:[n],t)}doInstall(t){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const r=["--updated"];t.isSilent&&r.push("/S"),t.isForceRunAfter&&r.push("--force-run"),this.installDirectory&&r.push(`/D=${this.installDirectory}`);const i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&r.push(`--package-file=${i}`);const o=()=>{this.spawnLog(cl.join(process.resourcesPath,"elevate.exe"),[n].concat(r)).catch(a=>this.dispatchError(a))};return t.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),o(),!0):(this.spawnLog(n,r).catch(a=>{const s=a.code;this._logger.info(`Cannot run installer: error code: ${s}, error message: "${a.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),s==="UNKNOWN"||s==="EACCES"?o():s==="ENOENT"?k.shell.openPath(n).catch(l=>this.dispatchError(l)):this.dispatchError(a)}),!0)}async differentialDownloadWebPackage(t,n,r,i){if(n.blockMapSize==null)return!0;try{const o={newUrl:new fl.URL(n.path),oldFile:cl.join(this.downloadedUpdateHelper.cacheDir,Pr.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:r,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:i.isUseMultipleRangeRequest,cancellationToken:t.cancellationToken};this.listenerCount(ul.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(ul.DOWNLOAD_PROGRESS,a)),await new aw.FileWithEmbeddedBlockMapDifferentialDownloader(n,this.httpExecutor,o).download()}catch(o){return this._logger.error(`Cannot download differentially, fallback to full download: ${o.stack||o}`),process.platform==="win32"}return!1}}Gn.NsisUpdater=uw;(function(e){var t=ve&&ve.__createBinding||(Object.create?function(T,A,S,F){F===void 0&&(F=S);var L=Object.getOwnPropertyDescriptor(A,S);(!L||("get"in L?!A.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return A[S]}}),Object.defineProperty(T,F,L)}:function(T,A,S,F){F===void 0&&(F=S),T[F]=A[S]}),n=ve&&ve.__exportStar||function(T,A){for(var S in T)S!=="default"&&!Object.prototype.hasOwnProperty.call(A,S)&&t(A,T,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const r=Tt,i=ee;var o=it;Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return o.BaseUpdater}});var a=gt;Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return a.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return a.NoOpLogger}});var s=de;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return s.Provider}});var l=Mn;Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return l.AppImageUpdater}});var p=Bn;Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return p.DebUpdater}});var c=Hn;Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return c.PacmanUpdater}});var f=jn;Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return f.RpmUpdater}});var d=qn;Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return d.MacUpdater}});var g=Gn;Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return g.NsisUpdater}}),n(St,e);let w;function y(){if(process.platform==="win32")w=new Gn.NsisUpdater;else if(process.platform==="darwin")w=new qn.MacUpdater;else{w=new Mn.AppImageUpdater;try{const T=i.join(process.resourcesPath,"package-type");if(!(0,r.existsSync)(T))return w;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const A=(0,r.readFileSync)(T).toString().trim();switch(console.info("Found package-type:",A),A){case"deb":w=new Bn.DebUpdater;break;case"rpm":w=new jn.RpmUpdater;break;case"pacman":w=new Hn.PacmanUpdater;break;default:break}}catch(T){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",T.message)}}return w}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>w||y()})})(wt);if(typeof k=="string")throw new TypeError("Not running in an Electron environment!");const{env:Fu}=process,fw="ELECTRON_IS_DEV"in Fu,dw=Number.parseInt(Fu.ELECTRON_IS_DEV,10)===1,hw=fw?dw:!k.app.isPackaged,pw=hw?ee.join(k.app.getAppPath(),"spark.db"):ee.join(k.app.getPath("userData"),"spark.db"),ie=new qf(pw);function mw(){if(ie.exec(`
    CREATE TABLE IF NOT EXISTS settings (
      key TEXT PRIMARY KEY,
      value TEXT
    );

    CREATE TABLE IF NOT EXISTS devices (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      device_id TEXT UNIQUE,
      name TEXT NOT NULL,
      address TEXT,
      port INTEGER,
      role TEXT,
      status TEXT DEFAULT 'offline',
      personality TEXT,
      model TEXT,
      cpu_percent REAL,
      memory_percent REAL,
      gpu_info TEXT,
      last_seen DATETIME DEFAULT CURRENT_TIMESTAMP,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    );

    CREATE TABLE IF NOT EXISTS personalities (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      device_id TEXT,
      name TEXT NOT NULL,
      backstory TEXT,
      traits TEXT,
      voice_settings TEXT,
      system_prompt TEXT,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (device_id) REFERENCES devices(device_id)
    );

    CREATE TABLE IF NOT EXISTS conversations (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      device_id TEXT,
      role TEXT NOT NULL,
      content TEXT NOT NULL,
      timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (device_id) REFERENCES devices(device_id)
    );

    CREATE TABLE IF NOT EXISTS models (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      model_id TEXT UNIQUE NOT NULL,
      name TEXT NOT NULL,
      size_mb REAL,
      local_path TEXT,
      download_date DATETIME,
      last_used DATETIME,
      is_active INTEGER DEFAULT 0
    );

    CREATE TABLE IF NOT EXISTS network_stats (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      device_id TEXT,
      metric_name TEXT,
      metric_value REAL,
      timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (device_id) REFERENCES devices(device_id)
    );

    -- Legacy history table for backward compatibility
    CREATE TABLE IF NOT EXISTS history (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      role TEXT,
      content TEXT,
      timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
    );
  `),!ie.prepare("SELECT value FROM settings WHERE key = ?").get("assistant_name")){const t=ie.prepare("INSERT INTO settings (key, value) VALUES (?, ?)");t.run("assistant_name","Spark"),t.run("theme_color","#00ffcc")}}function dl(e){const n=ie.prepare("SELECT value FROM settings WHERE key = ?").get(e);return n?n.value:null}function gw(e,t){ie.prepare("INSERT OR REPLACE INTO settings (key, value) VALUES (?, ?)").run(e,t)}function Ew(e){const t={address:null,port:null,role:"unknown",status:"offline",personality:"",model:"",cpu_percent:null,memory_percent:null,gpu_info:null,...e};ie.prepare(`
    INSERT INTO devices (device_id, name, address, port, role, status, personality, model, cpu_percent, memory_percent, gpu_info, last_seen)
    VALUES (@device_id, @name, @address, @port, @role, @status, @personality, @model, @cpu_percent, @memory_percent, @gpu_info, CURRENT_TIMESTAMP)
    ON CONFLICT(device_id) DO UPDATE SET
      name = @name,
      address = @address,
      port = @port,
      role = @role,
      status = @status,
      personality = @personality,
      model = @model,
      cpu_percent = @cpu_percent,
      memory_percent = @memory_percent,
      gpu_info = @gpu_info,
      last_seen = CURRENT_TIMESTAMP
  `).run(t)}function hl(){return ie.prepare("SELECT * FROM devices ORDER BY last_seen DESC").all()}function yw(e){return ie.prepare("SELECT * FROM devices WHERE device_id = ?").get(e)}function vw(e,t){ie.prepare("UPDATE devices SET status = ?, last_seen = CURRENT_TIMESTAMP WHERE device_id = ?").run(t,e)}function _w(e){ie.prepare("SELECT device_id FROM devices WHERE device_id = ?").get(e.device_id)||ie.prepare(`
      INSERT INTO devices (device_id, name, role, status)
      VALUES (?, ?, 'local', 'online')
    `).run(e.device_id,e.name);const n={device_id:e.device_id,name:e.name,backstory:e.backstory||"",traits:e.traits||"",voice_settings:e.voice_settings||e.voice_style||"",system_prompt:e.system_prompt||e.response_style||""};ie.prepare(`
    INSERT INTO personalities (device_id, name, backstory, traits, voice_settings, system_prompt, updated_at)
    VALUES (@device_id, @name, @backstory, @traits, @voice_settings, @system_prompt, CURRENT_TIMESTAMP)
  `).run(n)}function ww(e){return ie.prepare("SELECT * FROM personalities WHERE device_id = ? ORDER BY created_at DESC LIMIT 1").get(e)}function Tw(e,t){const n=Object.keys(t).map(i=>`${i} = @${i}`).join(", ");ie.prepare(`UPDATE personalities SET ${n}, updated_at = CURRENT_TIMESTAMP WHERE id = ?`).run({...t,id:e})}function Sw(e,t,n){ie.prepare("INSERT INTO conversations (device_id, role, content) VALUES (?, ?, ?)").run(e,t,n)}function Aw(e,t=50){return ie.prepare("SELECT * FROM conversations WHERE device_id = ? ORDER BY timestamp DESC LIMIT ?").all(e,t)}function Cw(e){ie.prepare("DELETE FROM conversations WHERE device_id = ?").run(e)}function bw(e){ie.prepare(`
    INSERT INTO models (model_id, name, size_mb, local_path, download_date)
    VALUES (@model_id, @name, @size_mb, @local_path, CURRENT_TIMESTAMP)
    ON CONFLICT(model_id) DO UPDATE SET
      name = @name,
      size_mb = @size_mb,
      local_path = @local_path,
      download_date = CURRENT_TIMESTAMP
  `).run(e)}function Rw(){return ie.prepare("SELECT * FROM models ORDER BY download_date DESC").all()}function Ow(e){ie.prepare("UPDATE models SET is_active = 0").run(),ie.prepare("UPDATE models SET is_active = 1, last_used = CURRENT_TIMESTAMP WHERE model_id = ?").run(e)}function pl(){return ie.prepare("SELECT * FROM models WHERE is_active = 1 LIMIT 1").get()}function Pw(e,t,n){ie.prepare("INSERT INTO network_stats (device_id, metric_name, metric_value) VALUES (?, ?, ?)").run(e,t,n)}function Iw(e,t,n=100){return ie.prepare("SELECT * FROM network_stats WHERE device_id = ? AND metric_name = ? ORDER BY timestamp DESC LIMIT ?").all(e,t,n)}var tt={},ml=ve&&ve.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{p(r.next(c))}catch(f){a(f)}}function l(c){try{p(r.throw(c))}catch(f){a(f)}}function p(c){c.done?o(c.value):i(c.value).then(s,l)}p((r=r.apply(e,t||[])).next())})};Object.defineProperty(tt,"__esModule",{value:!0});var Dt=tt.PythonShell=tt.NewlineTransformer=tt.PythonShellErrorWithLogs=tt.PythonShellError=void 0;const gl=_o,yo=Vn,ut=Yn,eo=ee,Nw=sn,El=rt,xu=Wr;function yl(e){return typeof e>"u"||e===null?[]:Array.isArray(e)?e:[e]}function vl(e,...t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n)for(let r in n)e[r]=n[r]}),e}function _l(){return Math.floor(Math.random()*1e10)}const wl=(0,xu.promisify)(yo.exec);class Pn extends Error{}tt.PythonShellError=Pn;class Dw extends Pn{}tt.PythonShellErrorWithLogs=Dw;class vo extends Nw.Transform{_transform(t,n,r){let i=t.toString();this._lastLineData&&(i=this._lastLineData+i);const o=i.split(ut.EOL);this._lastLineData=o.pop(),o.forEach(this.push.bind(this)),r()}_flush(t){this._lastLineData&&this.push(this._lastLineData),this._lastLineData=null,t()}}tt.NewlineTransformer=vo;class qe extends gl.EventEmitter{constructor(t,n,r=null,i=null){super();function o(d,g){if(typeof g=="string")return qe[d][g];if(typeof g=="function")return g}if(t.trim().length==0)throw Error("scriptPath cannot be empty! You must give a script for python to run");let a=this,s="";gl.EventEmitter.call(this),n=vl({},qe.defaultOptions,n);let l;n.pythonPath?l=n.pythonPath:l=qe.defaultPythonPath;let p=yl(n.pythonOptions),c=yl(n.args);this.scriptPath=(0,eo.join)(n.scriptPath||"",t),this.command=p.concat(this.scriptPath,c),this.mode=n.mode||"text",this.formatter=o("format",n.formatter||this.mode),this.parser=o("parse",n.parser||this.mode),this.stderrParser=o("parse",n.stderrParser||"text"),this.terminated=!1,this.childProcess=(0,yo.spawn)(l,this.command,n),["stdout","stdin","stderr"].forEach(function(d){a[d]=a.childProcess[d],a.parser&&a[d]&&a[d].setEncoding(n.encoding||"utf8")}),this.parser&&this.stdout&&(r||(r=new vo),r.setEncoding(n.encoding||"utf8"),this.stdout.pipe(r).on("data",d=>{this.emit("message",a.parser(d))})),this.stderrParser&&this.stderr&&(i||(i=new vo),i.setEncoding(n.encoding||"utf8"),this.stderr.pipe(i).on("data",d=>{this.emit("stderr",a.stderrParser(d))})),this.stderr?(this.stderr.on("data",function(d){s+=""+d}),this.stderr.on("end",function(){a.stderrHasEnded=!0,f()})):a.stderrHasEnded=!0,this.stdout?this.stdout.on("end",function(){a.stdoutHasEnded=!0,f()}):a.stdoutHasEnded=!0,this.childProcess.on("error",function(d){a.emit("error",d)}),this.childProcess.on("exit",function(d,g){a.exitCode=d,a.exitSignal=g,f()});function f(){if(!a.stderrHasEnded||!a.stdoutHasEnded||a.exitCode==null&&a.exitSignal==null)return;let d;a.exitCode&&a.exitCode!==0&&(s?d=a.parseError(s):d=new Pn("process exited with code "+a.exitCode),d=vl(d,{executable:l,options:p.length?p:null,script:a.scriptPath,args:c.length?c:null,exitCode:a.exitCode}),(a.listeners("pythonError").length||!a._endCallback)&&a.emit("pythonError",d)),a.terminated=!0,a.emit("close"),a._endCallback&&a._endCallback(d,a.exitCode,a.exitSignal)}}static checkSyntax(t){return ml(this,void 0,void 0,function*(){const n=_l(),r=(0,ut.tmpdir)()+eo.sep+`pythonShellSyntaxCheck${n}.py`;return(0,xu.promisify)(El.writeFile)(r,t).then(()=>this.checkSyntaxFile(r))})}static getPythonPath(){return this.defaultOptions.pythonPath?this.defaultOptions.pythonPath:this.defaultPythonPath}static checkSyntaxFile(t){return ml(this,void 0,void 0,function*(){let r=`${this.getPythonPath()} -m py_compile ${t}`;return wl(r)})}static run(t,n){return new Promise((r,i)=>{let o=new qe(t,n),a=[];o.on("message",function(s){a.push(s)}).end(function(s){s?(s.logs=a,i(s)):r(a)})})}static runString(t,n){const r=_l(),i=ut.tmpdir+eo.sep+`pythonShellFile${r}.py`;return(0,El.writeFileSync)(i,t),qe.run(i,n)}static getVersion(t){return t||(t=this.getPythonPath()),wl(t+" --version")}static getVersionSync(t){return t||(t=this.getPythonPath()),(0,yo.execSync)(t+" --version").toString()}parseError(t){let n=""+t,r;if(/^Traceback/.test(n)){let i=n.trim().split(ut.EOL),o=i.pop();r=new Pn(o),r.traceback=t,r.stack+=ut.EOL+"    ----- Python Traceback -----"+ut.EOL+"  ",r.stack+=i.slice(1).join(ut.EOL+"  ")}else r=new Pn(n);return r}send(t){if(!this.stdin)throw new Error("stdin not open for writing");let n=this.formatter?this.formatter(t):t;return this.mode!=="binary"&&(n+=ut.EOL),this.stdin.write(n),this}end(t){return this.childProcess.stdin&&this.childProcess.stdin.end(),this._endCallback=t,this}kill(t){return this.terminated=this.childProcess.kill(t),this}terminate(t){return this.kill(t)}}Dt=tt.PythonShell=qe;qe.defaultPythonPath=process.platform!="win32"?"python3":"python";qe.defaultOptions={};qe.format={text:function(t){if(t){if(typeof t!="string")return t.toString()}else return"";return t},json:function(t){return JSON.stringify(t)}};qe.parse={text:function(t){return t},json:function(t){return JSON.parse(t)}};process.env.DIST=Q.join(__dirname,"../dist");process.env.VITE_PUBLIC=k.app.isPackaged?process.env.DIST:Q.join(process.env.DIST,"../public");let D;const Tl=process.env.VITE_DEV_SERVER_URL;function Lu(){D=new k.BrowserWindow({width:800,height:600,transparent:!0,frame:!1,hasShadow:!1,alwaysOnTop:!0,show:!1,webPreferences:{preload:Q.join(__dirname,"preload.js"),contextIsolation:!0,nodeIntegration:!1,sandbox:!1}}),D.once("ready-to-show",()=>{D==null||D.show(),D==null||D.focus()}),D.webContents.on("did-finish-load",()=>{D==null||D.webContents.send("main-process-message",new Date().toLocaleString())}),Tl?D.loadURL(Tl):process.env.DIST&&D.loadFile(Q.join(process.env.DIST,"index.html"))}k.app.on("window-all-closed",()=>{process.platform!=="darwin"&&k.app.quit()});k.app.on("activate",()=>{k.BrowserWindow.getAllWindows().length===0&&Lu()});wt.autoUpdater.autoDownload=!1;wt.autoUpdater.autoInstallOnAppQuit=!0;wt.autoUpdater.on("update-available",e=>{D==null||D.webContents.send("update-available",e)});wt.autoUpdater.on("update-downloaded",e=>{D==null||D.webContents.send("update-downloaded",e)});wt.autoUpdater.on("error",e=>{D==null||D.webContents.send("update-error",e)});wt.autoUpdater.on("download-progress",e=>{D==null||D.webContents.send("update-download-progress",e)});k.app.whenReady().then(()=>{mw(),Lu(),process.env.VITE_DEV_SERVER_URL||setTimeout(()=>{wt.autoUpdater.checkForUpdates()},3e3);const e=()=>{const r=require("fs"),i=k.app.isPackaged?Q.dirname(k.app.getPath("exe")):Q.join(__dirname,".."),o=[Q.join(i,"parallax/venv/bin/python3.12"),Q.join(i,"parallax/venv/bin/python3"),Q.join(i,"parallax/venv/bin/python"),Q.join(i,"venv/bin/python3.12"),Q.join(i,"venv/bin/python3"),Q.join(i,"venv/bin/python")];for(const a of o)if(r.existsSync(a))return console.log(`Found Python venv at: ${a}`),a;return r.existsSync("/opt/homebrew/bin/python3.12")?(console.log("Using Homebrew Python 3.12"),"/opt/homebrew/bin/python3.12"):r.existsSync("/usr/bin/python3.12")?"/usr/bin/python3.12":r.existsSync("/usr/bin/python3")?"/usr/bin/python3":(console.log("Falling back to system python3"),"python3")};k.ipcMain.handle("get-setting",(r,i)=>dl(i)),k.ipcMain.handle("get-spark-mode",()=>process.env.SPARK_MODE||"standalone"),k.ipcMain.handle("get-parallax-host",()=>process.env.PARALLAX_HOST||"localhost"),k.ipcMain.handle("save-setting",(r,i,o)=>(gw(i,o),!0)),k.ipcMain.handle("start-host",r=>{console.log("Starting Host...");let i=Q.join(__dirname,"../python_bridge/host.py");k.app.isPackaged&&(i=Q.join(process.resourcesPath,"python_bridge/host.py"));const o=e();console.log(`Using Python: ${o}`);let a=new Dt(i,{mode:"text",pythonPath:o,pythonOptions:["-u"],args:["--model","Qwen/Qwen3-0.6B"]});return a.on("message",function(s){console.log(s),D==null||D.webContents.send("log-update",s)}),a.end(function(s){s&&(console.error("Python Host Error:",s),D==null||D.webContents.send("log-update",`ERROR: ${s.message}`)),console.log("Python Host finished"),D==null||D.webContents.send("log-update","Host process terminated.")}),"Host process initiated"}),k.ipcMain.handle("start-client",r=>{console.log("Starting Client...");let i=Q.join(__dirname,"../python_bridge/client.py");k.app.isPackaged&&(i=Q.join(process.resourcesPath,"python_bridge/client.py"));const o=e();let a=dl("host_scheduler_addr")||"";!a&&process.env.PARALLAX_HOST&&(a=process.env.PARALLAX_HOST,console.log(`Using PARALLAX_HOST from env: ${a}`));let s=new Dt(i,{mode:"text",pythonPath:o,pythonOptions:["-u"],args:a?["--scheduler-addr",a]:[]});return s.on("message",function(l){console.log(l),D==null||D.webContents.send("log-update",l)}),s.end(function(l){l&&(console.error("Python Client Error:",l),D==null||D.webContents.send("log-update",`ERROR: ${l.message}`)),console.log("Python Client finished"),D==null||D.webContents.send("log-update","Client process terminated.")}),"Client process initiated"}),k.ipcMain.handle("start-voice",r=>{console.log("Starting Voice Assistant...");let i=Q.join(__dirname,"../python_bridge/voice_assistant.py");k.app.isPackaged&&(i=Q.join(process.resourcesPath,"python_bridge/voice_assistant.py"));const o=e(),a=require("fs");let s=process.env.PARALLAX_HOST||"";if(console.log(`PARALLAX_HOST env: "${s}"`),!s||s==="localhost"){const p=[Q.join(__dirname,"..",".parallax_host"),Q.join(k.app.getAppPath(),".parallax_host"),Q.join(process.cwd(),".parallax_host")];for(const c of p)try{if(a.existsSync(c)){const f=a.readFileSync(c,"utf8").trim();if(f&&f!=="localhost"){s=f,console.log(`Read host from ${c}: ${s}`);break}}}catch{console.log(`Could not read ${c}`)}}s||(s="localhost"),console.log(`Voice Assistant using Python: ${o}`),console.log(`Voice Assistant connecting to Parallax at: ${s}:3001`);let l=new Dt(i,{mode:"text",pythonPath:o,pythonOptions:["-u"],args:[],env:{...process.env,PARALLAX_HOST:s}});return l.on("message",function(p){console.log(p),p.startsWith("STATE:")?D==null||D.webContents.send("state-update",p.replace("STATE:","")):p.startsWith("LOG:")?D==null||D.webContents.send("log-update",p.replace("LOG:","")):D==null||D.webContents.send("log-update",p)}),l.end(function(p){p&&(console.error("Voice Assistant Error:",p),D==null||D.webContents.send("log-update",`ERROR: ${p.message}`)),D==null||D.webContents.send("log-update","Voice Assistant terminated."),D==null||D.webContents.send("state-update","IDLE")}),"Voice Assistant initiated"}),k.ipcMain.handle("close-app",()=>{k.app.quit()});let t=null;k.ipcMain.handle("start-network-discovery",(r,i,o,a,s)=>{if(console.log("Starting Network Discovery..."),console.log(`  Device: ${i}, Role: ${o}`),t){try{t.kill()}catch{}t=null}let l=Q.join(__dirname,"../python_bridge/network_discovery.py");k.app.isPackaged&&(l=Q.join(process.resourcesPath,"python_bridge/network_discovery.py"));const p=e();return console.log(`  Using Python: ${p}`),t=new Dt(l,{mode:"text",pythonPath:p,pythonOptions:["-u"],args:[i||"Spark",o||"client"]}),t.on("message",function(c){if(console.log(`Network Discovery: ${c}`),D==null||D.webContents.send("network-discovery-update",c),c.startsWith("FOUND:")||c.startsWith("LOST:"))try{const f=c.indexOf("{");if(f!==-1){const d=JSON.parse(c.substring(f));c.startsWith("FOUND:")?Ew({device_id:d.name,name:d.name,address:d.address,port:d.port,role:d.role,status:"online",personality:d.personality,model:d.model}):vw(d.name,"offline"),D==null||D.webContents.send("devices-updated",hl())}}catch(f){console.error("Error parsing network discovery message:",f)}}),t.on("error",function(c){console.error("Network Discovery Error:",c)}),"Network discovery initiated"}),k.ipcMain.handle("stop-network-discovery",()=>(t&&(t.kill(),t=null),"Network discovery stopped")),k.ipcMain.handle("get-all-devices",()=>hl()),k.ipcMain.handle("get-device",(r,i)=>yw(i));let n=null;k.ipcMain.handle("browse-models",async(r,i="text-generation",o=20)=>new Promise((a,s)=>{let l=Q.join(__dirname,"../python_bridge/model_manager.py");k.app.isPackaged&&(l=Q.join(process.resourcesPath,"python_bridge/model_manager.py"));const p="python3";let c="";const f=new Dt(l,{mode:"text",pythonPath:p,pythonOptions:["-u"],args:["browse",i,String(o)]});f.on("message",d=>{c+=d+`
`}),f.end(d=>{if(d)s(d);else try{const g=JSON.parse(c);a(g)}catch{s(new Error("Failed to parse model list"))}})})),k.ipcMain.handle("download-model",(r,i)=>{console.log(`Starting download of model: ${i}`);let o=Q.join(__dirname,"../python_bridge/model_manager.py");k.app.isPackaged&&(o=Q.join(process.resourcesPath,"python_bridge/model_manager.py"));const a="python3";return n=new Dt(o,{mode:"text",pythonPath:a,pythonOptions:["-u"],args:["download",i]}),n.on("message",s=>{console.log(s),D==null||D.webContents.send("model-download-progress",s)}),n.end(s=>{s||(bw({model_id:i,name:i.split("/").pop()||i,local_path:`~/.cache/spark-models/${i.replace("/","_")}`}),D==null||D.webContents.send("model-download-complete",i))}),"Model download initiated"}),k.ipcMain.handle("get-local-models",()=>Rw()),k.ipcMain.handle("set-active-model",(r,i)=>(Ow(i),pl())),k.ipcMain.handle("get-active-model",()=>pl()),k.ipcMain.handle("save-personality",(r,i)=>(_w(i),!0)),k.ipcMain.handle("get-personality",(r,i)=>ww(i)),k.ipcMain.handle("update-personality",(r,i,o)=>(Tw(i,o),!0)),k.ipcMain.handle("save-conversation",(r,i,o,a)=>(Sw(i,o,a),!0)),k.ipcMain.handle("get-conversations",(r,i,o)=>Aw(i,o)),k.ipcMain.handle("clear-conversations",(r,i)=>(Cw(i),!0)),k.ipcMain.handle("save-network-stat",(r,i,o,a)=>(Pw(i,o,a),!0)),k.ipcMain.handle("get-network-stats",(r,i,o,a)=>Iw(i,o,a))});
